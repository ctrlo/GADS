"use strict";(self.webpackChunklinkspace=self.webpackChunklinkspace||[]).push([[42,776],{73538:(t,e,n)=>{n.r(e),n.d(e,{default:()=>j});n(52675),n(89463),n(2259),n(23792),n(40875),n(60825),n(47764),n(62953),n(45700),n(28706),n(50113),n(89572),n(2892),n(26099),n(58940),n(38781);var i=n(17527),r=n(56197),o=n(74692);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,p(i.key),i)}}function s(t,e,n){return e=u(e),function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function p(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}var f,h,v,b="select__placeholder",y="select__menu-item--active",m="select__menu-item--hover",g=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=s(this,e,[t])).el=o(n.element),n.toggleButton=n.el.find(".select__toggle"),n.input=n.el.find("input"),n.menu=n.el.find(".select__menu"),n.options=n.el.find(".select__menu-item"),n.optionChecked="",n.optionHoveredIndex=-1,n.optionsCount=n.options.length,n.isSelectReveal=n.el.hasClass("select--reveal"),n.initSelect(n.el),n.el.hasClass("select--required")&&(0,r.pT)(n.el),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(e,t),n=e,(i=[{key:"initSelect",value:function(){var t=this;this.options&&(this.options.on("click",(function(e){t.handleClick(e)})),this.input.on("change",(function(e){t.handleChange(e)})),this.el.on("show.bs.dropdown",(function(){t.handleOpen()})),this.input.val()&&this.input.trigger("change"))}},{key:"addOption",value:function(t,e){var n=document.createElement("li");n.classList.add("select__menu-item"),n.setAttribute("role","option"),n.setAttribute("aria-selected","false"),n.setAttribute("data-id",t),n.setAttribute("data-value",e),n.innerHTML=t,this.menu.append(n),this.bindOptionHandler(n),this.options=this.el.find(".select__menu-item")}},{key:"removeOption",value:function(t){this.options.each((function(e,n){parseInt(n.dataset.value)===t&&n.remove()}))}},{key:"updateOption",value:function(t,e){this.options.each((function(n,i){parseInt(i.dataset.value)===e&&(i.setAttribute("data-id",t),i.innerHTML=t)}))}},{key:"bindOptionHandler",value:function(t){var e=this;o(t).on("click",(function(t){e.handleClick(t)}))}},{key:"handleOpen",value:function(){var t=this;this.el.on("keydown",(function(e){t.supportKeyboardNavigation(e)}))}},{key:"handleClose",value:function(t){this.el.dropdown("hide"),t.stopPropagation(),this.el.off("keydown")}},{key:"handleChange",value:function(t){var e=this,n=o(t.target).val();""===n?this.resetSelect():this.options.each((function(t,i){o(i).data("value").toString()===n&&(e.updateChecked(o(i)),e.isSelectReveal&&e.revealInstance(o(i)))}))}},{key:"handleClick",value:function(t){var e=o(t.target),n=e.data("value"),i=e.data("reveal_id");this.input.val(n).trigger("change"),void 0!==i&&this.input.attr("data-reveal_id",i),this.updateChecked(o(e)),this.isSelectReveal&&this.revealInstance(o(e)),this.toggleButton.trigger("focus")}},{key:"revealInstance",value:function(t){var e=this,n=o(".select-reveal--".concat(this.input.attr("id")," > .select-reveal__instance")),i="";i=void 0!==t.data("reveal_id")?"#".concat(this.input.attr("id"),"_").concat(t.data("reveal_id")):"#".concat(this.input.attr("id"),"_").concat(t.data("value")),n.each((function(t,n){o(n).hide(),e.disableFields(n,!0)})),o(i).show(),this.disableFields(o(i),!1)}},{key:"disableFields",value:function(t,e){var n=o(t).find("input, textarea");e?n.prop("disabled",!0):n.removeAttr("disabled")}},{key:"updateHovered",value:function(t){var e=this.options[this.optionHoveredIndex],n=this.options[t];e&&e.classList.remove(m),n&&n.classList.add(m),this.optionHoveredIndex=t}},{key:"updateChecked",value:function(t){var e=o(t).data("value"),n=o(t).html();this.toggleButton.find("span").html(n),this.toggleButton.find("span").removeClass(b),this.options.removeClass(y),this.options.attr("aria-selected",!1),o(t).addClass(y),o(t).attr("aria-selected",!0),this.optionChecked=e}},{key:"supportKeyboardNavigation",value:function(t){if(40===t.keyCode&&this.optionHoveredIndex<this.optionsCount-1&&(t.preventDefault(),this.updateHovered(this.optionHoveredIndex+1)),38===t.keyCode&&this.optionHoveredIndex>0&&(t.preventDefault(),this.updateHovered(this.optionHoveredIndex-1)),13===t.keyCode||32===t.keyCode){t.preventDefault();var e=this.options[this.optionHoveredIndex],n=e&&o(e).data("value");n&&this.input.val(n).trigger("change"),this.handleClose(t)}27===t.keyCode&&this.handleClose(t)}},{key:"resetSelect",value:function(){var t=this.input[0].placeholder;this.toggleButton.find("span").html(t),this.toggleButton.find("span").addClass(b),this.options.removeClass(y),this.options.attr("aria-selected",!1),this.input.removeAttr("value"),this.input.removeAttr("data-restore-value")}}])&&l(n.prototype,i),a&&l(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,a}(i.uA);f=g,v=g,(h=p(h="self"))in f?Object.defineProperty(f,h,{value:v,enumerable:!0,configurable:!0,writable:!0}):f[h]=v;const j=g},83208:(t,e,n)=>{n.r(e),n.d(e,{default:()=>O});n(52675),n(89463),n(2259),n(45700),n(28706),n(2008),n(50113),n(23418),n(23792),n(34782),n(89572),n(62010),n(33110),n(2892),n(5506),n(83851),n(40875),n(79432),n(26099),n(58940),n(60825),n(40888),n(15472),n(27495),n(90906),n(38781),n(47764),n(42762),n(23500),n(62953);var i=n(28817),r=n(74692),o=function(t,e){e.DataTable().row.add(t).draw()},a=function(t,e,n){e.find("tbody > tr").each((function(i,o){r(o).has("button[data-tempid=".concat(n,"]")).length&&e.DataTable().row(i).data(t).draw()}))},l=function(t){t.DataTable().clear().draw()},s=n(97468),c=n(73538),u=n(74692);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,l=[],s=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;s=!1}else for(;!(s=(i=o.call(n)).done)&&(l.push(i.value),l.length!==e);s=!0);}catch(t){c=!0,r=t}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,v(i.key),i)}}function v(t){var e=function(t,e){if("object"!=d(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==d(e)?e:e+""}function b(t,e,n){return e=g(e),function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,y()?Reflect.construct(e,n||[],g(t).constructor):e.apply(t,n))}function y(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(y=function(){return!!t})()}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},m.apply(this,arguments)}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}const O=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=b(this,e,[t])).el=u(n.element),n.json={},n.fieldOptions=n.el.find(".modal-body .field-options"),n.topicsTable=n.el.find("#topics"),n.fieldsTable=n.el.find("#fields"),n.selectTopic=n.el.find(".modal-body .select--js-topic")[0],n.selectTopicComponent=new c.default(n.selectTopic),n.currentFieldObject={},n.currentTopicObject={},n.initNewTable(n.el),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(e,t),n=e,(i=[{key:"initNewTable",value:function(){var t=this.el.find(".modal-body .btn-js-create-topic"),e=this.el.find(".modal-body .btn-js-create-field");t.on("click",(function(){s.y.activate(4,!0)})),e.on("click",(function(){s.y.activate(7,!0)})),this.fieldOptions.addClass("hidden"),this.setupDataObject()}},{key:"setupDataObject",value:function(){this.json={table_permissions:[],topics:[],fields:[]}}},{key:"addFieldsToObject",value:function(t,e){return t.each((function(t,n){u(n).val()&&("checkbox"==u(n).prop("type")?u(n).prop("checked")?e[u(n).attr("name")]=!0:e[u(n).attr("name")]=!1:"topic_tempid"===u(n).attr("name")?e[u(n).attr("name")]=parseInt(u(n).val()):e[u(n).attr("name")]=u(n).val())})),e}},{key:"addTopic",value:function(t){var e=this,n=t.find("input, textarea");if(0===Object.keys(this.currentTopicObject).length){var i={tempId:this.uniqueID()};i=this.addFieldsToObject(n,i),this.currentTopicObject=i,this.json.topics.push(i),this.selectTopicComponent.addOption(i.name,i.tempId);var r=['<button class="btn btn-link btn-js-edit-topic" type="button" data-tempid="'.concat(i.tempId,'">').concat(i.name,"</button>"),i.description||"",i.expanded,""];o(r,this.topicsTable),this.addHandlerToEditItemButton("topic")}else{var l=this.json.topics.find((function(t){return t.tempId===e.currentTopicObject.tempId}));n.each((function(t,e){u(e).val()&&(l[u(e).attr("name")]=u(e).val())}));var s=['<button class="btn btn-link btn-js-edit-topic" type="button" data-tempid="'.concat(this.currentTopicObject.tempId,'">').concat(this.currentTopicObject.name,"</button>"),this.currentTopicObject.description||"",this.currentTopicObject.expanded,""];a(s,this.topicsTable,this.currentTopicObject.tempId),this.selectTopicComponent.updateOption(this.currentTopicObject.name,this.currentTopicObject.tempId),this.addHandlerToEditItemButton("topic")}}},{key:"fillFields",value:function(t,e){for(var n=0,i=Object.entries(e);n<i.length;n++){var r=p(i[n],2),o=r[0],a=r[1],l=t.find("[name=".concat(o,"]"));l&&("checkbox"===l.prop("type")&&!0===a?l.prop("checked",!0):"hidden"===l.prop("type")?(l.val(a),l.trigger("change")):(l.val(a),l.trigger("blur")))}}},{key:"editTopic",value:function(t,e){this.currentTopicObject=t,this.fillFields(u(e),t)}},{key:"editField",value:function(t,n){var i=this;this.currentFieldObject=t,s.y.clear([8,9]),this.fillFields(u(n),t);var r=t.field_type,o=m(g(e.prototype),"getFrameByNumber",this).call(this,8),a=u(o).find("[id=field_type_".concat(r,"]"));this.fillFields(a,t.field_type_settings);var l=t.custom_field_permissions,c=m(g(e.prototype),"getFrameByNumber",this).call(this,9);l.forEach((function(t){var e=t.group_id,n=u(c).find("tr[data-group-id=".concat(e,"]"));i.fillFields(n,t.permissions)}))}},{key:"removeNode",value:function(t,e){return e.filter((function(e){return e.tempId!==t}))}},{key:"addHandlerToEditItemButton",value:function(t){var e=this.el.find(".modal-body .btn-js-edit-".concat(t));e.off("click");var n="topic"===t?4:7;e.each((function(t,e){var i=u(e).data("tempid");u(e).on("click",(function(){s.y.activate(n,!0,i)}))}))}},{key:"uniqueID",value:function(){return Math.floor(Math.random()*Date.now())}},{key:"addField",value:function(t){var e=this,n=t.find("input, textarea");if(0===Object.keys(this.currentFieldObject).length){var i={tempId:this.uniqueID(),custom_field_permissions:[],field_type_settings:{}};i=this.addFieldsToObject(n,i),this.currentFieldObject=i,this.json.fields.push(i);var r=['<button class="btn btn-link btn-js-edit-field" type="button" data-tempid="'.concat(i.tempId,'">').concat(i.name,"</button>"),i.name,i.topic||"",i["field-type"],""];o(r,this.fieldsTable),this.addHandlerToEditItemButton("field")}else{var l=this.json.fields.find((function(t){return t.tempId===e.currentFieldObject.tempId}));n.each((function(t,e){u(e).val()&&(l[u(e).attr("name")]=u(e).val())}));var s=['<button class="btn btn-link btn-js-edit-field" type="button" data-tempid="'.concat(this.currentFieldObject.tempId,'">').concat(this.currentFieldObject.name,"</button>"),this.currentFieldObject.name,this.currentFieldObject.topic||"",this.currentFieldObject["field-type"],""];a(s,this.fieldsTable,this.currentFieldObject.tempId),this.addHandlerToEditItemButton("field")}}},{key:"addFieldTypeSettings",value:function(t){var e=this,n=t.find("[id^=field_type_].select-reveal__instance:visible"),i=n.find("input, textarea"),r=this.json.fields.find((function(t){return t.tempId===e.currentFieldObject.tempId}));switch(n.attr("id")){case"field_type_enum":var o=n.find('input[name="ordering"]'),a=n.find(".sortable input"),l={dropdown_values:[],ordering:o.val()};a.each((function(t,e){var n={};n[u(e).attr("name")]=u(e).val(),l.dropdown_values.push(n)})),r.field_type_settings=l;break;case"field_type_tree":var s=n.find(".tree-widget-container"),c={data:{},dataJson:{}};if(s.length){var d=s.jstree(!0).get_json("#",{flat:!1}),p=(JSON.stringify(d),s.data().jstree._model.data);c.data=p,c.dataJson=d}c=this.addFieldsToObject(i,c),r.field_type_settings=c;break;case"field_type_curval":var f=n.find('input[name="curval_field_ids"]:visible'),h=n.find('input:not([name="curval_field_ids"]), textarea'),v={curval_field_ids:[]};f.each((function(t,e){u(e).val()&&v.curval_field_ids.push(u(e).val())})),v=this.addFieldsToObject(h,v),r.field_type_settings=v;break;default:var b={};b=this.addFieldsToObject(i,b),r.field_type_settings=b}}},{key:"addTable",value:function(t){var e=this,n=t.find("input, textarea"),i=this.el.find(".modal-title");n.each((function(t,n){u(n).val()&&(e.json[u(n).attr("name")]=u(n).val())})),this.json.name&&i.html("Table setup | ".concat(this.json.name))}},{key:"addCustomFieldPermissions",value:function(t){var e=this,n=t.find("#custom_field_permissions_table").DataTable().rows(),i=this.json.fields.find((function(t){return t.tempId===e.currentFieldObject.tempId}));i.custom_field_permissions=[],n.every((function(){var t=e.nodes()[0],n=t.dataset.groupId,r=u(t).find("td")[0].innerHTML.trim(),o=u(t).find("input"),a={group_id:n,group_name:r,permissions:{}};a.permissions=e.addFieldsToObject(o,a.permissions),i.custom_field_permissions.push(a)}))}},{key:"addTablePermissions",value:function(t){var e=this;t.find(".card--expandable").each((function(t,n){var i=u(n).closest(".permission-group"),r=i&&void 0!==i.data("group-id")?i.data("group-id"):"",o=u(n).find(".card__subtitle")[0].innerHTML.trim(),a=u(n).find("fieldset"),l={group_id:r,group_name:o,records:{},views:{},fields:{}};a.each((function(t,n){var i=u(n).data("name"),r=u(n).find("input");l[i]=e.addFieldsToObject(r,l[i])})),e.json.table_permissions.push(l)}))}},{key:"handleNext",value:function(t){switch(m(g(e.prototype),"handleNext",this).call(this),t.data("config").item){case"topic":this.addTopic(t);break;case"field":this.addField(t);break;case"field type settings":this.addFieldTypeSettings(t),this.recalculateDatatableColumnWidths(u("#custom_field_permissions_table"));break;case"custom field permissions":this.addCustomFieldPermissions(t);break;case"table":this.addTable(t);break;case"table permissions":this.addTablePermissions(t);break;default:var n=t.find("input, textarea");this.addFieldsToObject(n,this.json)}}},{key:"recalculateDatatableColumnWidths",value:function(t){t.DataTable().columns.adjust()}},{key:"handleBack",value:function(){m(g(e.prototype),"handleBack",this).call(this)}},{key:"handleSave",value:function(){s.y.upload(this.json)}},{key:"handleUpdate",value:function(t){"topic"===t.data("config").item?(this.addTopic(t),this.currentTopicObject={}):"field"===t.data("config").item&&(this.addField(t),this.currentFieldObject={})}},{key:"handleActivate",value:function(t,n,i){if(m(g(e.prototype),"handleActivate",this).call(this,t,n),7===t&&i){var r=m(g(e.prototype),"getFrameByNumber",this).call(this,t),o=this.json.fields.find((function(t){return t.tempId===i}));this.editField(o,r)}else if(7===t&&n)this.currentFieldObject={},s.y.clear([8,9]);else if(4===t&&i){var a=m(g(e.prototype),"getFrameByNumber",this).call(this,t),l=this.json.topics.find((function(t){return t.tempId===i}));this.editTopic(l,a)}else 4===t&&n&&(this.currentTopicObject={});m(g(e.prototype),"validateFrame",this).call(this)}},{key:"handleClose",value:function(){var t=this;this.el.find(".collapse").collapse("hide"),this.topicsTable&&l(this.topicsTable),this.fieldsTable&&l(this.fieldsTable),this.selectTopicComponent.options.each((function(e,n){t.selectTopicComponent.removeOption(parseInt(n.dataset.value))})),this.setupDataObject(),this.currentFieldObject={},this.currentTopicObject={},m(g(e.prototype),"handleClose",this).call(this)}}])&&h(n.prototype,i),r&&h(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,r}(i.A)},50349:(t,e,n)=>{n.r(e),n.d(e,{default:()=>h});n(52675),n(89463),n(2259),n(45700),n(50113),n(23792),n(89572),n(2892),n(83851),n(40875),n(26099),n(58940),n(60825),n(40888),n(15472),n(47764),n(62953);var i=n(97468),r=n(28817),o=n(74692);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,s(i.key),i)}}function s(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}function c(t,e,n){return e=p(e),function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,n||[],p(t).constructor):e.apply(t,n))}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(u=function(){return!!t})()}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},d.apply(this,arguments)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}const h=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=c(this,e,[t])).el=o(n.element),n.emailField=n.el.find('input[name="email"]'),n.emailText=n.el.find(".js-email"),n.initUserModal(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(e,t),n=e,(r=[{key:"initUserModal",value:function(){var t=this;this.el.on("show.bs.modal",(function(e){t.toggleContent(e),i.y.validate(),t.updateEmail(),t.emailField.keyup((function(){t.updateEmail()}))}))}},{key:"toggleContent",value:function(t){o(t.relatedTarget).hasClass("btn-add")?(i.y.clear(),this.el.find(".js-approve-account").hide(),this.el.find(".js-add-user").show(),this.el.find(".btn-js-reject-request").hide(),this.el.find(".btn-js-save .btn__title").html("Create account"),this.el.find('input[name="approve-account"]').val("false")):(this.el.find(".js-add-user").hide(),this.el.find(".js-approve-account").show(),this.el.find(".btn-js-reject-request").show(),this.el.find(".btn-js-save .btn__title").html("Approve account"),this.el.find('input[name="approve-account"]').val("true"))}},{key:"updateEmail",value:function(){this.emailText.html(this.emailField.val())}},{key:"getData",value:function(){var t=this,e={view_limits:[],permissions:[],groups:[]};return this.el.find("input, textarea").each((function(n,i){if("radio"===o(i).prop("type")||"checkbox"===o(i).prop("type")){if(o(i).prop("checked")){var r=isNaN(o(i).val())?o(i).val():parseInt(o(i).val());Array.isArray(e[o(i).attr("name")])?e[o(i).attr("name")].push(r):e[o(i).attr("name")]=r}}else if(""!==o(i).val()){var a=o(i).val(),l=isNaN(a)?t.parseValue(a):parseInt(a);Array.isArray(e[o(i).attr("name")])?e[o(i).attr("name")].push(l):e[o(i).attr("name")]=l}})),e}},{key:"parseValue",value:function(t){return"true"===t||"false"!==t&&t}},{key:"handleSave",value:function(){i.y.upload(this.getData())}},{key:"handleClose",value:function(){d(p(e.prototype),"handleClose",this).call(this),this.emailText.html("USER")}}])&&l(n.prototype,r),a&&l(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a}(r.A)},16575:(t,e,n)=>{var i=n(39297);t.exports=function(t){return void 0!==t&&(i(t,"value")||i(t,"writable"))}},83851:(t,e,n)=>{var i=n(46518),r=n(79039),o=n(25397),a=n(77347).f,l=n(43724);i({target:"Object",stat:!0,forced:!l||r((function(){a(1)})),sham:!l},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},40888:(t,e,n)=>{var i=n(46518),r=n(69565),o=n(20034),a=n(28551),l=n(16575),s=n(77347),c=n(42787);i({target:"Reflect",stat:!0},{get:function t(e,n){var i,u,d=arguments.length<3?e:arguments[2];return a(e)===d?e[n]:(i=s.f(e,n))?l(i)?i.value:void 0===i.get?void 0:r(i.get,d):o(u=c(e))?t(u,n,d):void 0}})},15472:(t,e,n)=>{var i=n(46518),r=n(24475),o=n(10687);i({global:!0},{Reflect:{}}),o(r.Reflect,"Reflect",!0)}}]);