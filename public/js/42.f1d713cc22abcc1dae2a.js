"use strict";(self.webpackChunklinkspace=self.webpackChunklinkspace||[]).push([[42],{38042:(e,t,n)=>{n.d(t,{Z:()=>b});n(25728),n(60228),n(12826),n(34338),n(48324),n(88052),n(76034),n(30050),n(69373),n(59903),n(59749),n(86544),n(79288),n(84254),n(752),n(21694),n(76265);var i=n(53865),a=n(79475);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(a=i.key,o=void 0,o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===r(o)?o:String(o)),i)}var a,o}function l(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=l((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.object=t,this.step=t.data("config").step,this.number=t.data("config").frame,this.item=t.data("config").item||null,this.skip=t.data("config").skip||null,this.back=n,this.requiredFields=t.find("input[required]"),this.isValid=!0,this.error=[],this.buttons={next:t.find(".modal-footer .btn-js-next"),back:t.find(".modal-footer .btn-js-back"),skip:t.find(".modal-footer .btn-js-skip"),addNext:t.find(".modal-footer .btn-js-add-next"),invisible:t.find(".modal-footer .btn-js-add-next"),save:t.find(".modal-footer .btn-js-save")}})),u=n(60387),c=n(19755);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(a=i.key,r=void 0,r=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(a,"string"),"symbol"===f(r)?r:String(r)),i)}var a,r}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}const b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(o,e);var t,n,i,r=h(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).el=c(t.element),t.isWizzard=t.el.hasClass("modal--wizzard"),t.isForm=t.el.hasClass("modal--form"),t.frames=t.el.find(".modal-frame"),t.typingTimer=null,t.wasInitialized||t.initModal(),t}return t=o,i=[{key:"allowReinitialization",get:function(){return!0}}],(n=[{key:"initModal",value:function(){var e=this;this.el.on("show.bs.modal",(function(){if(a.o.addSubscriber(e),e.isWizzard){try{e.activateFrame(1,0)}catch(t){u.P.error(t),e.preventModalToOpen()}e.el.on("hide.bs.modal",(function(t){e.dataHasChanged()&&(confirm("Are you sure you want to close this popup? Any unsaved data will be lost.")||t.preventDefault())}))}(e.isWizzard||e.isForm)&&e.el.on("hidden.bs.modal",(function(){e.el.off("hide.bs.modal"),a.o.close()})),e.hideContent(!0)}))}},{key:"dataHasChanged",value:function(){var e=c(this.el).find("input, textarea"),t=!1;return e.each((function(e,n){if(c(n).val())if("hidden"!==c(n).attr("type")&&"checkbox"!==c(n).attr("type")&&"radio"!==c(n).attr("type")||"hidden"===c(n).attr("type")&&c(n).parents(".select").length){if(c(n).data("original-value")&&c(n).val().toString()!==c(n).data("original-value").toString()||!c(n).data("original-value"))return t=!0,!1}else if("hidden"!==c(n).attr("type")&&(c(n).data("original-value")&&c(n).prop("checked")&&c(n).val()!==c(n).data("original-value").toString()||!c(n).data("original-value")&&c(n).prop("checked")))return t=!0,!1})),t}},{key:"hideContent",value:function(e){e?c("body").children().attr("aria-hidden",!0):c("body").children().removeAttr("aria-hidden")}},{key:"preventModalToOpen",value:function(){var e=this.el.attr("id")||"";c('.btn[data-target="#'.concat(e,'"]')).on("click",(function(e){e.stopPropagation()}))}},{key:"clearFields",value:function(e){c(e).find("input, textarea").each((function(e,t){var n=c(t);"radio"===n.attr("type")?n.prop("checked",!1):"checkbox"===n.attr("type")?n.is(":checked")&&n.trigger("click"):(n.data("restore-value")?n.val(n.data("restore-value")):n.val(""),c(t).removeData("original-value"),n.trigger("change")),n.is(":invalid")&&(n.attr("aria-invalid",!1),n.closest(".input").removeClass("input--invalid"))}))}},{key:"clearFrames",value:function(e){var t=this;e?c(e).each((function(e,n){var i=t.getFrameByNumber(n);i&&t.clearFields(i)})):this.frames.each((function(e,n){t.clearFields(n)}))}},{key:"getFrameNumber",value:function(e){var t=c(e).data("config");if(t.frame&&!isNaN(t.frame))return t.frame}},{key:"getFrameByNumber",value:function(e){var t=null;return this.frames.each((function(n,i){if(c(i).data("config").frame===e)return t=i,!1})),t}},{key:"activateFrame",value:function(e,t,n){var i=this;this.frames.each((function(a,r){var o=c(r).data("config");if(!o.frame||isNaN(o.frame))throw"activateFrame: frame is not a number!";if(i.unbindEventHandlers(c(r)),o.frame===e){try{i.frame=i.createFrame(r,t)}catch(e){u.P.error(e)}i.frame.object.removeClass("invisible"),i.frame.object.find(".alert").hide(),i.activateStep(i.frame.step),i.bindEventHandlers(),i.frame.requiredFields.length&&(i.frame.buttons.next&&i.setNextButtonState(!1),i.frame.buttons.invisible&&i.setInvisibleButtonState(!1)),n&&(i.clearFields(r),i.validateFrame())}else c(r).addClass("invisible")}))}},{key:"createFrame",value:function(e,t){if(isNaN(c(e).data("config").step)||isNaN(c(e).data("config").frame))throw"createFrame: Parameter is not a number!";if(c(e).data("config").skip&&isNaN(c(e).data("config").skip))throw"createFrame: Skip parameter is not a number!";return new s(c(e),t)}},{key:"bindEventHandlers",value:function(){var e=this;this.frame.buttons.next.click((function(){a.o.next(e.frame.object)})),this.frame.buttons.back.click((function(){a.o.back(e.frame.object)})),this.frame.buttons.skip.click((function(){e.frame.skip&&a.o.skip(e.frame.skip)})),this.frame.buttons.addNext.click((function(){a.o.add(e.frame.object)})),this.frame.buttons.save.click((function(){a.o.save()})),this.frame.requiredFields.bind("keyup.modalEvent",(function(t){e.handleKeyup(t)})),this.frame.requiredFields.bind("keydown.modalEvent",(function(){e.handleKeydown()})),this.frame.requiredFields.bind("blur.modalEvent",(function(t){e.handleBlur(t)}))}},{key:"handleKeyup",value:function(e){var t=this,n=e.target;clearTimeout(this.typingTimer),this.typingTimer=setTimeout((function(){c(n).val()&&t.validateField(n)}),1e3)}},{key:"handleKeydown",value:function(){clearTimeout(this.typingTimer)}},{key:"handleBlur",value:function(e){var t=e.target;clearTimeout(this.typingTimer),c(t).val()&&this.validateField(t)}},{key:"isValidField",value:function(e){return!c(e).is(":invalid")&&""!=c(e).val()}},{key:"validateField",value:function(e){var t=this.isValidField(e);if(this.frame.error=[],!t){var n=c(e).closest(".input").find("label").html();this.frame.error.push("".concat(n," is invalid"))}this.setInputState(c(e),t),this.validateFrame()}},{key:"validateFrame",value:function(){var e=this;this.frame.isValid=!0,this.frame.requiredFields.each((function(t,n){e.isValidField(c(n))||(e.frame.isValid=!1)})),this.setFrameState()}},{key:"setInputState",value:function(e){e.is(":invalid")?(e.attr("aria-invalid",!0),e.closest(".input").addClass("input--invalid")):(e.attr("aria-invalid",!1),e.closest(".input").removeClass("input--invalid"))}},{key:"setFrameState",value:function(){var e=this.frame.object.find(".alert");if(this.frame.buttons.next&&this.setNextButtonState(this.frame.isValid),this.frame.buttons.invisible&&this.setInvisibleButtonState(this.frame.isValid),!this.frame.isValid&&this.frame.error.length>0){var t="";c.each(this.frame.error,(function(e,n){var i=c("<span>").text(n).html();t+="<li>".concat(i,"</li>")})),e.html("<div>".concat("<p>There were problems with the following fields:</p>","<ul>").concat(t,"</ul></div>")),e.show(),this.el.animate({scrollTop:e.offset().top},500)}else e.hide()}},{key:"unbindEventHandlers",value:function(e){e.find(".modal-footer .btn").unbind(),e.find("input[required]").unbind(".modalEvent")}},{key:"setNextButtonState",value:function(e){e?(this.frame.buttons.next.removeAttr("disabled"),this.frame.buttons.next.removeClass("btn-disabled"),this.frame.buttons.next.addClass("btn-default")):(this.frame.buttons.next.attr("disabled","disabled"),this.frame.buttons.next.addClass("btn-disabled"),this.frame.buttons.next.removeClass("btn-default"))}},{key:"setInvisibleButtonState",value:function(e){e?this.frame.buttons.invisible.removeClass("btn-invisible"):this.frame.buttons.invisible.addClass("btn-invisible")}},{key:"activateStep",value:function(e){this.el.find(".modal__step").each((function(t,n){c(n).data("step")===e?c(n).addClass("modal__step--active"):c(n).removeClass("modal__step--active")}))}},{key:"handleUpload",value:function(e){var t=this,n=this.el.data("config").url,i=this.el.data("config").id,a=c("body").data("csrf").toString();e.csrf_token=a||"";var r=JSON.stringify(e),o=i?"".concat(n,"/").concat(i):n;c.ajax({method:"POST",contentType:"application/json",url:o,data:r,processData:!1}).done((function(){location.reload()})).fail((function(e){var n=e.responseJSON.message;t.showError(n)}))}},{key:"showError",value:function(e){var t=this.frame.object.find(".alert"),n=c("<span>").text(e).html();t.html("<p>Error: ".concat(n,"</p>")),t.show(),this.el.animate({scrollTop:t.offset().top},500)}},{key:"handleNext",value:function(){var e=this.frame.number+1;this.frames.length>=e&&this.activateFrame(e,this.frame.number)}},{key:"handleBack",value:function(){this.frame.back>0&&this.activateFrame(this.frame.back,this.frame.back-1),this.validateFrame()}},{key:"handleSkip",value:function(e){this.activateFrame(e,this.frame.number)}},{key:"handleAdd",value:function(e){a.o.update(e),this.clearFields(e),this.validateFrame()}},{key:"handleActivate",value:function(e,t){this.activateFrame(e,this.frame.number,t)}},{key:"handleShow",value:function(e){c(e).modal("show")}},{key:"handleClear",value:function(e){this.clearFrames(e)}},{key:"handleValidate",value:function(){this.validateFrame()}},{key:"handleClose",value:function(){this.clearFrames(),this.isWizzard&&(this.activateFrame(1,0,!0),this.el.data("config")&&this.el.data("config").id&&(this.el.data("config").id=null)),this.el.unbind("hide.bs.modal hidden.bs.modal"),a.o.unsubscribe(this)}}])&&d(t.prototype,n),i&&d(t,i),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.wA)},79475:(e,t,n)=>{n.d(t,{o:()=>o});n(62506),n(60228),n(47522),n(69373),n(59903),n(59749),n(86544),n(79288),n(84254),n(752),n(21694),n(76265);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(r=a.key,o=void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===i(o)?o:String(o)),a)}var r,o}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observers=[]}var t,n,i;return t=e,n=[{key:"addSubscriber",value:function(e){this.observers.push(e)}},{key:"unsubscribe",value:function(e){var t=this.observers.indexOf(e);this.observers.splice(t,1)}},{key:"activate",value:function(e,t,n){this.observers.forEach((function(i){var a;return null===(a=i.handleActivate)||void 0===a?void 0:a.call(i,e,t,n)}))}},{key:"add",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleAdd)||void 0===n?void 0:n.call(t,e)}))}},{key:"back",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleBack)||void 0===n?void 0:n.call(t,e)}))}},{key:"next",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleNext)||void 0===n?void 0:n.call(t,e)}))}},{key:"show",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleShow)||void 0===n?void 0:n.call(t,e)}))}},{key:"save",value:function(){this.observers.forEach((function(e){var t;return null===(t=e.handleSave)||void 0===t?void 0:t.call(e)}))}},{key:"upload",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleUpload)||void 0===n?void 0:n.call(t,e)}))}},{key:"clear",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleClear)||void 0===n?void 0:n.call(t,e)}))}},{key:"close",value:function(){this.observers.forEach((function(e){var t;return null===(t=e.handleClose)||void 0===t?void 0:t.call(e)}))}},{key:"skip",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleSkip)||void 0===n?void 0:n.call(t,e)}))}},{key:"validate",value:function(){this.observers.forEach((function(e){var t;return null===(t=e.handleValidate)||void 0===t?void 0:t.call(e)}))}},{key:"update",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleUpdate)||void 0===n?void 0:n.call(t,e)}))}}],n&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),o=new r},60387:(e,t,n)=>{n.d(t,{P:()=>r});n(2918),n(69373),n(59903),n(59749),n(86544),n(60228),n(79288),n(84254),n(752),n(21694),n(76265);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(r=a.key,o=void 0,o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===i(o)?o:String(o)),a)}var r,o}var r=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.allowLogging="localhost"===location.hostname||"127.0.0.1"===location.hostname||location.hostname.endsWith(".peek.digitpaint.nl")}var t,n,i;return t=e,(n=[{key:"log",value:function(e){this.allowLogging&&console.log(e)}},{key:"info",value:function(e){this.allowLogging&&console.info(e)}},{key:"warn",value:function(e){this.allowLogging&&console.warn(e)}},{key:"error",value:function(e){this.allowLogging&&console.error(e)}}])&&a(t.prototype,n),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}())},2918:(e,t,n)=>{var i,a=n(79989),r=n(46576),o=n(82474).f,l=n(43126),s=n(34327),u=n(42124),c=n(74684),f=n(27413),d=n(53931),v=r("".endsWith),h=r("".slice),m=Math.min,b=f("endsWith");a({target:"String",proto:!0,forced:!!(d||b||(i=o(String.prototype,"endsWith"),!i||i.writable))&&!b},{endsWith:function(e){var t=s(c(this));u(e);var n=arguments.length>1?arguments[1]:void 0,i=t.length,a=void 0===n?i:m(l(n),i),r=s(e);return v?v(t,r,a):h(t,a-r.length,a)===r}})}}]);