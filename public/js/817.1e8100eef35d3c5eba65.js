"use strict";(self.webpackChunklinkspace=self.webpackChunklinkspace||[]).push([[817],{28817:(e,t,n)=>{n.d(t,{A:()=>k});n(52675),n(89463),n(2259),n(45700),n(28706),n(50113),n(23792),n(89572),n(33110),n(2892),n(40875),n(26099),n(60825),n(38781),n(47764),n(62953);var i=n(17527),a=n(97468);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}function l(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var u=l((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.object=t,this.step=t.data("config").step,this.number=t.data("config").frame,this.item=t.data("config").item||null,this.skip=t.data("config").skip||null,this.back=n,this.requiredFields=t.find("input[required]"),this.isValid=!0,this.error=[],this.buttons={next:t.find(".modal-footer .btn-js-next"),back:t.find(".modal-footer .btn-js-back"),skip:t.find(".modal-footer .btn-js-skip"),addNext:t.find(".modal-footer .btn-js-add-next"),invisible:t.find(".modal-footer .btn-js-add-next"),save:t.find(".modal-footer .btn-js-save")}})),c=n(11977),f=n(74692);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function v(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,h(i.key),i)}}function h(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=d(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}function m(e,t,n){return t=y(t),function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}const k=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=m(this,t,[e])).el=f(n.element),n.isWizzard=n.el.hasClass("modal--wizzard"),n.isForm=n.el.hasClass("modal--form"),n.frames=n.el.find(".modal-frame"),n.typingTimer=null,n.wasInitialized||n.initModal(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,r=[{key:"allowReinitialization",get:function(){return!0}}],(i=[{key:"initModal",value:function(){var e=this;this.el.on("show.bs.modal",(function(){if(a.y.addSubscriber(e),e.isWizzard){try{e.activateFrame(1,0)}catch(t){c.m.error(t),e.preventModalToOpen()}e.el.on("hide.bs.modal",(function(t){e.dataHasChanged()&&(confirm("Are you sure you want to close this popup? Any unsaved data will be lost.")||t.preventDefault())}))}(e.isWizzard||e.isForm)&&e.el.on("hidden.bs.modal",(function(){e.el.off("hide.bs.modal"),a.y.close()})),e.hideContent(!0)}))}},{key:"dataHasChanged",value:function(){var e=f(this.el).find("input, textarea"),t=!1;return e.each((function(e,n){if(f(n).val())if("hidden"!==f(n).attr("type")&&"checkbox"!==f(n).attr("type")&&"radio"!==f(n).attr("type")||"hidden"===f(n).attr("type")&&f(n).parents(".select").length){if(f(n).data("original-value")&&f(n).val().toString()!==f(n).data("original-value").toString()||!f(n).data("original-value"))return t=!0,!1}else if("hidden"!==f(n).attr("type")&&(f(n).data("original-value")&&f(n).prop("checked")&&f(n).val()!==f(n).data("original-value").toString()||!f(n).data("original-value")&&f(n).prop("checked")))return t=!0,!1})),t}},{key:"hideContent",value:function(e){e?f("body").children().attr("aria-hidden",!0):f("body").children().removeAttr("aria-hidden")}},{key:"preventModalToOpen",value:function(){var e=this.el.attr("id")||"";f('.btn[data-target="#'.concat(e,'"]')).on("click",(function(e){e.stopPropagation()}))}},{key:"clearFields",value:function(e){f(e).find("input, textarea").each((function(e,t){var n=f(t);"radio"===n.attr("type")?n.prop("checked",!1):"checkbox"===n.attr("type")?n.is(":checked")&&n.trigger("click"):(n.data("restore-value")?n.val(n.data("restore-value")):n.val(""),f(t).removeData("original-value"),n.trigger("change")),n.is(":invalid")&&(n.attr("aria-invalid",!1),n.closest(".input").removeClass("input--invalid"))}))}},{key:"clearFrames",value:function(e){var t=this;e?f(e).each((function(e,n){var i=t.getFrameByNumber(n);i&&t.clearFields(i)})):this.frames.each((function(e,n){t.clearFields(n)}))}},{key:"getFrameNumber",value:function(e){var t=f(e).data("config");if(t.frame&&!isNaN(t.frame))return t.frame}},{key:"getFrameByNumber",value:function(e){var t=null;return this.frames.each((function(n,i){if(f(i).data("config").frame===e)return t=i,!1})),t}},{key:"activateFrame",value:function(e,t,n){var i=this;this.frames.each((function(a,r){var o=f(r).data("config");if(!o.frame||isNaN(o.frame))throw"activateFrame: frame is not a number!";if(i.unbindEventHandlers(f(r)),o.frame===e){try{i.frame=i.createFrame(r,t)}catch(e){c.m.error(e)}i.frame.object.removeClass("invisible"),i.frame.object.find(".alert").hide(),i.activateStep(i.frame.step),i.bindEventHandlers(),i.frame.requiredFields.length&&(i.frame.buttons.next&&i.setNextButtonState(!1),i.frame.buttons.invisible&&i.setInvisibleButtonState(!1)),n&&(i.clearFields(r),i.validateFrame())}else f(r).addClass("invisible")}))}},{key:"createFrame",value:function(e,t){if(isNaN(f(e).data("config").step)||isNaN(f(e).data("config").frame))throw"createFrame: Parameter is not a number!";if(f(e).data("config").skip&&isNaN(f(e).data("config").skip))throw"createFrame: Skip parameter is not a number!";return new u(f(e),t)}},{key:"bindEventHandlers",value:function(){var e=this;this.frame.buttons.next.click((function(){a.y.next(e.frame.object)})),this.frame.buttons.back.click((function(){a.y.back(e.frame.object)})),this.frame.buttons.skip.click((function(){e.frame.skip&&a.y.skip(e.frame.skip)})),this.frame.buttons.addNext.click((function(){a.y.add(e.frame.object)})),this.frame.buttons.save.click((function(){a.y.save()})),this.frame.requiredFields.bind("keyup.modalEvent",(function(t){e.handleKeyup(t)})),this.frame.requiredFields.bind("keydown.modalEvent",(function(){e.handleKeydown()})),this.frame.requiredFields.bind("blur.modalEvent",(function(t){e.handleBlur(t)}))}},{key:"handleKeyup",value:function(e){var t=this,n=e.target;clearTimeout(this.typingTimer),this.typingTimer=setTimeout((function(){f(n).val()&&t.validateField(n)}),1e3)}},{key:"handleKeydown",value:function(){clearTimeout(this.typingTimer)}},{key:"handleBlur",value:function(e){var t=e.target;clearTimeout(this.typingTimer),f(t).val()&&this.validateField(t)}},{key:"isValidField",value:function(e){return!f(e).is(":invalid")&&""!=f(e).val()}},{key:"validateField",value:function(e){var t=this.isValidField(e);if(this.frame.error=[],!t){var n=f(e).closest(".input").find("label").html();this.frame.error.push("".concat(n," is invalid"))}this.setInputState(f(e),t),this.validateFrame()}},{key:"validateFrame",value:function(){var e=this;this.frame.isValid=!0,this.frame.requiredFields.each((function(t,n){e.isValidField(f(n))||(e.frame.isValid=!1)})),this.setFrameState()}},{key:"setInputState",value:function(e){e.is(":invalid")?(e.attr("aria-invalid",!0),e.closest(".input").addClass("input--invalid")):(e.attr("aria-invalid",!1),e.closest(".input").removeClass("input--invalid"))}},{key:"setFrameState",value:function(){var e=this.frame.object.find(".alert");if(this.frame.buttons.next&&this.setNextButtonState(this.frame.isValid),this.frame.buttons.invisible&&this.setInvisibleButtonState(this.frame.isValid),!this.frame.isValid&&this.frame.error.length>0){var t="";f.each(this.frame.error,(function(e,n){var i=f("<span>").text(n).html();t+="<li>".concat(i,"</li>")})),e.html("<div>".concat("<p>There were problems with the following fields:</p>","<ul>").concat(t,"</ul></div>")),e.show(),this.el.animate({scrollTop:e.offset().top},500)}else e.hide()}},{key:"unbindEventHandlers",value:function(e){e.find(".modal-footer .btn").unbind(),e.find("input[required]").unbind(".modalEvent")}},{key:"setNextButtonState",value:function(e){e?(this.frame.buttons.next.removeAttr("disabled"),this.frame.buttons.next.removeClass("btn-disabled"),this.frame.buttons.next.addClass("btn-default")):(this.frame.buttons.next.attr("disabled","disabled"),this.frame.buttons.next.addClass("btn-disabled"),this.frame.buttons.next.removeClass("btn-default"))}},{key:"setInvisibleButtonState",value:function(e){e?this.frame.buttons.invisible.removeClass("btn-invisible"):this.frame.buttons.invisible.addClass("btn-invisible")}},{key:"activateStep",value:function(e){this.el.find(".modal__step").each((function(t,n){f(n).data("step")===e?f(n).addClass("modal__step--active"):f(n).removeClass("modal__step--active")}))}},{key:"handleUpload",value:function(e){var t=this,n=this.el.data("config").url,i=this.el.data("config").id,a=f("body").data("csrf").toString();e.csrf_token=a||"";var r=JSON.stringify(e),o=i?"".concat(n,"/").concat(i):n;f.ajax({method:"POST",contentType:"application/json",url:o,data:r,processData:!1}).done((function(){location.reload()})).fail((function(e){var n=e.responseJSON.message;t.showError(n)}))}},{key:"showError",value:function(e){var t=this.frame.object.find(".alert"),n=f("<span>").text(e).html();t.html("<p>Error: ".concat(n,"</p>")),t.show(),this.el.animate({scrollTop:t.offset().top},500)}},{key:"handleNext",value:function(){var e=this.frame.number+1;this.frames.length>=e&&this.activateFrame(e,this.frame.number)}},{key:"handleBack",value:function(){this.frame.back>0&&this.activateFrame(this.frame.back,this.frame.back-1),this.validateFrame()}},{key:"handleSkip",value:function(e){this.activateFrame(e,this.frame.number)}},{key:"handleAdd",value:function(e){a.y.update(e),this.clearFields(e),this.validateFrame()}},{key:"handleActivate",value:function(e,t){this.activateFrame(e,this.frame.number,t)}},{key:"handleShow",value:function(e){f(e).modal("show")}},{key:"handleClear",value:function(e){this.clearFrames(e)}},{key:"handleValidate",value:function(){this.validateFrame()}},{key:"handleClose",value:function(){this.clearFrames(),this.isWizzard&&(this.activateFrame(1,0,!0),this.el.data("config")&&this.el.data("config").id&&(this.el.data("config").id=null)),this.el.unbind("hide.bs.modal hidden.bs.modal"),a.y.unsubscribe(this)}}])&&v(n.prototype,i),r&&v(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,r}(i.uA)},97468:(e,t,n)=>{n.d(t,{y:()=>l});n(52675),n(89463),n(2259),n(45700),n(23792),n(54554),n(89572),n(2892),n(26099),n(47764),n(23500),n(62953);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var o=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observers=[]},t=[{key:"addSubscriber",value:function(e){this.observers.push(e)}},{key:"unsubscribe",value:function(e){var t=this.observers.indexOf(e);this.observers.splice(t,1)}},{key:"activate",value:function(e,t,n){this.observers.forEach((function(i){var a;return null===(a=i.handleActivate)||void 0===a?void 0:a.call(i,e,t,n)}))}},{key:"add",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleAdd)||void 0===n?void 0:n.call(t,e)}))}},{key:"back",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleBack)||void 0===n?void 0:n.call(t,e)}))}},{key:"next",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleNext)||void 0===n?void 0:n.call(t,e)}))}},{key:"show",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleShow)||void 0===n?void 0:n.call(t,e)}))}},{key:"save",value:function(){this.observers.forEach((function(e){var t;return null===(t=e.handleSave)||void 0===t?void 0:t.call(e)}))}},{key:"upload",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleUpload)||void 0===n?void 0:n.call(t,e)}))}},{key:"clear",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleClear)||void 0===n?void 0:n.call(t,e)}))}},{key:"close",value:function(){this.observers.forEach((function(e){var t;return null===(t=e.handleClose)||void 0===t?void 0:t.call(e)}))}},{key:"skip",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleSkip)||void 0===n?void 0:n.call(t,e)}))}},{key:"validate",value:function(){this.observers.forEach((function(e){var t;return null===(t=e.handleValidate)||void 0===t?void 0:t.call(e)}))}},{key:"update",value:function(e){this.observers.forEach((function(t){var n;return null===(n=t.handleUpdate)||void 0===n?void 0:n.call(t,e)}))}}],t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),l=new o},11977:(e,t,n)=>{n.d(t,{m:()=>o});n(52675),n(89463),n(2259),n(45700),n(23792),n(89572),n(2892),n(26099),n(99449),n(47764),n(62953);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var o=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.allowLogging="localhost"===location.hostname||"127.0.0.1"===location.hostname||location.hostname.endsWith(".peek.digitpaint.nl")},(t=[{key:"log",value:function(e){this.allowLogging&&console.log(e)}},{key:"info",value:function(e){this.allowLogging&&console.info(e)}},{key:"warn",value:function(e){this.allowLogging&&console.warn(e)}},{key:"error",value:function(e){this.allowLogging&&console.error(e)}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}())},99449:(e,t,n)=>{var i,a=n(46518),r=n(27476),o=n(77347).f,l=n(18014),s=n(655),u=n(60511),c=n(67750),f=n(41436),d=n(96395),v=r("".endsWith),h=r("".slice),m=Math.min,b=f("endsWith");a({target:"String",proto:!0,forced:!!(d||b||(i=o(String.prototype,"endsWith"),!i||i.writable))&&!b},{endsWith:function(e){var t=s(c(this));u(e);var n=arguments.length>1?arguments[1]:void 0,i=t.length,a=void 0===n?i:m(l(n),i),r=s(e);return v?v(t,r,a):h(t,a-r.length,a)===r}})}}]);