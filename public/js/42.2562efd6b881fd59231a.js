"use strict";(self.webpackChunklinkspace=self.webpackChunklinkspace||[]).push([[42],{38042:(e,t,i)=>{i.d(t,{Z:()=>b});i(25728),i(60228),i(12826),i(34338),i(48324),i(88052),i(76034),i(30050),i(69373),i(59903),i(59749),i(86544),i(79288),i(84254),i(752),i(21694),i(76265);var a=i(53865),n=i(79475);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(n=a.key,o=void 0,o=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===r(o)?o:String(o)),a)}var n,o}function l(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var s=l((function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.object=t,this.step=t.data("config").step,this.number=t.data("config").frame,this.item=t.data("config").item||null,this.skip=t.data("config").skip||null,this.back=i,this.requiredFields=t.find("input[required]"),this.isValid=!0,this.error=[],this.buttons={next:t.find(".modal-footer .btn-js-next"),back:t.find(".modal-footer .btn-js-back"),skip:t.find(".modal-footer .btn-js-skip"),addNext:t.find(".modal-footer .btn-js-add-next"),invisible:t.find(".modal-footer .btn-js-add-next"),save:t.find(".modal-footer .btn-js-save")}})),u=i(60387),c=i(19755);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(n=a.key,r=void 0,r=function(e,t){if("object"!==f(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!==f(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"),"symbol"===f(r)?r:String(r)),a)}var n,r}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=m(e);if(t){var n=m(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}const b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(o,e);var t,i,a,r=h(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).el=c(t.element),t.isWizzard=t.el.hasClass("modal--wizzard"),t.isForm=t.el.hasClass("modal--form"),t.frames=t.el.find(".modal-frame"),t.typingTimer=null,t.wasInitialized||t.initModal(),t}return t=o,a=[{key:"allowReinitialization",get:function(){return!0}}],(i=[{key:"initModal",value:function(){var e=this;this.el.on("show.bs.modal",(function(){if(n.o.addSubscriber(e),e.isWizzard){try{e.activateFrame(1,0)}catch(t){u.P.error(t),e.preventModalToOpen()}e.el.on("hide.bs.modal",(function(t){e.dataHasChanged()&&(confirm("Are you sure you want to close this popup? Any unsaved data will be lost.")||t.preventDefault())}))}(e.isWizzard||e.isForm)&&e.el.on("hidden.bs.modal",(function(){e.el.off("hide.bs.modal"),n.o.close()})),e.hideContent(!0)}))}},{key:"dataHasChanged",value:function(){var e=c(this.el).find("input, textarea"),t=!1;return e.each((function(e,i){if(c(i).val())if("hidden"!==c(i).attr("type")&&"checkbox"!==c(i).attr("type")&&"radio"!==c(i).attr("type")||"hidden"===c(i).attr("type")&&c(i).parents(".select").length){if(c(i).data("original-value")&&c(i).val().toString()!==c(i).data("original-value").toString()||!c(i).data("original-value"))return t=!0,!1}else if("hidden"!==c(i).attr("type")&&(c(i).data("original-value")&&c(i).prop("checked")&&c(i).val()!==c(i).data("original-value").toString()||!c(i).data("original-value")&&c(i).prop("checked")))return t=!0,!1})),t}},{key:"hideContent",value:function(e){e?c("body").children().attr("aria-hidden",!0):c("body").children().removeAttr("aria-hidden")}},{key:"preventModalToOpen",value:function(){var e=this.el.attr("id")||"";c('.btn[data-target="#'.concat(e,'"]')).on("click",(function(e){e.stopPropagation()}))}},{key:"clearFields",value:function(e){c(e).find("input, textarea").each((function(e,t){var i=c(t);"radio"===i.attr("type")?i.prop("checked",!1):"checkbox"===i.attr("type")?i.is(":checked")&&i.trigger("click"):(i.data("restore-value")?i.val(i.data("restore-value")):i.val(""),c(t).removeData("original-value"),i.trigger("change")),i.is(":invalid")&&(i.attr("aria-invalid",!1),i.closest(".input").removeClass("input--invalid"))}))}},{key:"clearFrames",value:function(e){var t=this;e?c(e).each((function(e,i){var a=t.getFrameByNumber(i);a&&t.clearFields(a)})):this.frames.each((function(e,i){t.clearFields(i)}))}},{key:"getFrameNumber",value:function(e){var t=c(e).data("config");if(t.frame&&!isNaN(t.frame))return t.frame}},{key:"getFrameByNumber",value:function(e){var t=null;return this.frames.each((function(i,a){if(c(a).data("config").frame===e)return t=a,!1})),t}},{key:"activateFrame",value:function(e,t,i){var a=this;this.frames.each((function(n,r){var o=c(r).data("config");if(!o.frame||isNaN(o.frame))throw"activateFrame: frame is not a number!";if(a.unbindEventHandlers(c(r)),o.frame===e){try{a.frame=a.createFrame(r,t)}catch(e){u.P.error(e)}a.frame.object.removeClass("invisible"),a.frame.object.find(".alert").hide(),a.activateStep(a.frame.step),a.bindEventHandlers(),a.frame.requiredFields.length&&(a.frame.buttons.next&&a.setNextButtonState(!1),a.frame.buttons.invisible&&a.setInvisibleButtonState(!1)),i&&(a.clearFields(r),a.validateFrame())}else c(r).addClass("invisible")}))}},{key:"createFrame",value:function(e,t){if(isNaN(c(e).data("config").step)||isNaN(c(e).data("config").frame))throw"createFrame: Parameter is not a number!";if(c(e).data("config").skip&&isNaN(c(e).data("config").skip))throw"createFrame: Skip parameter is not a number!";return new s(c(e),t)}},{key:"bindEventHandlers",value:function(){var e=this;this.frame.buttons.next.click((function(){n.o.next(e.frame.object)})),this.frame.buttons.back.click((function(){n.o.back(e.frame.object)})),this.frame.buttons.skip.click((function(){e.frame.skip&&n.o.skip(e.frame.skip)})),this.frame.buttons.addNext.click((function(){n.o.add(e.frame.object)})),this.frame.buttons.save.click((function(){n.o.save()})),this.frame.requiredFields.bind("keyup.modalEvent",(function(t){e.handleKeyup(t)})),this.frame.requiredFields.bind("keydown.modalEvent",(function(){e.handleKeydown()})),this.frame.requiredFields.bind("blur.modalEvent",(function(t){e.handleBlur(t)}))}},{key:"handleKeyup",value:function(e){var t=this,i=e.target;clearTimeout(this.typingTimer),this.typingTimer=setTimeout((function(){c(i).val()&&t.validateField(i)}),1e3)}},{key:"handleKeydown",value:function(){clearTimeout(this.typingTimer)}},{key:"handleBlur",value:function(e){var t=e.target;clearTimeout(this.typingTimer),c(t).val()&&this.validateField(t)}},{key:"isValidField",value:function(e){return!c(e).is(":invalid")&&""!=c(e).val()}},{key:"validateField",value:function(e){var t=this.isValidField(e);if(this.frame.error=[],!t){var i=c(e).closest(".input").find("label").html();this.frame.error.push("".concat(i," is invalid"))}this.setInputState(c(e),t),this.validateFrame()}},{key:"validateFrame",value:function(){var e=this;this.frame.isValid=!0,this.frame.requiredFields.each((function(t,i){e.isValidField(c(i))||(e.frame.isValid=!1)})),this.setFrameState()}},{key:"setInputState",value:function(e){e.is(":invalid")?(e.attr("aria-invalid",!0),e.closest(".input").addClass("input--invalid")):(e.attr("aria-invalid",!1),e.closest(".input").removeClass("input--invalid"))}},{key:"setFrameState",value:function(){var e=this.frame.object.find(".alert");if(this.frame.buttons.next&&this.setNextButtonState(this.frame.isValid),this.frame.buttons.invisible&&this.setInvisibleButtonState(this.frame.isValid),!this.frame.isValid&&this.frame.error.length>0){var t="";c.each(this.frame.error,(function(e,i){var a=c("<span>").text(i).html();t+="<li>".concat(a,"</li>")})),e.html("<div>".concat("<p>There were problems with the following fields:</p>","<ul>").concat(t,"</ul></div>")),e.show(),this.el.animate({scrollTop:e.offset().top},500)}else e.hide()}},{key:"unbindEventHandlers",value:function(e){e.find(".modal-footer .btn").unbind(),e.find("input[required]").unbind(".modalEvent")}},{key:"setNextButtonState",value:function(e){e?(this.frame.buttons.next.removeAttr("disabled"),this.frame.buttons.next.removeClass("btn-disabled"),this.frame.buttons.next.addClass("btn-default")):(this.frame.buttons.next.attr("disabled","disabled"),this.frame.buttons.next.addClass("btn-disabled"),this.frame.buttons.next.removeClass("btn-default"))}},{key:"setInvisibleButtonState",value:function(e){e?this.frame.buttons.invisible.removeClass("btn-invisible"):this.frame.buttons.invisible.addClass("btn-invisible")}},{key:"activateStep",value:function(e){this.el.find(".modal__step").each((function(t,i){c(i).data("step")===e?c(i).addClass("modal__step--active"):c(i).removeClass("modal__step--active")}))}},{key:"handleUpload",value:function(e){var t=this,i=this.el.data("config").url,a=this.el.data("config").id,n=c("body").data("csrf").toString();e.csrf_token=n||"";var r=JSON.stringify(e),o=a?"".concat(i,"/").concat(a):i;c.ajax({method:"POST",contentType:"application/json",url:o,data:r,processData:!1}).done((function(){location.reload()})).fail((function(e){var i=e.responseJSON.message;t.showError(i)}))}},{key:"showError",value:function(e){var t=this.frame.object.find(".alert"),i=c("<span>").text(e).html();t.html("<p>Error: ".concat(i,"</p>")),t.show(),this.el.animate({scrollTop:t.offset().top},500)}},{key:"handleNext",value:function(){var e=this.frame.number+1;this.frames.length>=e&&this.activateFrame(e,this.frame.number)}},{key:"handleBack",value:function(){this.frame.back>0&&this.activateFrame(this.frame.back,this.frame.back-1),this.validateFrame()}},{key:"handleSkip",value:function(e){this.activateFrame(e,this.frame.number)}},{key:"handleAdd",value:function(e){n.o.update(e),this.clearFields(e),this.validateFrame()}},{key:"handleActivate",value:function(e,t){this.activateFrame(e,this.frame.number,t)}},{key:"handleShow",value:function(e){c(e).modal("show")}},{key:"handleClear",value:function(e){this.clearFrames(e)}},{key:"handleValidate",value:function(){this.validateFrame()}},{key:"handleClose",value:function(){this.clearFrames(),this.isWizzard&&(this.activateFrame(1,0,!0),this.el.data("config")&&this.el.data("config").id&&(this.el.data("config").id=null)),this.el.unbind("hide.bs.modal hidden.bs.modal"),n.o.unsubscribe(this)}}])&&d(t.prototype,i),a&&d(t,a),Object.defineProperty(t,"prototype",{writable:!1}),o}(a.wA)},79475:(e,t,i)=>{i.d(t,{o:()=>o});i(62506),i(60228),i(47522),i(69373),i(59903),i(59749),i(86544),i(79288),i(84254),i(752),i(21694),i(76265);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(r=n.key,o=void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===a(o)?o:String(o)),n)}var r,o}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observers=[]}var t,i,a;return t=e,i=[{key:"addSubscriber",value:function(e){this.observers.push(e)}},{key:"unsubscribe",value:function(e){var t=this.observers.indexOf(e);this.observers.splice(t,1)}},{key:"activate",value:function(e,t,i){this.observers.forEach((function(a){var n;return null===(n=a.handleActivate)||void 0===n?void 0:n.call(a,e,t,i)}))}},{key:"add",value:function(e){this.observers.forEach((function(t){var i;return null===(i=t.handleAdd)||void 0===i?void 0:i.call(t,e)}))}},{key:"back",value:function(e){this.observers.forEach((function(t){var i;return null===(i=t.handleBack)||void 0===i?void 0:i.call(t,e)}))}},{key:"next",value:function(e){this.observers.forEach((function(t){var i;return null===(i=t.handleNext)||void 0===i?void 0:i.call(t,e)}))}},{key:"show",value:function(e){this.observers.forEach((function(t){var i;return null===(i=t.handleShow)||void 0===i?void 0:i.call(t,e)}))}},{key:"save",value:function(){this.observers.forEach((function(e){var t;return null===(t=e.handleSave)||void 0===t?void 0:t.call(e)}))}},{key:"upload",value:function(e){this.observers.forEach((function(t){var i;return null===(i=t.handleUpload)||void 0===i?void 0:i.call(t,e)}))}},{key:"clear",value:function(e){this.observers.forEach((function(t){var i;return null===(i=t.handleClear)||void 0===i?void 0:i.call(t,e)}))}},{key:"close",value:function(){this.observers.forEach((function(e){var t;return null===(t=e.handleClose)||void 0===t?void 0:t.call(e)}))}},{key:"skip",value:function(e){this.observers.forEach((function(t){var i;return null===(i=t.handleSkip)||void 0===i?void 0:i.call(t,e)}))}},{key:"validate",value:function(){this.observers.forEach((function(e){var t;return null===(t=e.handleValidate)||void 0===t?void 0:t.call(e)}))}},{key:"update",value:function(e){this.observers.forEach((function(t){var i;return null===(i=t.handleUpdate)||void 0===i?void 0:i.call(t,e)}))}}],i&&n(t.prototype,i),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),o=new r}}]);