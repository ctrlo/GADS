"use strict";(self.webpackChunklinkspace=self.webpackChunklinkspace||[]).push([[841],{59892:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});r(52675),r(89463),r(2259),r(45700),r(28706),r(23792),r(89572),r(33110),r(2892),r(26099),r(27495),r(90906),r(47764),r(62953),r(91460),r(55668),r(99893);var n=r(74692);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}var a=function(){return e=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errored=!1,t.on("click",(function(e){var t=n("#field_type_tree"),i=n("#tree-config .tree-widget-container"),o=n("#calcfield_card_header"),l=n("#displayConditionsBuilder"),a=l.length&&l.queryBuilder("getRules"),s=n(".people-filter"),u=s.length&&s.queryBuilder("getRules"),c=n("#displayConditions"),f=n("#refers_to_instance_id"),d=f.length&&n("[data-builder-id='".concat(f.val(),"']")),p=n("#default_field_permissions_table"),y=!1,b=!1,g=!1,v=!1,h=n("#show_in_edit");if(o.length&&o.is(":visible")&&!h.val()){if(!r.errored){var m=document.createElement("div");m.classList.add("form-text","form-text--error"),m.innerHTML="Please select the calculation field visibility before submitting the form",h.closest(".form-group").append(m),m.scrollIntoView(),r.errored=!0}e.preventDefault()}if((t.length&&t.is(":visible")&&i.length||!t.length&&i.length)&&(y=!0),f.length&&!f.prop("disabled")&&d.length&&(b=!0),a&&c.length&&(g=!0),s.length&&u&&(v=!0),y){var w=i.jstree(!0).get_json("#",{flat:!1}),_=JSON.stringify(w),k=i.data();n.ajax({async:!1,type:"POST",url:r.getURL(k),data:{data:_,csrf_token:k.csrfToken}}).done((function(){alert("Tree has been updated")}))}b&&window.UpdateFilter&&window.UpdateFilter(d,e),v&&window.UpdatePeopleFilter&&window.UpdatePeopleFilter(s,e),g&&c.val(JSON.stringify(a,null,2));var S=p.DataTable().$("input,select,textarea");S.hide();var P=n(e.currentTarget).closest("form");p.remove(),P.append(S)}))},(t=[{key:"getURL",value:function(e){if(window.test)return"";var t=window.siteConfig&&window.siteConfig.urls.treeApi;return t||"/".concat(e.layoutIdentifier,"/tree/").concat(e.columnId)}}])&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}()}}]);