"use strict";(self.webpackChunklinkspace=self.webpackChunklinkspace||[]).push([[798],{59398:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});r(48324),r(64043),r(7409),r(34338),r(69373),r(59903),r(59749),r(86544),r(60228),r(79288),r(84254),r(752),r(21694),r(76265),r(57568),r(30991),r(15954);var n=r(19755);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,a=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===i(a)?a:String(a)),n)}var o,a}var a=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errored=!1,t.on("click",(function(e){var t=n("#field_type_tree"),i=n("#tree-config .tree-widget-container"),o=n("#calcfield_card_header"),a=n("#displayConditionsBuilder"),l=a.length&&a.queryBuilder("getRules"),s=n("#displayConditions"),c=n("#refers_to_instance_id"),u=c.length&&n("[data-builder-id='".concat(c.val(),"']")),f=n("#default_field_permissions_table"),d=!1,p=!1,y=!1,v=n("#show_in_edit");if(o.length&&o.is(":visible")&&!v.val()){if(!r.errored){var b=document.createElement("div");b.classList.add("form-text","form-text--error"),b.innerHTML="Please select the calculation field visibility before submitting the form",v.closest(".form-group").append(b),b.scrollIntoView(),r.errored=!0}e.preventDefault()}if((t.length&&t.is(":visible")&&i.length||!t.length&&i.length)&&(d=!0),c.length&&!c.prop("disabled")&&u.length&&(p=!0),l&&s.length&&(y=!0),d){var g=i.jstree(!0).get_json("#",{flat:!1}),m=JSON.stringify(g),h=i.data();n.ajax({async:!1,type:"POST",url:r.getURL(h),data:{data:m,csrf_token:h.csrfToken}}).done((function(){alert("Tree has been updated")}))}p&&window.UpdateFilter&&window.UpdateFilter(u,e),y&&s.val(JSON.stringify(l,null,2));var w=f.DataTable().$("input,select,textarea");w.hide();var _=n(e.currentTarget).closest("form");f.remove(),_.append(w)}))}var t,r,i;return t=e,(r=[{key:"getURL",value:function(e){if(window.test)return"";var t=window.siteConfig&&window.siteConfig.urls.treeApi;return t||"/".concat(e.layoutIdentifier,"/tree/").concat(e.columnId)}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()}}]);