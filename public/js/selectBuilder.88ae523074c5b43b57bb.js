"use strict";(self.webpackChunklinkspace=self.webpackChunklinkspace||[]).push([[776],{73538:(t,e,i)=>{i.r(e),i.d(e,{default:()=>r});var s=i(17527),a=i(56197),n=i(74692);const o="select__placeholder",l="select__menu-item--active",d="select__menu-item--hover";class h extends s.uA{constructor(t){super(t),this.el=n(this.element),this.toggleButton=this.el.find(".select__toggle"),this.input=this.el.find("input"),this.menu=this.el.find(".select__menu"),this.options=this.el.find(".select__menu-item"),this.optionChecked="",this.optionHoveredIndex=-1,this.optionsCount=this.options.length,this.isSelectReveal=this.el.hasClass("select--reveal"),this.initSelect(this.el),this.el.hasClass("select--required")&&(0,a.pT)(this.el)}static self=this;initSelect(){this.options&&(this.options.on("click",(t=>{this.handleClick(t)})),this.input.on("change",(t=>{this.handleChange(t)})),this.el.on("show.bs.dropdown",(()=>{this.handleOpen()})),this.input.val()&&this.input.trigger("change"))}addOption(t,e){const i=document.createElement("li");i.classList.add("select__menu-item"),i.setAttribute("role","option"),i.setAttribute("aria-selected","false"),i.setAttribute("data-id",t),i.setAttribute("data-value",e),i.innerHTML=t,this.menu.append(i),this.bindOptionHandler(i),this.options=this.el.find(".select__menu-item")}removeOption(t){this.options.each(((e,i)=>{parseInt(i.dataset.value)===t&&i.remove()}))}updateOption(t,e){this.options.each(((i,s)=>{parseInt(s.dataset.value)===e&&(s.setAttribute("data-id",t),s.innerHTML=t)}))}bindOptionHandler(t){n(t).on("click",(t=>{this.handleClick(t)}))}handleOpen(){this.el.on("keydown",(t=>{this.supportKeyboardNavigation(t)}))}handleClose(t){this.el.dropdown("hide"),t.stopPropagation(),this.el.off("keydown")}handleChange(t){const e=n(t.target).val();""===e?this.resetSelect():this.options.each(((t,i)=>{n(i).data("value").toString()===e&&(this.updateChecked(n(i)),this.isSelectReveal&&this.revealInstance(n(i)))}))}handleClick(t){const e=n(t.target),i=e.data("value"),s=e.data("reveal_id");this.input.val(i).trigger("change"),void 0!==s&&this.input.attr("data-reveal_id",s),this.updateChecked(n(e)),this.isSelectReveal&&this.revealInstance(n(e)),this.toggleButton.trigger("focus")}revealInstance(t){const e=n(`.select-reveal--${this.input.attr("id")} > .select-reveal__instance`);let i="";i=void 0!==t.data("reveal_id")?`#${this.input.attr("id")}_${t.data("reveal_id")}`:`#${this.input.attr("id")}_${t.data("value")}`,e.each(((t,e)=>{n(e).hide(),this.disableFields(e,!0)})),n(i).show(),this.disableFields(n(i),!1)}disableFields(t,e){const i=n(t).find("input, textarea");e?i.prop("disabled",!0):i.removeAttr("disabled")}updateHovered(t){const e=this.options[this.optionHoveredIndex],i=this.options[t];e&&e.classList.remove(d),i&&i.classList.add(d),this.optionHoveredIndex=t}updateChecked(t){const e=n(t).data("value"),i=n(t).html();this.toggleButton.find("span").html(i),this.toggleButton.find("span").removeClass(o),this.options.removeClass(l),this.options.attr("aria-selected",!1),n(t).addClass(l),n(t).attr("aria-selected",!0),this.optionChecked=e}supportKeyboardNavigation(t){if(40===t.keyCode&&this.optionHoveredIndex<this.optionsCount-1&&(t.preventDefault(),this.updateHovered(this.optionHoveredIndex+1)),38===t.keyCode&&this.optionHoveredIndex>0&&(t.preventDefault(),this.updateHovered(this.optionHoveredIndex-1)),13===t.keyCode||32===t.keyCode){t.preventDefault();const e=this.options[this.optionHoveredIndex],i=e&&n(e).data("value");i&&this.input.val(i).trigger("change"),this.handleClose(t)}27===t.keyCode&&this.handleClose(t)}resetSelect(){const t=this.input[0].placeholder;this.toggleButton.find("span").html(t),this.toggleButton.find("span").addClass(o),this.options.removeClass(l),this.options.attr("aria-selected",!1),this.input.removeAttr("value"),this.input.removeAttr("data-restore-value")}}const r=h}}]);