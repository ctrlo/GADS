"use strict";(self.webpackChunklinkspace=self.webpackChunklinkspace||[]).push([[776],{73538:(e,t,i)=>{i.r(t),i.d(t,{default:()=>h});var s=i(17527),n=i(56197),a=i(74692);const o="select__placeholder",l="select__menu-item--active",d="select__menu-item--hover";class SelectComponent extends s.uA{constructor(e){super(e),this.el=a(this.element),this.toggleButton=this.el.find(".select__toggle"),this.input=this.el.find("input"),this.menu=this.el.find(".select__menu"),this.options=this.el.find(".select__menu-item"),this.optionChecked="",this.optionHoveredIndex=-1,this.optionsCount=this.options.length,this.isSelectReveal=this.el.hasClass("select--reveal"),this.initSelect(this.el),this.el.hasClass("select--required")&&(0,n.pT)(this.el)}static self=this;initSelect(){this.options&&(this.options.on("click",(e=>{this.handleClick(e)})),this.input.on("change",(e=>{this.handleChange(e)})),this.el.on("show.bs.dropdown",(()=>{this.handleOpen()})),this.input.val()&&this.input.trigger("change"))}addOption(e,t){const i=document.createElement("li");i.classList.add("select__menu-item"),i.setAttribute("role","option"),i.setAttribute("aria-selected","false"),i.setAttribute("data-id",e),i.setAttribute("data-value",t),i.innerHTML=e,this.menu.append(i),this.bindOptionHandler(i),this.options=this.el.find(".select__menu-item")}removeOption(e){this.options.each(((t,i)=>{parseInt(i.dataset.value)===e&&i.remove()}))}updateOption(e,t){this.options.each(((i,s)=>{parseInt(s.dataset.value)===t&&(s.setAttribute("data-id",e),s.innerHTML=e)}))}bindOptionHandler(e){a(e).on("click",(e=>{this.handleClick(e)}))}handleOpen(){this.el.on("keydown",(e=>{this.supportKeyboardNavigation(e)}))}handleClose(e){this.el.dropdown("hide"),e.stopPropagation(),this.el.off("keydown")}handleChange(e){const t=a(e.target).val();""===t?this.resetSelect():this.options.each(((e,i)=>{a(i).data("value").toString()===t&&(this.updateChecked(a(i)),this.isSelectReveal&&this.revealInstance(a(i)))}))}handleClick(e){const t=a(e.target),i=t.data("value"),s=t.data("reveal_id");this.input.val(i).trigger("change"),void 0!==s&&this.input.attr("data-reveal_id",s),this.updateChecked(a(t)),this.isSelectReveal&&this.revealInstance(a(t)),this.toggleButton.trigger("focus")}revealInstance(e){const t=a(`.select-reveal--${this.input.attr("id")} > .select-reveal__instance`);let i="";i=void 0!==e.data("reveal_id")?`#${this.input.attr("id")}_${e.data("reveal_id")}`:`#${this.input.attr("id")}_${e.data("value")}`,t.each(((e,t)=>{a(t).hide(),this.disableFields(t,!0)})),a(i).show(),this.disableFields(a(i),!1)}disableFields(e,t){const i=a(e).find("input, textarea");t?i.prop("disabled",!0):i.removeAttr("disabled")}updateHovered(e){const t=this.options[this.optionHoveredIndex],i=this.options[e];t&&t.classList.remove(d),i&&i.classList.add(d),this.optionHoveredIndex=e}updateChecked(e){const t=a(e).data("value"),i=a(e).html();this.toggleButton.find("span").html(i),this.toggleButton.find("span").removeClass(o),this.options.removeClass(l),this.options.attr("aria-selected",!1),a(e).addClass(l),a(e).attr("aria-selected",!0),this.optionChecked=t}supportKeyboardNavigation(e){if(40===e.keyCode&&this.optionHoveredIndex<this.optionsCount-1&&(e.preventDefault(),this.updateHovered(this.optionHoveredIndex+1)),38===e.keyCode&&this.optionHoveredIndex>0&&(e.preventDefault(),this.updateHovered(this.optionHoveredIndex-1)),13===e.keyCode||32===e.keyCode){e.preventDefault();const t=this.options[this.optionHoveredIndex],i=t&&a(t).data("value");i&&this.input.val(i).trigger("change"),this.handleClose(e)}27===e.keyCode&&this.handleClose(e)}resetSelect(){const e=this.input[0].placeholder;this.toggleButton.find("span").html(e),this.toggleButton.find("span").addClass(o),this.options.removeClass(l),this.options.attr("aria-selected",!1),this.input.removeAttr("value"),this.input.removeAttr("data-restore-value")}}const h=SelectComponent}}]);