"use strict";(self.webpackChunklinkspace=self.webpackChunklinkspace||[]).push([[582,845,384],{66223:(t,e,n)=>{n.r(e),n.d(e,{addRow:()=>r,clearTable:()=>a,getRowOrder:()=>c,transferRowToTable:()=>s,updateRow:()=>o});n(25728),n(60228),n(32320);var i=n(19755),r=function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]?l(t,e):e.DataTable().row.add(t).draw()},o=function(t,e,n){e.find("tbody > tr").each((function(r,o){i(o).has("button[data-tempid=".concat(n,"]")).length&&e.DataTable().row(r).data(t).draw()}))},a=function(t){t.DataTable().clear().draw()},l=function(t,e){var n=e.DataTable();n.row.add(t).draw("page");for(var i=n.data().length-1,r=n.row(i),o=c(r),a=i;a>0;a--){var l=(r=n.row(a)).data(),s=n.row(a-1);if(c(s)<o)break;n.row(a).data(s.data()),n.row(a-1).data(l)}n.page(n.page()).draw(!1)},c=function(t){try{var e=i(t.node()).find("input").first().data("order");return void 0===e?-1:parseInt(e)}catch(t){return-1}},s=function(t,e,n){if(void 0!==e){var o=i(e),a=t.find("input").first();if(0===a.length&&console.error("Failed to move row from table '".concat(e,"'; missing checkbox input element")),a.attr("checked",!a.prop("checked")),void 0!==n){var l=i(n),s=o.DataTable().row(t),u=c(s)>-1;u||console.warn("Failed to move row to correct position in '".concat(n,"'; missing data-order attribute in checkbox input element")),s.invalidate(),r(s.data(),l,u),s.remove().draw("page")}else console.error("Failed to move row; missing 'transfer-destination' data attribute for table '".concat(e,"'"))}else console.error("Failed to move row; missing sourceTableID")}},86367:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});n(88052),n(76034),n(30050),n(84254),n(752),n(21694),n(76265),n(25728),n(60228),n(32320),n(12826),n(34338),n(69373),n(59903),n(59749),n(86544),n(79288);var i=n(53865),r=n(22092),o=n(19755);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,d(i.key),i)}}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=u(t);if(e){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function d(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}var f,p,h,v="select__placeholder",b="select__menu-item--active",y="select__menu-item--hover",m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(u,t);var e,n,i,a=s(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=a.call(this,t)).el=o(e.element),e.toggleButton=e.el.find(".select__toggle"),e.input=e.el.find("input"),e.menu=e.el.find(".select__menu"),e.options=e.el.find(".select__menu-item"),e.optionChecked="",e.optionHoveredIndex=-1,e.optionsCount=e.options.length,e.isSelectReveal=e.el.hasClass("select--reveal"),e.initSelect(e.el),e.el.hasClass("select--required")&&(0,r.Kg)(e.el),e}return e=u,(n=[{key:"initSelect",value:function(){var t=this;this.options&&(this.options.on("click",(function(e){t.handleClick(e)})),this.input.on("change",(function(e){t.handleChange(e)})),this.el.on("show.bs.dropdown",(function(){t.handleOpen()})),this.input.val()&&this.input.trigger("change"))}},{key:"addOption",value:function(t,e){var n=document.createElement("li");n.classList.add("select__menu-item"),n.setAttribute("role","option"),n.setAttribute("aria-selected","false"),n.setAttribute("data-id",t),n.setAttribute("data-value",e),n.innerHTML=t,this.menu.append(n),this.bindOptionHandler(n),this.options=this.el.find(".select__menu-item")}},{key:"removeOption",value:function(t){this.options.each((function(e,n){parseInt(n.dataset.value)===t&&n.remove()}))}},{key:"updateOption",value:function(t,e){this.options.each((function(n,i){parseInt(i.dataset.value)===e&&(i.setAttribute("data-id",t),i.innerHTML=t)}))}},{key:"bindOptionHandler",value:function(t){var e=this;o(t).on("click",(function(t){e.handleClick(t)}))}},{key:"handleOpen",value:function(){var t=this;this.el.on("keydown",(function(e){t.supportKeyboardNavigation(e)}))}},{key:"handleClose",value:function(t){this.el.dropdown("hide"),t.stopPropagation(),this.el.off("keydown")}},{key:"handleChange",value:function(t){var e=this,n=o(t.target).val();""===n?this.resetSelect():this.options.each((function(t,i){o(i).data("value").toString()===n&&(e.updateChecked(o(i)),e.isSelectReveal&&e.revealInstance(o(i)))}))}},{key:"handleClick",value:function(t){var e=o(t.target),n=e.data("value"),i=e.data("reveal_id");this.input.val(n).trigger("change"),void 0!==i&&this.input.attr("data-reveal_id",i),this.updateChecked(o(e)),this.isSelectReveal&&this.revealInstance(o(e)),this.toggleButton.trigger("focus")}},{key:"revealInstance",value:function(t){var e=this,n=o(".select-reveal--".concat(this.input.attr("id")," > .select-reveal__instance")),i="";i=void 0!==t.data("reveal_id")?"#".concat(this.input.attr("id"),"_").concat(t.data("reveal_id")):"#".concat(this.input.attr("id"),"_").concat(t.data("value")),n.each((function(t,n){o(n).hide(),e.disableFields(n,!0)})),o(i).show(),this.disableFields(o(i),!1)}},{key:"disableFields",value:function(t,e){var n=o(t).find("input, textarea");e?n.prop("disabled",!0):n.removeAttr("disabled")}},{key:"updateHovered",value:function(t){var e=this.options[this.optionHoveredIndex],n=this.options[t];e&&e.classList.remove(y),n&&n.classList.add(y),this.optionHoveredIndex=t}},{key:"updateChecked",value:function(t){var e=o(t).data("value"),n=o(t).html();this.toggleButton.find("span").html(n),this.toggleButton.find("span").removeClass(v),this.options.removeClass(b),this.options.attr("aria-selected",!1),o(t).addClass(b),o(t).attr("aria-selected",!0),this.optionChecked=e}},{key:"supportKeyboardNavigation",value:function(t){if(40===t.keyCode&&this.optionHoveredIndex<this.optionsCount-1&&(t.preventDefault(),this.updateHovered(this.optionHoveredIndex+1)),38===t.keyCode&&this.optionHoveredIndex>0&&(t.preventDefault(),this.updateHovered(this.optionHoveredIndex-1)),13===t.keyCode||32===t.keyCode){t.preventDefault();var e=this.options[this.optionHoveredIndex],n=e&&o(e).data("value");n&&this.input.val(n).trigger("change"),this.handleClose(t)}27===t.keyCode&&this.handleClose(t)}},{key:"resetSelect",value:function(){var t=this.input[0].placeholder;this.toggleButton.find("span").html(t),this.toggleButton.find("span").addClass(v),this.options.removeClass(b),this.options.attr("aria-selected",!1),this.input.removeAttr("value"),this.input.removeAttr("data-restore-value")}}])&&l(e.prototype,n),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1}),u}(i.wA);f=m,h=m,(p=d(p="self"))in f?Object.defineProperty(f,p,{value:h,enumerable:!0,configurable:!0,writable:!0}):f[p]=h;const g=m},65568:(t,e,n)=>{n.r(e),n.d(e,{default:()=>b});n(25728),n(60228),n(32320),n(69358),n(34284),n(34338),n(59749),n(86544),n(36585),n(47522),n(38077),n(48324),n(28436),n(88052),n(76034),n(30050),n(32349),n(81919),n(69373),n(59903),n(79288),n(84254),n(752),n(21694),n(76265),n(89730),n(12826),n(77049),n(64043),n(7409);var i=n(38042),r=n(66223),o=n(79475),a=n(86367),l=n(19755);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(l.push(i.value),l.length!==e);c=!0);}catch(t){s=!0,r=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw r}}return l}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function d(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==c(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===c(o)?o:String(o)),i)}var r,o}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},f.apply(this,arguments)}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=v(t);if(e){var r=v(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}const b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(u,t);var e,n,i,c=h(u);function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this,t)).el=l(e.element),e.json={},e.fieldOptions=e.el.find(".modal-body .field-options"),e.topicsTable=e.el.find("#topics"),e.fieldsTable=e.el.find("#fields"),e.selectTopic=e.el.find(".modal-body .select--js-topic")[0],e.selectTopicComponent=new a.default(e.selectTopic),e.currentFieldObject={},e.currentTopicObject={},e.initNewTable(e.el),e}return e=u,(n=[{key:"initNewTable",value:function(){var t=this.el.find(".modal-body .btn-js-create-topic"),e=this.el.find(".modal-body .btn-js-create-field");t.on("click",(function(){o.o.activate(4,!0)})),e.on("click",(function(){o.o.activate(7,!0)})),this.fieldOptions.addClass("hidden"),this.setupDataObject()}},{key:"setupDataObject",value:function(){this.json={table_permissions:[],topics:[],fields:[]}}},{key:"addFieldsToObject",value:function(t,e){return t.each((function(t,n){l(n).val()&&("checkbox"==l(n).prop("type")?l(n).prop("checked")?e[l(n).attr("name")]=!0:e[l(n).attr("name")]=!1:"topic_tempid"===l(n).attr("name")?e[l(n).attr("name")]=parseInt(l(n).val()):e[l(n).attr("name")]=l(n).val())})),e}},{key:"addTopic",value:function(t){var e=this,n=t.find("input, textarea");if(0===Object.keys(this.currentTopicObject).length){var i={tempId:this.uniqueID()};i=this.addFieldsToObject(n,i),this.currentTopicObject=i,this.json.topics.push(i),this.selectTopicComponent.addOption(i.name,i.tempId);var o=['<button class="btn btn-link btn-js-edit-topic" type="button" data-tempid="'.concat(i.tempId,'">').concat(i.name,"</button>"),i.description||"",i.expanded,""];r.addRow(o,this.topicsTable),this.addHandlerToEditItemButton("topic")}else{var a=this.json.topics.find((function(t){return t.tempId===e.currentTopicObject.tempId}));n.each((function(t,e){l(e).val()&&(a[l(e).attr("name")]=l(e).val())}));var c=['<button class="btn btn-link btn-js-edit-topic" type="button" data-tempid="'.concat(this.currentTopicObject.tempId,'">').concat(this.currentTopicObject.name,"</button>"),this.currentTopicObject.description||"",this.currentTopicObject.expanded,""];r.updateRow(c,this.topicsTable,this.currentTopicObject.tempId),this.selectTopicComponent.updateOption(this.currentTopicObject.name,this.currentTopicObject.tempId),this.addHandlerToEditItemButton("topic")}}},{key:"fillFields",value:function(t,e){for(var n=0,i=Object.entries(e);n<i.length;n++){var r=s(i[n],2),o=r[0],a=r[1],l=t.find("[name=".concat(o,"]"));l&&("checkbox"===l.prop("type")&&!0===a?l.prop("checked",!0):"hidden"===l.prop("type")?(l.val(a),l.trigger("change")):(l.val(a),l.trigger("blur")))}}},{key:"editTopic",value:function(t,e){this.currentTopicObject=t,this.fillFields(l(e),t)}},{key:"editField",value:function(t,e){var n=this;this.currentFieldObject=t,o.o.clear([8,9]),this.fillFields(l(e),t);var i=t.field_type,r=f(v(u.prototype),"getFrameByNumber",this).call(this,8),a=l(r).find("[id=field_type_".concat(i,"]"));this.fillFields(a,t.field_type_settings);var c=t.custom_field_permissions,s=f(v(u.prototype),"getFrameByNumber",this).call(this,9);c.forEach((function(t){var e=t.group_id,i=l(s).find("tr[data-group-id=".concat(e,"]"));n.fillFields(i,t.permissions)}))}},{key:"removeNode",value:function(t,e){return e.filter((function(e){return e.tempId!==t}))}},{key:"addHandlerToEditItemButton",value:function(t){var e=this.el.find(".modal-body .btn-js-edit-".concat(t));e.off("click");var n="topic"===t?4:7;e.each((function(t,e){var i=l(e).data("tempid");l(e).on("click",(function(){o.o.activate(n,!0,i)}))}))}},{key:"uniqueID",value:function(){return Math.floor(Math.random()*Date.now())}},{key:"addField",value:function(t){var e=this,n=t.find("input, textarea");if(0===Object.keys(this.currentFieldObject).length){var i={tempId:this.uniqueID(),custom_field_permissions:[],field_type_settings:{}};i=this.addFieldsToObject(n,i),this.currentFieldObject=i,this.json.fields.push(i);var o=['<button class="btn btn-link btn-js-edit-field" type="button" data-tempid="'.concat(i.tempId,'">').concat(i.name,"</button>"),i.name,i.topic||"",i["field-type"],""];r.addRow(o,this.fieldsTable),this.addHandlerToEditItemButton("field")}else{var a=this.json.fields.find((function(t){return t.tempId===e.currentFieldObject.tempId}));n.each((function(t,e){l(e).val()&&(a[l(e).attr("name")]=l(e).val())}));var c=['<button class="btn btn-link btn-js-edit-field" type="button" data-tempid="'.concat(this.currentFieldObject.tempId,'">').concat(this.currentFieldObject.name,"</button>"),this.currentFieldObject.name,this.currentFieldObject.topic||"",this.currentFieldObject["field-type"],""];r.updateRow(c,this.fieldsTable,this.currentFieldObject.tempId),this.addHandlerToEditItemButton("field")}}},{key:"addFieldTypeSettings",value:function(t){var e=this,n=t.find("[id^=field_type_].select-reveal__instance:visible"),i=n.find("input, textarea"),r=this.json.fields.find((function(t){return t.tempId===e.currentFieldObject.tempId}));switch(n.attr("id")){case"field_type_enum":var o=n.find('input[name="ordering"]'),a=n.find(".sortable input"),c={dropdown_values:[],ordering:o.val()};a.each((function(t,e){var n={};n[l(e).attr("name")]=l(e).val(),c.dropdown_values.push(n)})),r.field_type_settings=c;break;case"field_type_tree":var s=n.find(".tree-widget-container"),u={data:{},dataJson:{}};if(s.length){var d=s.jstree(!0).get_json("#",{flat:!1}),f=(JSON.stringify(d),s.data().jstree._model.data);u.data=f,u.dataJson=d}u=this.addFieldsToObject(i,u),r.field_type_settings=u;break;case"field_type_curval":var p=n.find('input[name="curval_field_ids"]:visible'),h=n.find('input:not([name="curval_field_ids"]), textarea'),v={curval_field_ids:[]};p.each((function(t,e){l(e).val()&&v.curval_field_ids.push(l(e).val())})),v=this.addFieldsToObject(h,v),r.field_type_settings=v;break;default:var b={};b=this.addFieldsToObject(i,b),r.field_type_settings=b}}},{key:"addTable",value:function(t){var e=this,n=t.find("input, textarea"),i=this.el.find(".modal-title");n.each((function(t,n){l(n).val()&&(e.json[l(n).attr("name")]=l(n).val())})),this.json.name&&i.html("Table setup | ".concat(this.json.name))}},{key:"addCustomFieldPermissions",value:function(t){var e=this,n=t.find("#custom_field_permissions_table").DataTable().rows(),i=this.json.fields.find((function(t){return t.tempId===e.currentFieldObject.tempId}));i.custom_field_permissions=[],n.every((function(){var t=e.nodes()[0],n=t.dataset.groupId,r=l(t).find("td")[0].innerHTML.trim(),o=l(t).find("input"),a={group_id:n,group_name:r,permissions:{}};a.permissions=e.addFieldsToObject(o,a.permissions),i.custom_field_permissions.push(a)}))}},{key:"addTablePermissions",value:function(t){var e=this;t.find(".card--expandable").each((function(t,n){var i=l(n).closest(".permission-group"),r=i&&void 0!==i.data("group-id")?i.data("group-id"):"",o=l(n).find(".card__subtitle")[0].innerHTML.trim(),a=l(n).find("fieldset"),c={group_id:r,group_name:o,records:{},views:{},fields:{}};a.each((function(t,n){var i=l(n).data("name"),r=l(n).find("input");c[i]=e.addFieldsToObject(r,c[i])})),e.json.table_permissions.push(c)}))}},{key:"handleNext",value:function(t){switch(f(v(u.prototype),"handleNext",this).call(this),t.data("config").item){case"topic":this.addTopic(t);break;case"field":this.addField(t);break;case"field type settings":this.addFieldTypeSettings(t),this.recalculateDatatableColumnWidths(l("#custom_field_permissions_table"));break;case"custom field permissions":this.addCustomFieldPermissions(t);break;case"table":this.addTable(t);break;case"table permissions":this.addTablePermissions(t);break;default:var e=t.find("input, textarea");this.addFieldsToObject(e,this.json)}}},{key:"recalculateDatatableColumnWidths",value:function(t){t.DataTable().columns.adjust()}},{key:"handleBack",value:function(){f(v(u.prototype),"handleBack",this).call(this)}},{key:"handleSave",value:function(){o.o.upload(this.json)}},{key:"handleUpdate",value:function(t){"topic"===t.data("config").item?(this.addTopic(t),this.currentTopicObject={}):"field"===t.data("config").item&&(this.addField(t),this.currentFieldObject={})}},{key:"handleActivate",value:function(t,e,n){if(f(v(u.prototype),"handleActivate",this).call(this,t,e),7===t&&n){var i=f(v(u.prototype),"getFrameByNumber",this).call(this,t),r=this.json.fields.find((function(t){return t.tempId===n}));this.editField(r,i)}else if(7===t&&e)this.currentFieldObject={},o.o.clear([8,9]);else if(4===t&&n){var a=f(v(u.prototype),"getFrameByNumber",this).call(this,t),l=this.json.topics.find((function(t){return t.tempId===n}));this.editTopic(l,a)}else 4===t&&e&&(this.currentTopicObject={});f(v(u.prototype),"validateFrame",this).call(this)}},{key:"handleClose",value:function(){var t=this;this.el.find(".collapse").collapse("hide"),this.topicsTable&&r.clearTable(this.topicsTable),this.fieldsTable&&r.clearTable(this.fieldsTable),this.selectTopicComponent.options.each((function(e,n){t.selectTopicComponent.removeOption(parseInt(n.dataset.value))})),this.setupDataObject(),this.currentFieldObject={},this.currentTopicObject={},f(v(u.prototype),"handleClose",this).call(this)}}])&&d(e.prototype,n),i&&d(e,i),Object.defineProperty(e,"prototype",{writable:!1}),u}(i.Z)},69277:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});n(25728),n(60228),n(32320),n(88052),n(76034),n(30050),n(32349),n(81919),n(69373),n(59903),n(59749),n(86544),n(79288),n(84254),n(752),n(21694),n(76265);var i=n(79475),r=n(38042),o=n(19755);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,o=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===a(o)?o:String(o)),i)}var r,o}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},c.apply(this,arguments)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=d(t);if(e){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}const f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(f,t);var e,n,r,a=u(f);function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=a.call(this,t)).el=o(e.element),e.emailField=e.el.find('input[name="email"]'),e.emailText=e.el.find(".js-email"),e.initUserModal(),e}return e=f,(n=[{key:"initUserModal",value:function(){var t=this;this.el.on("show.bs.modal",(function(e){t.toggleContent(e),i.o.validate(),t.updateEmail(),t.emailField.keyup((function(){t.updateEmail()}))}))}},{key:"toggleContent",value:function(t){o(t.relatedTarget).hasClass("btn-add")?(i.o.clear(),this.el.find(".js-approve-account").hide(),this.el.find(".js-add-user").show(),this.el.find(".btn-js-reject-request").hide(),this.el.find(".btn-js-save .btn__title").html("Create account"),this.el.find('input[name="approve-account"]').val("false")):(this.el.find(".js-add-user").hide(),this.el.find(".js-approve-account").show(),this.el.find(".btn-js-reject-request").show(),this.el.find(".btn-js-save .btn__title").html("Approve account"),this.el.find('input[name="approve-account"]').val("true"))}},{key:"updateEmail",value:function(){this.emailText.html(this.emailField.val())}},{key:"getData",value:function(){var t=this,e={view_limits:[],permissions:[],groups:[]};return this.el.find("input, textarea").each((function(n,i){if("radio"===o(i).prop("type")||"checkbox"===o(i).prop("type")){if(o(i).prop("checked")){var r=isNaN(o(i).val())?o(i).val():parseInt(o(i).val());Array.isArray(e[o(i).attr("name")])?e[o(i).attr("name")].push(r):e[o(i).attr("name")]=r}}else if(""!==o(i).val()){var a=o(i).val(),l=isNaN(a)?t.parseValue(a):parseInt(a);Array.isArray(e[o(i).attr("name")])?e[o(i).attr("name")].push(l):e[o(i).attr("name")]=l}})),e}},{key:"parseValue",value:function(t){return"true"===t||"false"!==t&&t}},{key:"handleSave",value:function(){i.o.upload(this.getData())}},{key:"handleClose",value:function(){c(d(f.prototype),"handleClose",this).call(this),this.emailText.html("USER")}}])&&l(e.prototype,n),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),f}(r.Z)},76251:(t,e,n)=>{var i=n(36812);t.exports=function(t){return void 0!==t&&(i(t,"value")||i(t,"writable"))}},81919:(t,e,n)=>{var i=n(79989),r=n(3689),o=n(65290),a=n(82474).f,l=n(67697);i({target:"Object",stat:!0,forced:!l||r((function(){a(1)})),sham:!l},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},32349:(t,e,n)=>{var i=n(79989),r=n(22615),o=n(48999),a=n(85027),l=n(76251),c=n(82474),s=n(61868);i({target:"Reflect",stat:!0},{get:function t(e,n){var i,u,d=arguments.length<3?e:arguments[2];return a(e)===d?e[n]:(i=c.f(e,n))?l(i)?i.value:void 0===i.get?void 0:r(i.get,d):o(u=s(e))?t(u,n,d):void 0}})}}]);