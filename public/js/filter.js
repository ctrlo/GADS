(self.webpackChunklinkspace=self.webpackChunklinkspace||[]).push([[165],{50403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});r(92222),r(69826),r(41539),r(21249),r(54747),r(57327),r(38862),r(26699),r(96649),r(96078),r(82526),r(41817),r(9653),r(30489),r(81299),r(12419),r(47941),r(38880),r(49337),r(32165),r(66992),r(78783),r(33948);var n=r(53865),a=(r(96855),r(69373),r(60387)),o=r(19755),i=r(48764).lW;function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var a=y(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,r)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function d(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(y,e);var t,r,n,u=s(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),d(f(t=u.call(this,e)),"buildFilter",(function(e,r){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:r.filterId,label:r.label,type:"string",operators:t.buildFilterOperators(r.type)},"rag"===r.type?t.ragProperties:r.hasFilterTypeahead?t.typeaheadProperties(r.urlSuffix,e.layoutId,r.instanceId,r.useIdInFilter):{})})),d(f(t),"typeaheadProperties",(function(e,t,r,n){return{input:function(e,t){return"<div class='typeahead__container'>\n          <input class='form-control typeahead_text' type='text' name='".concat(t,"_text'/>\n          <input class='form-control typeahead_hidden' type='hidden' name='").concat(t,"'/>\n        </div>")},valueSetter:function(e,t){e.$el.find(".typeahead_hidden").val(t),e.$el.find(".typeahead_text").val(e.data.text)},validation:{callback:function(){return!0}}}})),d(f(t),"getRecords",(function(e,r,n,a){return o.ajax({type:"GET",url:t.getURL(e,r),data:{q:a,oi:n},dataType:"json",path:"records"})})),t.el=o(t.element),t.operators=[{type:"equal",accept_values:!0,apply_to:["string","number","datetime"]},{type:"not_equal",accept_values:!0,apply_to:["string","number","datetime"]},{type:"less",accept_values:!0,apply_to:["string","number","datetime"]},{type:"less_or_equal",accept_values:!0,apply_to:["string","number","datetime"]},{type:"greater",accept_values:!0,apply_to:["string","number","datetime"]},{type:"greater_or_equal",accept_values:!0,apply_to:["string","number","datetime"]},{type:"contains",accept_values:!0,apply_to:["datetime","string"]},{type:"not_contains",accept_values:!0,apply_to:["datetime","string"]},{type:"begins_with",accept_values:!0,apply_to:["string"]},{type:"not_begins_with",accept_values:!0,apply_to:["string"]},{type:"is_empty",accept_values:!1,apply_to:["string","number","datetime"]},{type:"is_not_empty",accept_values:!1,apply_to:["string","number","datetime"]},{type:"changed_after",nb_inputs:1,accept_values:!0,multiple:!1,apply_to:["string","number","datetime"]}],t.ragProperties={input:"select",values:{b_red:"Red",c_amber:"Amber",c_yellow:"Yellow",d_green:"Green",a_grey:"Grey",e_purple:"Purple"}},t.initFilter(),t}return t=y,(r=[{key:"initFilter",value:function(){var e=this,t=this,r=this.el,n=o(this.el).data("builder-id"),u=o("#builder_json_".concat(n));if(u.length){var l=JSON.parse(u.html()),c=r.data("filter-base");if(l.filters.length&&(l.filterNotDone&&this.makeUpdateFilter(),r.queryBuilder({showPreviousValues:l.showPreviousValues,filters:l.filters.map((function(t){return e.buildFilter(l,t)})),allow_empty:!0,operators:this.operators,lang:{operators:{changed_after:"changed on or after"}}}),r.on("validationError.queryBuilder",(function(e,t,r,n){a.P.log(r),a.P.log(n),a.P.log(e),a.P.log(t)})),r.on("afterCreateRuleInput.queryBuilder",(function(e,r){var n;if(l.filters.forEach((function(e){if(e.filterId===r.filter.id)return n=e,!1})),n&&"rag"!==n.type&&n.hasFilterTypeahead){var a=o("#".concat(r.id," .rule-value-container input[type='text']")),i=o("#".concat(r.id," .rule-value-container input[type='hidden']"));a.attr("autocomplete","off"),a.on("keyup",(function(){i.val(a.val())})),a.typeahead({delay:100,dynamic:!0,minLength:1,offset:!0,order:"asc",matcher:function(){return!0},callback:{onClickAfter:function(e,t,r,a){n.useIdInFilter?i.val(r.id):i.val(r.label),i.trigger("change")},onCancel:function(){i.val("")}},source:{record:{display:"label",ajax:function(e){return{type:"GET",url:t.getURL(l.layoutId,n.urlSuffix),data:{q:e,oi:n.instanceId},dataType:"json",path:"records"}}}}})}})),c)){var p=i.from(c,"base64");try{var s=JSON.parse(p);s.rules&&s.rules.length?r.queryBuilder("setRules",s):r.queryBuilder("setRules",{rules:[]})}catch(e){a.P.log("Incorrect data object passed to queryBuilder")}}}}},{key:"getURL",value:function(e,t){var r=window.siteConfig&&window.siteConfig.urls.filterApi;return r||"/".concat(e,"/match/layout/").concat(t)}},{key:"makeUpdateFilter",value:function(e){window.UpdateFilter=function(e){var t=e.queryBuilder("getRules");o("#filter").val(JSON.stringify(t,null,2))}}},{key:"buildFilterOperators",value:function(e){if(["date","daterange"].includes(e)){var t=["equal","not_equal","less","less_or_equal","greater","greater_or_equal","is_empty","is_not_empty"];return"daterange"===e&&t.push("contain"),t}}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),y}(n.wA)},49337:(e,t,r)=>{var n=r(82109),a=r(19781),o=r(53887),i=r(45656),u=r(31236),l=r(86135);n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){for(var t,r,n=i(e),a=u.f,c=o(n),p={},s=0;c.length>s;)void 0!==(r=a(n,t=c[s++]))&&l(p,t,r);return p}})},47941:(e,t,r)=>{var n=r(82109),a=r(47908),o=r(81956);n({target:"Object",stat:!0,forced:r(47293)((function(){o(1)}))},{keys:function(e){return o(a(e))}})}}]);