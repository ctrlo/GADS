!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.fengari=t():e.fengari=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=34)}([function(e,t,r){"use strict";
/**
@license MIT

Copyright Â© 2017-2018 Benoit Giannangeli
Copyright Â© 2017-2018 Daurnimator
Copyright Â© 1994â€“2017 Lua.org, PUC-Rio.
*/var n=r(5);e.exports.FENGARI_AUTHORS=n.FENGARI_AUTHORS,e.exports.FENGARI_COPYRIGHT=n.FENGARI_COPYRIGHT,e.exports.FENGARI_RELEASE=n.FENGARI_RELEASE,e.exports.FENGARI_VERSION=n.FENGARI_VERSION,e.exports.FENGARI_VERSION_MAJOR=n.FENGARI_VERSION_MAJOR,e.exports.FENGARI_VERSION_MINOR=n.FENGARI_VERSION_MINOR,e.exports.FENGARI_VERSION_NUM=n.FENGARI_VERSION_NUM,e.exports.FENGARI_VERSION_RELEASE=n.FENGARI_VERSION_RELEASE,e.exports.luastring_eq=n.luastring_eq,e.exports.luastring_indexOf=n.luastring_indexOf,e.exports.luastring_of=n.luastring_of,e.exports.to_jsstring=n.to_jsstring,e.exports.to_luastring=n.to_luastring,e.exports.to_uristring=n.to_uristring;var a=r(3),u=r(2),s=r(7),o=r(17);e.exports.luaconf=a,e.exports.lua=u,e.exports.lauxlib=s,e.exports.lualib=o},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var u,s,o;if(u="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){for(var t=0,r=e.length,n=new Uint8Array(r);r>t;)n[t]=e[t++];return n},"function"==typeof(new Uint8Array).indexOf)s=function(e,t,r){return e.indexOf(t,r)};else{var l=[].indexOf;if(0!==l.call(new Uint8Array(1),0))throw Error("missing .indexOf");s=function(e,t,r){return l.call(e,t,r)}}o="function"==typeof Uint8Array.of?Uint8Array.of.bind(Uint8Array):function(){return u(arguments)};var i=function(e){return e instanceof Uint8Array},c="cannot convert invalid utf8 to javascript string",f=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce((function(e,t){return e[t.charCodeAt(0)]=!0,e}),{}),_={},p=function(e,t){if("string"!=typeof e)throw new TypeError("to_luastring expects a javascript string");if(t){var r=_[e];if(i(r))return r}for(var n=e.length,a=Array(n),s=0,o=0;o<n;++o){var l=e.charCodeAt(o);if(l<=127)a[s++]=l;else if(l<=2047)a[s++]=192|l>>6,a[s++]=128|63&l;else{if(l>=55296&&l<=56319&&o+1<n){var c=e.charCodeAt(o+1);c>=56320&&c<=57343&&(o++,l=1024*(l-55296)+c+9216)}l<=65535?(a[s++]=224|l>>12,a[s++]=128|l>>6&63,a[s++]=128|63&l):(a[s++]=240|l>>18,a[s++]=128|l>>12&63,a[s++]=128|l>>6&63,a[s++]=128|63&l)}}return a=u(a),t&&(_[e]=a),a};e.exports.luastring_from=u,e.exports.luastring_indexOf=s,e.exports.luastring_of=o,e.exports.is_luastring=i,e.exports.luastring_eq=function(e,t){if(e!==t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1}return!0},e.exports.to_jsstring=function(e,t,r,n){if(!i(e))throw new TypeError("to_jsstring expects a Uint8Array");r=void 0===r?e.length:Math.min(e.length,r);for(var a="",u=void 0!==t?t:0;u<r;){var s=e[u++];if(s<128)a+=String.fromCharCode(s);else if(s<194||s>244){if(!n)throw RangeError(c);a+="ï¿½"}else if(s<=223){if(u>=r){if(!n)throw RangeError(c);a+="ï¿½";continue}var o=e[u++];if(128!=(192&o)){if(!n)throw RangeError(c);a+="ï¿½";continue}a+=String.fromCharCode(((31&s)<<6)+(63&o))}else if(s<=239){if(u+1>=r){if(!n)throw RangeError(c);a+="ï¿½";continue}var l=e[u++];if(128!=(192&l)){if(!n)throw RangeError(c);a+="ï¿½";continue}var f=e[u++];if(128!=(192&f)){if(!n)throw RangeError(c);a+="ï¿½";continue}var _=((15&s)<<12)+((63&l)<<6)+(63&f);if(_<=65535)a+=String.fromCharCode(_);else{var p=55296+((_-=65536)>>10),v=_%1024+56320;a+=String.fromCharCode(p,v)}}else{if(u+2>=r){if(!n)throw RangeError(c);a+="ï¿½";continue}var h=e[u++];if(128!=(192&h)){if(!n)throw RangeError(c);a+="ï¿½";continue}var d=e[u++];if(128!=(192&d)){if(!n)throw RangeError(c);a+="ï¿½";continue}var L=e[u++];if(128!=(192&L)){if(!n)throw RangeError(c);a+="ï¿½";continue}var A=((7&s)<<18)+((63&h)<<12)+((63&d)<<6)+(63&L),g=55296+((A-=65536)>>10),b=A%1024+56320;a+=String.fromCharCode(g,b)}}return a},e.exports.to_uristring=function(e){if(!i(e))throw new TypeError("to_uristring expects a Uint8Array");for(var t="",r=0;r<e.length;r++){var n=e[r];f[n]?t+=String.fromCharCode(n):t+="%"+(n<16?"0":"")+n.toString(16)}return t},e.exports.to_luastring=p,e.exports.from_userstring=function(e){if(!i(e)){if("string"!=typeof e)throw new TypeError("expects an array of bytes or javascript string");e=p(e)}return e};var v=p("Lua");e.exports.LUA_SIGNATURE=v,e.exports.LUA_VERSION_MAJOR="5",e.exports.LUA_VERSION_MINOR="3",e.exports.LUA_VERSION_NUM=503,e.exports.LUA_VERSION_RELEASE="4",e.exports.LUA_VERSION="Lua 5.3",e.exports.LUA_RELEASE="Lua 5.3.4",e.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",e.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes";var h={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};h.LUA_TSHRSTR=0|h.LUA_TSTRING,h.LUA_TLNGSTR=16|h.LUA_TSTRING,h.LUA_TNUMFLT=0|h.LUA_TNUMBER,h.LUA_TNUMINT=16|h.LUA_TNUMBER,h.LUA_TLCL=0|h.LUA_TFUNCTION,h.LUA_TLCF=16|h.LUA_TFUNCTION,h.LUA_TCCL=32|h.LUA_TFUNCTION;var d=-r(3).LUAI_MAXSTACK-1e3,L=a((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}));e.exports.LUA_HOOKCALL=0,e.exports.LUA_HOOKCOUNT=3,e.exports.LUA_HOOKLINE=2,e.exports.LUA_HOOKRET=1,e.exports.LUA_HOOKTAILCALL=4,e.exports.LUA_MASKCALL=1,e.exports.LUA_MASKCOUNT=8,e.exports.LUA_MASKLINE=4,e.exports.LUA_MASKRET=2,e.exports.LUA_MINSTACK=20,e.exports.LUA_MULTRET=-1,e.exports.LUA_OPADD=0,e.exports.LUA_OPBAND=7,e.exports.LUA_OPBNOT=13,e.exports.LUA_OPBOR=8,e.exports.LUA_OPBXOR=9,e.exports.LUA_OPDIV=5,e.exports.LUA_OPEQ=0,e.exports.LUA_OPIDIV=6,e.exports.LUA_OPLE=2,e.exports.LUA_OPLT=1,e.exports.LUA_OPMOD=3,e.exports.LUA_OPMUL=2,e.exports.LUA_OPPOW=4,e.exports.LUA_OPSHL=10,e.exports.LUA_OPSHR=11,e.exports.LUA_OPSUB=1,e.exports.LUA_OPUNM=12,e.exports.LUA_REGISTRYINDEX=d,e.exports.LUA_RIDX_GLOBALS=2,e.exports.LUA_RIDX_LAST=2,e.exports.LUA_RIDX_MAINTHREAD=1,e.exports.constant_types=h,e.exports.lua_Debug=L,e.exports.lua_upvalueindex=function(e){return d-e},e.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6}},function(e,t,r){"use strict";var n=r(1),a=r(19),u=r(11),s=r(8),o=r(12);e.exports.LUA_AUTHORS=n.LUA_AUTHORS,e.exports.LUA_COPYRIGHT=n.LUA_COPYRIGHT,e.exports.LUA_ERRERR=n.thread_status.LUA_ERRERR,e.exports.LUA_ERRGCMM=n.thread_status.LUA_ERRGCMM,e.exports.LUA_ERRMEM=n.thread_status.LUA_ERRMEM,e.exports.LUA_ERRRUN=n.thread_status.LUA_ERRRUN,e.exports.LUA_ERRSYNTAX=n.thread_status.LUA_ERRSYNTAX,e.exports.LUA_HOOKCALL=n.LUA_HOOKCALL,e.exports.LUA_HOOKCOUNT=n.LUA_HOOKCOUNT,e.exports.LUA_HOOKLINE=n.LUA_HOOKLINE,e.exports.LUA_HOOKRET=n.LUA_HOOKRET,e.exports.LUA_HOOKTAILCALL=n.LUA_HOOKTAILCALL,e.exports.LUA_MASKCALL=n.LUA_MASKCALL,e.exports.LUA_MASKCOUNT=n.LUA_MASKCOUNT,e.exports.LUA_MASKLINE=n.LUA_MASKLINE,e.exports.LUA_MASKRET=n.LUA_MASKRET,e.exports.LUA_MINSTACK=n.LUA_MINSTACK,e.exports.LUA_MULTRET=n.LUA_MULTRET,e.exports.LUA_NUMTAGS=n.constant_types.LUA_NUMTAGS,e.exports.LUA_OK=n.thread_status.LUA_OK,e.exports.LUA_OPADD=n.LUA_OPADD,e.exports.LUA_OPBAND=n.LUA_OPBAND,e.exports.LUA_OPBNOT=n.LUA_OPBNOT,e.exports.LUA_OPBOR=n.LUA_OPBOR,e.exports.LUA_OPBXOR=n.LUA_OPBXOR,e.exports.LUA_OPDIV=n.LUA_OPDIV,e.exports.LUA_OPEQ=n.LUA_OPEQ,e.exports.LUA_OPIDIV=n.LUA_OPIDIV,e.exports.LUA_OPLE=n.LUA_OPLE,e.exports.LUA_OPLT=n.LUA_OPLT,e.exports.LUA_OPMOD=n.LUA_OPMOD,e.exports.LUA_OPMUL=n.LUA_OPMUL,e.exports.LUA_OPPOW=n.LUA_OPPOW,e.exports.LUA_OPSHL=n.LUA_OPSHL,e.exports.LUA_OPSHR=n.LUA_OPSHR,e.exports.LUA_OPSUB=n.LUA_OPSUB,e.exports.LUA_OPUNM=n.LUA_OPUNM,e.exports.LUA_REGISTRYINDEX=n.LUA_REGISTRYINDEX,e.exports.LUA_RELEASE=n.LUA_RELEASE,e.exports.LUA_RIDX_GLOBALS=n.LUA_RIDX_GLOBALS,e.exports.LUA_RIDX_LAST=n.LUA_RIDX_LAST,e.exports.LUA_RIDX_MAINTHREAD=n.LUA_RIDX_MAINTHREAD,e.exports.LUA_SIGNATURE=n.LUA_SIGNATURE,e.exports.LUA_TNONE=n.constant_types.LUA_TNONE,e.exports.LUA_TNIL=n.constant_types.LUA_TNIL,e.exports.LUA_TBOOLEAN=n.constant_types.LUA_TBOOLEAN,e.exports.LUA_TLIGHTUSERDATA=n.constant_types.LUA_TLIGHTUSERDATA,e.exports.LUA_TNUMBER=n.constant_types.LUA_TNUMBER,e.exports.LUA_TSTRING=n.constant_types.LUA_TSTRING,e.exports.LUA_TTABLE=n.constant_types.LUA_TTABLE,e.exports.LUA_TFUNCTION=n.constant_types.LUA_TFUNCTION,e.exports.LUA_TUSERDATA=n.constant_types.LUA_TUSERDATA,e.exports.LUA_TTHREAD=n.constant_types.LUA_TTHREAD,e.exports.LUA_VERSION=n.LUA_VERSION,e.exports.LUA_VERSION_MAJOR=n.LUA_VERSION_MAJOR,e.exports.LUA_VERSION_MINOR=n.LUA_VERSION_MINOR,e.exports.LUA_VERSION_NUM=n.LUA_VERSION_NUM,e.exports.LUA_VERSION_RELEASE=n.LUA_VERSION_RELEASE,e.exports.LUA_YIELD=n.thread_status.LUA_YIELD,e.exports.lua_Debug=n.lua_Debug,e.exports.lua_upvalueindex=n.lua_upvalueindex,e.exports.lua_absindex=a.lua_absindex,e.exports.lua_arith=a.lua_arith,e.exports.lua_atpanic=a.lua_atpanic,e.exports.lua_atnativeerror=a.lua_atnativeerror,e.exports.lua_call=a.lua_call,e.exports.lua_callk=a.lua_callk,e.exports.lua_checkstack=a.lua_checkstack,e.exports.lua_close=o.lua_close,e.exports.lua_compare=a.lua_compare,e.exports.lua_concat=a.lua_concat,e.exports.lua_copy=a.lua_copy,e.exports.lua_createtable=a.lua_createtable,e.exports.lua_dump=a.lua_dump,e.exports.lua_error=a.lua_error,e.exports.lua_gc=a.lua_gc,e.exports.lua_getallocf=a.lua_getallocf,e.exports.lua_getextraspace=a.lua_getextraspace,e.exports.lua_getfield=a.lua_getfield,e.exports.lua_getglobal=a.lua_getglobal,e.exports.lua_gethook=u.lua_gethook,e.exports.lua_gethookcount=u.lua_gethookcount,e.exports.lua_gethookmask=u.lua_gethookmask,e.exports.lua_geti=a.lua_geti,e.exports.lua_getinfo=u.lua_getinfo,e.exports.lua_getlocal=u.lua_getlocal,e.exports.lua_getmetatable=a.lua_getmetatable,e.exports.lua_getstack=u.lua_getstack,e.exports.lua_gettable=a.lua_gettable,e.exports.lua_gettop=a.lua_gettop,e.exports.lua_getupvalue=a.lua_getupvalue,e.exports.lua_getuservalue=a.lua_getuservalue,e.exports.lua_insert=a.lua_insert,e.exports.lua_isboolean=a.lua_isboolean,e.exports.lua_iscfunction=a.lua_iscfunction,e.exports.lua_isfunction=a.lua_isfunction,e.exports.lua_isinteger=a.lua_isinteger,e.exports.lua_islightuserdata=a.lua_islightuserdata,e.exports.lua_isnil=a.lua_isnil,e.exports.lua_isnone=a.lua_isnone,e.exports.lua_isnoneornil=a.lua_isnoneornil,e.exports.lua_isnumber=a.lua_isnumber,e.exports.lua_isproxy=a.lua_isproxy,e.exports.lua_isstring=a.lua_isstring,e.exports.lua_istable=a.lua_istable,e.exports.lua_isthread=a.lua_isthread,e.exports.lua_isuserdata=a.lua_isuserdata,e.exports.lua_isyieldable=s.lua_isyieldable,e.exports.lua_len=a.lua_len,e.exports.lua_load=a.lua_load,e.exports.lua_newstate=o.lua_newstate,e.exports.lua_newtable=a.lua_newtable,e.exports.lua_newthread=o.lua_newthread,e.exports.lua_newuserdata=a.lua_newuserdata,e.exports.lua_next=a.lua_next,e.exports.lua_pcall=a.lua_pcall,e.exports.lua_pcallk=a.lua_pcallk,e.exports.lua_pop=a.lua_pop,e.exports.lua_pushboolean=a.lua_pushboolean,e.exports.lua_pushcclosure=a.lua_pushcclosure,e.exports.lua_pushcfunction=a.lua_pushcfunction,e.exports.lua_pushfstring=a.lua_pushfstring,e.exports.lua_pushglobaltable=a.lua_pushglobaltable,e.exports.lua_pushinteger=a.lua_pushinteger,e.exports.lua_pushjsclosure=a.lua_pushjsclosure,e.exports.lua_pushjsfunction=a.lua_pushjsfunction,e.exports.lua_pushlightuserdata=a.lua_pushlightuserdata,e.exports.lua_pushliteral=a.lua_pushliteral,e.exports.lua_pushlstring=a.lua_pushlstring,e.exports.lua_pushnil=a.lua_pushnil,e.exports.lua_pushnumber=a.lua_pushnumber,e.exports.lua_pushstring=a.lua_pushstring,e.exports.lua_pushthread=a.lua_pushthread,e.exports.lua_pushvalue=a.lua_pushvalue,e.exports.lua_pushvfstring=a.lua_pushvfstring,e.exports.lua_rawequal=a.lua_rawequal,e.exports.lua_rawget=a.lua_rawget,e.exports.lua_rawgeti=a.lua_rawgeti,e.exports.lua_rawgetp=a.lua_rawgetp,e.exports.lua_rawlen=a.lua_rawlen,e.exports.lua_rawset=a.lua_rawset,e.exports.lua_rawseti=a.lua_rawseti,e.exports.lua_rawsetp=a.lua_rawsetp,e.exports.lua_register=a.lua_register,e.exports.lua_remove=a.lua_remove,e.exports.lua_replace=a.lua_replace,e.exports.lua_resume=s.lua_resume,e.exports.lua_rotate=a.lua_rotate,e.exports.lua_setallof=s.lua_setallof,e.exports.lua_setfield=a.lua_setfield,e.exports.lua_setglobal=a.lua_setglobal,e.exports.lua_sethook=u.lua_sethook,e.exports.lua_seti=a.lua_seti,e.exports.lua_setlocal=u.lua_setlocal,e.exports.lua_setmetatable=a.lua_setmetatable,e.exports.lua_settable=a.lua_settable,e.exports.lua_settop=a.lua_settop,e.exports.lua_setupvalue=a.lua_setupvalue,e.exports.lua_setuservalue=a.lua_setuservalue,e.exports.lua_status=a.lua_status,e.exports.lua_stringtonumber=a.lua_stringtonumber,e.exports.lua_toboolean=a.lua_toboolean,e.exports.lua_todataview=a.lua_todataview,e.exports.lua_tointeger=a.lua_tointeger,e.exports.lua_tointegerx=a.lua_tointegerx,e.exports.lua_tojsstring=a.lua_tojsstring,e.exports.lua_tolstring=a.lua_tolstring,e.exports.lua_tonumber=a.lua_tonumber,e.exports.lua_tonumberx=a.lua_tonumberx,e.exports.lua_topointer=a.lua_topointer,e.exports.lua_toproxy=a.lua_toproxy,e.exports.lua_tostring=a.lua_tostring,e.exports.lua_tothread=a.lua_tothread,e.exports.lua_touserdata=a.lua_touserdata,e.exports.lua_type=a.lua_type,e.exports.lua_typename=a.lua_typename,e.exports.lua_upvalueid=a.lua_upvalueid,e.exports.lua_upvaluejoin=a.lua_upvaluejoin,e.exports.lua_version=a.lua_version,e.exports.lua_xmove=a.lua_xmove,e.exports.lua_yield=s.lua_yield,e.exports.lua_yieldk=s.lua_yieldk,e.exports.lua_tocfunction=a.lua_tocfunction},function(e,t,r){"use strict";var n={},a=r(1),u=a.LUA_VERSION_MAJOR,s=a.LUA_VERSION_MINOR,o=a.to_luastring;e.exports.LUA_PATH_SEP=";";e.exports.LUA_PATH_MARK="?";e.exports.LUA_EXEC_DIR="!";var l=u+"."+s;e.exports.LUA_VDIR=l;e.exports.LUA_DIRSEP="/";var i="./lua/"+l+"/";e.exports.LUA_LDIR=i;var c=i;e.exports.LUA_JSDIR=c;var f=o(i+"?.lua;"+i+"?/init.lua;./?.lua;./?/init.lua");e.exports.LUA_PATH_DEFAULT=f;var _=o(c+"?.js;"+c+"loadall.js;./?.js");e.exports.LUA_JSPATH_DEFAULT=_;var p=n.LUA_COMPAT_FLOATSTRING||!1,v=n.LUAI_MAXSTACK||1e6,h=n.LUA_IDSIZE||59,d="%".concat("","d"),L=n.LUAL_BUFFERSIZE||8192,A=function(e,t){for(var r=Math.min(3,Math.ceil(Math.abs(t)/1023)),n=e,a=0;a<r;a++)n*=Math.pow(2,Math.floor((t+a)/r));return n};e.exports.LUAI_MAXSTACK=v,e.exports.LUA_COMPAT_FLOATSTRING=p,e.exports.LUA_IDSIZE=h,e.exports.LUA_INTEGER_FMT=d,e.exports.LUA_INTEGER_FRMLEN="",e.exports.LUA_MAXINTEGER=2147483647,e.exports.LUA_MININTEGER=-2147483648,e.exports.LUA_NUMBER_FMT="%.14g",e.exports.LUA_NUMBER_FRMLEN="",e.exports.LUAL_BUFFERSIZE=L,e.exports.frexp=function(e){if(0===e)return[e,0];var t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e);var r=t.getUint32(0)>>>20&2047;0===r&&(t.setFloat64(0,e*Math.pow(2,64)),r=(t.getUint32(0)>>>20&2047)-64);var n=r-1022;return[A(e,-n),n]},e.exports.ldexp=A,e.exports.lua_getlocaledecpoint=function(){return 46},e.exports.lua_integer2str=function(e){return String(e)},e.exports.lua_number2str=function(e){return String(Number(e.toPrecision(14)))},e.exports.lua_numbertointeger=function(e){return e>=-2147483648&&e<2147483648&&e},e.exports.luai_apicheck=function(e,t){if(!t)throw Error(t)}},function(e,t,r){"use strict";var n=r(3).luai_apicheck,a=function(e){if(!e)throw Error("assertion failed")};e.exports.lua_assert=a,e.exports.luai_apicheck=n||function(e,t){return a(t)};e.exports.api_check=function(e,t,r){return n(e,t&&r)};e.exports.LUAI_MAXCCALLS=200;e.exports.LUA_MINBUFFER=32;e.exports.luai_nummod=function(e,t,r){var n=t%r;return n*r<0&&(n+=r),n};e.exports.MAX_INT=2147483647;e.exports.MIN_INT=-2147483648},function(e,t,r){var n=r(1),a="Fengari 0.1.4  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator\nBased on: "+n.LUA_COPYRIGHT;e.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",e.exports.FENGARI_COPYRIGHT=a,e.exports.FENGARI_RELEASE="Fengari 0.1.4",e.exports.FENGARI_VERSION="Fengari 0.1",e.exports.FENGARI_VERSION_MAJOR="0",e.exports.FENGARI_VERSION_MINOR="1",e.exports.FENGARI_VERSION_NUM=1,e.exports.FENGARI_VERSION_RELEASE="4",e.exports.is_luastring=n.is_luastring,e.exports.luastring_eq=n.luastring_eq,e.exports.luastring_from=n.luastring_from,e.exports.luastring_indexOf=n.luastring_indexOf,e.exports.luastring_of=n.luastring_of,e.exports.to_jsstring=n.to_jsstring,e.exports.to_luastring=n.to_luastring,e.exports.to_uristring=n.to_uristring,e.exports.from_userstring=n.from_userstring},function(e,t,r){"use strict";var n;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var i=r(1),c=i.LUA_OPADD,f=i.LUA_OPBAND,_=i.LUA_OPBNOT,p=i.LUA_OPBOR,v=i.LUA_OPBXOR,h=i.LUA_OPDIV,d=i.LUA_OPIDIV,L=i.LUA_OPMOD,A=i.LUA_OPMUL,g=i.LUA_OPPOW,b=i.LUA_OPSHL,T=i.LUA_OPSHR,x=i.LUA_OPSUB,k=i.LUA_OPUNM,O=i.constant_types,E=O.LUA_NUMTAGS,m=O.LUA_TBOOLEAN,U=O.LUA_TCCL,y=O.LUA_TFUNCTION,N=O.LUA_TLCF,R=O.LUA_TLCL,w=O.LUA_TLIGHTUSERDATA,S=O.LUA_TLNGSTR,I=O.LUA_TNIL,M=O.LUA_TNUMBER,P=O.LUA_TNUMFLT,C=O.LUA_TNUMINT,D=O.LUA_TSHRSTR,V=O.LUA_TSTRING,B=O.LUA_TTABLE,G=O.LUA_TTHREAD,K=O.LUA_TUSERDATA,F=i.from_userstring,j=i.luastring_indexOf,H=i.luastring_of,X=i.to_jsstring,z=i.to_luastring,Y=r(22),J=Y.lisdigit,Z=Y.lisprint,q=Y.lisspace,W=Y.lisxdigit,Q=r(11),$=r(8),ee=r(12),te=r(10),re=te.luaS_bless,ne=te.luaS_new,ae=r(9),ue=r(3),se=ue.LUA_COMPAT_FLOATSTRING,oe=ue.ldexp,le=ue.lua_integer2str,ie=ue.lua_number2str,ce=r(15),fe=r(4),_e=fe.MAX_INT,pe=fe.luai_nummod,ve=fe.lua_assert,he=r(14),de=E,Le=E+1,Ae=function(){function e(t,r){s(this,e),this.type=t,this.value=r}return l(e,[{key:"ttype",value:function(){return 63&this.type}},{key:"ttnov",value:function(){return 15&this.type}},{key:"checktag",value:function(e){return this.type===e}},{key:"checktype",value:function(e){return this.ttnov()===e}},{key:"ttisnumber",value:function(){return this.checktype(M)}},{key:"ttisfloat",value:function(){return this.checktag(P)}},{key:"ttisinteger",value:function(){return this.checktag(C)}},{key:"ttisnil",value:function(){return this.checktag(I)}},{key:"ttisboolean",value:function(){return this.checktag(m)}},{key:"ttislightuserdata",value:function(){return this.checktag(w)}},{key:"ttisstring",value:function(){return this.checktype(V)}},{key:"ttisshrstring",value:function(){return this.checktag(D)}},{key:"ttislngstring",value:function(){return this.checktag(S)}},{key:"ttistable",value:function(){return this.checktag(B)}},{key:"ttisfunction",value:function(){return this.checktype(y)}},{key:"ttisclosure",value:function(){return(31&this.type)===y}},{key:"ttisCclosure",value:function(){return this.checktag(U)}},{key:"ttisLclosure",value:function(){return this.checktag(R)}},{key:"ttislcf",value:function(){return this.checktag(N)}},{key:"ttisfulluserdata",value:function(){return this.checktag(K)}},{key:"ttisthread",value:function(){return this.checktag(G)}},{key:"ttisdeadkey",value:function(){return this.checktag(Le)}},{key:"l_isfalse",value:function(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}},{key:"setfltvalue",value:function(e){this.type=P,this.value=e}},{key:"chgfltvalue",value:function(e){ve(this.type==P),this.value=e}},{key:"setivalue",value:function(e){this.type=C,this.value=e}},{key:"chgivalue",value:function(e){ve(this.type==C),this.value=e}},{key:"setnilvalue",value:function(){this.type=I,this.value=null}},{key:"setfvalue",value:function(e){this.type=N,this.value=e}},{key:"setpvalue",value:function(e){this.type=w,this.value=e}},{key:"setbvalue",value:function(e){this.type=m,this.value=e}},{key:"setsvalue",value:function(e){this.type=S,this.value=e}},{key:"setuvalue",value:function(e){this.type=K,this.value=e}},{key:"setthvalue",value:function(e){this.type=G,this.value=e}},{key:"setclLvalue",value:function(e){this.type=R,this.value=e}},{key:"setclCvalue",value:function(e){this.type=U,this.value=e}},{key:"sethvalue",value:function(e){this.type=B,this.value=e}},{key:"setdeadvalue",value:function(){this.type=Le,this.value=null}},{key:"setfrom",value:function(e){this.type=e.type,this.value=e.value}},{key:"tsvalue",value:function(){return ve(this.ttisstring()),this.value}},{key:"svalue",value:function(){return this.tsvalue().getstr()}},{key:"vslen",value:function(){return this.tsvalue().tsslen()}},{key:"jsstring",value:function(e,t){return X(this.svalue(),e,t,!0)}}]),e}(),ge=function(e,t,r){e.stack[t].setsvalue(r)},be=new Ae(I,null);Object.freeze(be),e.exports.luaO_nilobject=be;var Te=l((function e(t,r){s(this,e),this.id=t.l_G.id_counter++,this.p=null,this.nupvalues=r,this.upvals=new Array(r)})),xe=l((function e(t,r,n){for(s(this,e),this.id=t.l_G.id_counter++,this.f=r,this.nupvalues=n,this.upvalue=new Array(n);n--;)this.upvalue[n]=new Ae(I,null)})),ke=l((function e(t,r){s(this,e),this.id=t.l_G.id_counter++,this.metatable=null,this.uservalue=new Ae(I,null),this.len=r,this.data=Object.create(null)})),Oe=l((function e(){s(this,e),this.varname=null,this.startpc=NaN,this.endpc=NaN})),Ee=z("..."),me=z('[string "'),Ue=z('"]'),ye=function(e){return J(e)?e-48:(223&e)-55},Ne=function(e,t){var r=1;if(ve(t<=1114111),t<128)e[7]=t;else{var n=63;do{e[8-r++]=128|63&t,t>>=6,n>>=1}while(t>n);e[8-r]=~n<<1|t}return r},Re=function(e,t){var r="x"===t?function(e){for(var t,r=0,n=0,a=0,u=0,s=0,o=!1;q(e[r]);)r++;if(((t=45===e[r])||43===e[r])&&r++,48!==e[r]||120!==e[r+1]&&88!==e[r+1])return null;for(r+=2;;r++)if(46===e[r]){if(o)break;o=!0}else{if(!W(e[r]))break;0===a&&48===e[r]?u++:++a<=30?n=16*n+ye(e[r]):s++,o&&s--}if(u+a===0)return null;if(s*=4,112===e[r]||80===e[r]){var l,i=0;if(((l=45===e[++r])||43===e[r])&&r++,!J(e[r]))return null;for(;J(e[r]);)i=10*i+e[r++]-48;l&&(i=-i),s+=i}return t&&(n=-n),{n:oe(n,s),i:r}}(e):function(e){try{e=X(e)}catch(e){return null}var t=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(e);if(!t)return null;var r=parseFloat(t[0]);return isNaN(r)?null:{n:r,i:t[0].length}}(e);if(null===r)return null;for(;q(e[r.i]);)r.i++;return r.i===e.length||0===e[r.i]?r:null},we=[46,120,88,110,78],Se=(u(n={},46,"."),u(n,120,"x"),u(n,88,"x"),u(n,110,"n"),u(n,78,"n"),n),Ie=Math.floor(_e/10),Me=_e%10,Pe=function(e,t){var r;if(t.ttisinteger())r=z(le(t.value));else{var n=ie(t.value);!se&&/^[-0123456789]+$/.test(n)&&(n+=".0"),r=z(n)}t.setsvalue(re(e,r))},Ce=function(e,t){$.luaD_inctop(e),ge(e,e.top-1,ne(e,t))},De=function(e,t,r){for(var n,u=0,s=0,o=0;-1!=(n=j(t,37,s));){switch(Ce(e,t.subarray(s,n)),t[n+1]){case 115:var l=r[o++];if(null===l)l=z("(null)",!0);else{l=F(l);var i=j(l,0);-1!==i&&(l=l.subarray(0,i))}Ce(e,l);break;case 99:var c=r[o++];Z(c)?Ce(e,H(c)):Ve(e,z("<\\%d>",!0),c);break;case 100:case 73:$.luaD_inctop(e),e.stack[e.top-1].setivalue(r[o++]),Pe(e,e.stack[e.top-1]);break;case 102:$.luaD_inctop(e),e.stack[e.top-1].setfltvalue(r[o++]),Pe(e,e.stack[e.top-1]);break;case 112:var f=r[o++];if(f instanceof ee.lua_State||f instanceof ae.Table||f instanceof ke||f instanceof Te||f instanceof xe)Ce(e,z("0x"+f.id.toString(16)));else switch(a(f)){case"undefined":Ce(e,z("undefined"));break;case"number":Ce(e,z("Number("+f+")"));break;case"string":Ce(e,z("String("+JSON.stringify(f)+")"));break;case"boolean":Ce(e,z(f?"Boolean(true)":"Boolean(false)"));break;case"object":if(null===f){Ce(e,z("null"));break}case"function":var _=e.l_G.ids.get(f);_||(_=e.l_G.id_counter++,e.l_G.ids.set(f,_)),Ce(e,z("0x"+_.toString(16)));break;default:Ce(e,z("<id NYI>"))}break;case 85:var p=new Uint8Array(8),v=Ne(p,r[o++]);Ce(e,p.subarray(8-v));break;case 37:Ce(e,z("%",!0));break;default:Q.luaG_runerror(e,z("invalid option '%%%c' to 'lua_pushfstring'"),t[n+1])}u+=2,s=n+2}return $.luaD_checkstack(e,1),Ce(e,t.subarray(s)),u>0&&ce.luaV_concat(e,u+1),e.stack[e.top-1].svalue()},Ve=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return De(e,t,n)},Be=function(e,t,r,n){switch(t){case c:return r+n|0;case x:return r-n|0;case A:return ce.luaV_imul(r,n);case L:return ce.luaV_mod(e,r,n);case d:return ce.luaV_div(e,r,n);case f:return r&n;case p:return r|n;case v:return r^n;case b:return ce.luaV_shiftl(r,n);case T:return ce.luaV_shiftl(r,-n);case k:return 0-r|0;case _:return-1^r;default:ve(0)}},Ge=function(e,t,r,n){switch(t){case c:return r+n;case x:return r-n;case A:return r*n;case h:return r/n;case g:return Math.pow(r,n);case d:return Math.floor(r/n);case k:return-r;case L:return pe(e,r,n);default:ve(0)}};e.exports.CClosure=xe,e.exports.LClosure=Te,e.exports.LUA_TDEADKEY=Le,e.exports.LUA_TPROTO=de,e.exports.LocVar=Oe,e.exports.TValue=Ae,e.exports.Udata=ke,e.exports.UTF8BUFFSZ=8,e.exports.luaO_arith=function(e,t,r,n,a){var u="number"==typeof a?e.stack[a]:a;switch(t){case f:case p:case v:case b:case T:case _:var s,o;if(!1!==(s=ce.tointeger(r))&&!1!==(o=ce.tointeger(n)))return void u.setivalue(Be(e,t,s,o));break;case h:case g:var l,i;if(!1!==(l=ce.tonumber(r))&&!1!==(i=ce.tonumber(n)))return void u.setfltvalue(Ge(e,t,l,i));break;default:var d,L;if(r.ttisinteger()&&n.ttisinteger())return void u.setivalue(Be(e,t,r.value,n.value));if(!1!==(d=ce.tonumber(r))&&!1!==(L=ce.tonumber(n)))return void u.setfltvalue(Ge(e,t,d,L))}ve(null!==e),he.luaT_trybinTM(e,r,n,a,t-c+he.TMS.TM_ADD)},e.exports.luaO_chunkid=function(e,t){var r,n=e.length;if(61===e[0])n<t?(r=new Uint8Array(n-1)).set(e.subarray(1)):(r=new Uint8Array(t)).set(e.subarray(1,t+1));else if(64===e[0])n<=t?(r=new Uint8Array(n-1)).set(e.subarray(1)):((r=new Uint8Array(t)).set(Ee),t-=Ee.length,r.set(e.subarray(n-t),Ee.length));else{r=new Uint8Array(t);var a=j(e,10);r.set(me);var u=me.length;n<(t-=me.length+Ee.length+Ue.length)&&-1===a?(r.set(e,u),u+=e.length):(-1!==a&&(n=a),n>t&&(n=t),r.set(e.subarray(0,n),u),u+=n,r.set(Ee,u),u+=Ee.length),r.set(Ue,u),u+=Ue.length,r=r.subarray(0,u)}return r},e.exports.luaO_hexavalue=ye,e.exports.luaO_int2fb=function(e){var t=0;if(e<8)return e;for(;e>=128;)e=e+15>>4,t+=4;for(;e>=16;)e=e+1>>1,t++;return t+1<<3|e-8},e.exports.luaO_pushfstring=Ve,e.exports.luaO_pushvfstring=De,e.exports.luaO_str2num=function(e,t){var r=function(e){for(var t,r=0,n=0,a=!0;q(e[r]);)r++;if(((t=45===e[r])||43===e[r])&&r++,48!==e[r]||120!==e[r+1]&&88!==e[r+1])for(;r<e.length&&J(e[r]);r++){var u=e[r]-48;if(n>=Ie&&(n>Ie||u>Me+t))return null;n=10*n+u|0,a=!1}else for(r+=2;r<e.length&&W(e[r]);r++)n=16*n+ye(e[r])|0,a=!1;for(;r<e.length&&q(e[r]);)r++;return a||r!==e.length&&0!==e[r]?null:{n:0|(t?-n:n),i:r}}(e);return null!==r?(t.setivalue(r.n),r.i+1):null!==(r=function(e){for(var t=e.length,r=0,n=0;n<t;n++){var a=e[n];if(-1!==we.indexOf(a)){r=a;break}}var u=Se[r];return"n"===u?null:Re(e,u)}(e))?(t.setfltvalue(r.n),r.i+1):0},e.exports.luaO_tostring=Pe,e.exports.luaO_utf8esc=Ne,e.exports.numarith=Ge,e.exports.pushobj2s=function(e,t){e.stack[e.top++]=new Ae(t.type,t.value)},e.exports.pushsvalue2s=function(e,t){e.stack[e.top++]=new Ae(S,t)},e.exports.setobjs2s=function(e,t,r){e.stack[t].setfrom(e.stack[r])},e.exports.setobj2s=function(e,t,r){e.stack[t].setfrom(r)},e.exports.setsvalue2s=ge},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s,o,l=r(3).LUAL_BUFFERSIZE,i=r(2),c=i.LUA_ERRERR,f=i.LUA_MULTRET,_=i.LUA_REGISTRYINDEX,p=i.LUA_SIGNATURE,v=i.LUA_TBOOLEAN,h=i.LUA_TLIGHTUSERDATA,d=i.LUA_TNIL,L=i.LUA_TNONE,A=i.LUA_TNUMBER,g=i.LUA_TSTRING,b=i.LUA_TTABLE,T=i.LUA_VERSION_NUM,x=i.lua_Debug,k=i.lua_absindex,O=i.lua_atpanic,E=i.lua_call,m=i.lua_checkstack,U=i.lua_concat,y=i.lua_copy,N=i.lua_createtable,R=i.lua_error,w=i.lua_getfield,S=i.lua_getinfo,I=i.lua_getmetatable,M=i.lua_getstack,P=i.lua_gettop,C=i.lua_insert,D=i.lua_isinteger,V=i.lua_isnil,B=i.lua_isnumber,G=i.lua_isstring,K=i.lua_istable,F=i.lua_len,j=i.lua_load,H=i.lua_newstate,X=i.lua_newtable,z=i.lua_next,Y=i.lua_pcall,J=i.lua_pop,Z=i.lua_pushboolean,q=i.lua_pushcclosure,W=i.lua_pushcfunction,Q=i.lua_pushfstring,$=i.lua_pushinteger,ee=i.lua_pushliteral,te=i.lua_pushlstring,re=i.lua_pushnil,ne=i.lua_pushstring,ae=i.lua_pushvalue,ue=i.lua_pushvfstring,se=i.lua_rawequal,oe=i.lua_rawget,le=i.lua_rawgeti,ie=i.lua_rawlen,ce=i.lua_rawseti,fe=i.lua_remove,_e=i.lua_setfield,pe=i.lua_setglobal,ve=i.lua_setmetatable,he=i.lua_settop,de=i.lua_toboolean,Le=i.lua_tointeger,Ae=i.lua_tointegerx,ge=i.lua_tojsstring,be=i.lua_tolstring,Te=i.lua_tonumber,xe=i.lua_tonumberx,ke=i.lua_topointer,Oe=i.lua_tostring,Ee=i.lua_touserdata,me=i.lua_type,Ue=i.lua_typename,ye=i.lua_version,Ne=r(5),Re=Ne.from_userstring,we=Ne.luastring_eq,Se=Ne.to_luastring,Ie=Ne.to_uristring,Me=c+1,Pe=Se("_LOADED"),Ce=Se("_PRELOAD"),De=Se("FILE*"),Ve=Se("__name"),Be=Se("__tostring"),Ge=new Uint8Array(0),Ke=a((function e(){u(this,e),this.L=null,this.b=Ge,this.n=0})),Fe=function(e,t){var r=P(e);if(S(e,Se("f"),t),w(e,_,Pe),function e(t,r,n){if(0===n||!K(t,-1))return 0;for(re(t);z(t,-2);){if(me(t,-2)===g){if(se(t,r,-1))return J(t,1),1;if(e(t,r,n-1))return fe(t,-2),ee(t,"."),C(t,-2),U(t,3),1}J(t,1)}return 0}(e,r+1,2)){var n=Oe(e,-1);return 95===n[0]&&71===n[1]&&46===n[2]&&(ne(e,n.subarray(3)),fe(e,-2)),y(e,-1,r+1),J(e,2),1}return he(e,r),0},je=function(e,t){Fe(e,t)?(Q(e,Se("function '%s'"),Oe(e,-1)),fe(e,-2)):0!==t.namewhat.length?Q(e,Se("%s '%s'"),t.namewhat,t.name):t.what&&109===t.what[0]?ee(e,"main chunk"):t.what&&76===t.what[0]?Q(e,Se("function <%s:%d>"),t.short_src,t.linedefined):ee(e,"?")},He=function(e){var t="PANIC: unprotected error in call to Lua API ("+ge(e,-1)+")";throw new Error(t)},Xe=function(e,t,r){var n=new x;return M(e,0,n)?(S(e,Se("n"),n),we(n.namewhat,Se("method"))&&0===--t?Je(e,Se("calling '%s' on bad self (%s)"),n.name,r):(null===n.name&&(n.name=Fe(e,n)?Oe(e,-1):Se("?")),Je(e,Se("bad argument #%d to '%s' (%s)"),t,n.name,r))):Je(e,Se("bad argument #%d (%s)"),t,r)},ze=function(e,t,r){var n;n=Lt(e,t,Ve)===g?Oe(e,-1):me(e,t)===h?Se("light userdata",!0):$e(e,t);var a=Q(e,Se("%s expected, got %s"),r,n);return Xe(e,t,a)},Ye=function(e,t){var r=new x;M(e,t,r)&&(S(e,Se("Sl",!0),r),r.currentline>0)?Q(e,Se("%s:%d: "),r.short_src,r.currentline):ne(e,Se(""))},Je=function(e,t){Ye(e,1);for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return ue(e,t,n),U(e,2),R(e)},Ze=function(e,t,r,n){return t?(Z(e,1),1):(re(e),n?(a=n.message,u=-n.errno):(a="Success",u=0),r?Q(e,Se("%s: %s"),r,Se(a)):ne(e,Se(a)),$(e,u),3);var a,u},qe=function(e,t){return w(e,_,t)},We=function(e,t,r){var n=Ee(e,t);return null!==n&&I(e,t)?(qe(e,r),se(e,-1,-2)||(n=null),J(e,2),n):null},Qe=function(e,t,r){ze(e,t,Ue(e,r))},$e=function(e,t){return Ue(e,me(e,t))},et=function(e,t){var r=be(e,t);return null==r&&Qe(e,t,g),r},tt=et,rt=function(e,t,r){return me(e,t)<=0?null===r?null:Re(r):et(e,t)},nt=rt,at=function(e,t){var r=xe(e,t);return!1===r&&Qe(e,t,A),r},ut=function(e,t){var r=Ae(e,t);return!1===r&&function(e,t){B(e,t)?Xe(e,t,Se("number has no integer representation",!0)):Qe(e,t,A)}(e,t),r},st=function(e,t){var r=e.n+t;if(e.b.length<r){var n=Math.max(2*e.b.length,r),a=new Uint8Array(n);a.set(e.b),e.b=a}return e.b.subarray(e.n,r)},ot=function(e,t){t.L=e,t.b=Ge},lt=function(e,t,r){r>0&&(t=Re(t),st(e,r).set(t.subarray(0,r)),ft(e,r))},it=function(e,t){t=Re(t),lt(e,t,t.length)},ct=function(e){te(e.L,e.b,e.n),e.n=0,e.b=Ge},ft=function(e,t){e.n+=t},_t=function(e,t,r,n){return me(e,r)<=0?n:t(e,r)},pt=function(e,t){var r=t.string;return t.string=null,r},vt=function(e,t,r,n,a){return j(e,pt,{string:t},n,a)},ht=function(e,t,r,n){return vt(e,t,0,n,null)},dt=function(e,t){return ht(e,t,t.length,t)},Lt=function(e,t,r){if(I(e,t)){ne(e,r);var n=oe(e,-2);return n===d?J(e,2):fe(e,-2),n}return d},At=function(e,t,r){return t=k(e,t),Lt(e,t,r)!==d&&(ae(e,t),E(e,1,1),!0)},gt=Se("%I"),bt=Se("%f"),Tt=function(e,t,r){var n=r>>>0,a=t.length,u=e.length+1-a;e:for(;n<u;n++){for(var s=0;s<a;s++)if(e[n+s]!==t[s])continue e;return n}return-1},xt=function(e,t,r){return w(e,t,r)===b||(J(e,1),t=k(e,t),X(e),ae(e,-1),_e(e,t,r),!1)},kt=function(e,t,r){for(var n in Ot(e,r,Se("too many upvalues",!0)),t){for(var a=0;a<r;a++)ae(e,-r);q(e,t[n],r),_e(e,-(r+2),Se(n))}J(e,r)},Ot=function(e,t,r){m(e,t)||(r?Je(e,Se("stack overflow (%s)"),r):Je(e,Se("stack overflow",!0)))},Et=function(e,t,r,n){var a=n.message,u=Oe(e,r).subarray(1);return Q(e,Se("cannot %s %s: %s"),Se(t),u,Se(a)),fe(e,r),Me},mt=[239,187,191],Ut=function(e){var t=function(e){var t;e.n=0;var r=0;do{if(null===(t=s(e))||t!==mt[r])return t;r++,e.buff[e.n++]=t}while(r<mt.length);return e.n=0,s(e)}(e);if(35===t){do{t=s(e)}while(t&&10!==t);return{skipped:!0,c:s(e)}}return{skipped:!1,c:t}},yt=a((function e(){u(this,e),this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0})),Nt=function(e,t){var r=t;if(null!==r.f&&r.n>0){var n=r.n;return r.n=0,r.f=r.f.subarray(r.pos),r.buff.subarray(0,n)}var a=r.f;return r.f=null,a};s=function(e){return e.pos<e.f.length?e.f[e.pos++]:null},o=function(e,t,r){var n=new yt,a=P(e)+1;if(null===t)throw new Error("Can't read stdin in the browser");Q(e,Se("@%s"),t);var u=Ie(t),s=new XMLHttpRequest;if(s.open("GET",u,!1),"undefined"==typeof window&&(s.responseType="arraybuffer"),s.send(),!(s.status>=200&&s.status<=299))return n.err=s.status,Et(e,"open",a,{message:"".concat(s.status,": ").concat(s.statusText)});"string"==typeof s.response?n.f=Se(s.response):n.f=new Uint8Array(s.response);var o=Ut(n);o.c===p[0]&&t||o.skipped&&(n.buff[n.n++]=10),null!==o.c&&(n.buff[n.n++]=o.c);var l=j(e,Nt,n,Oe(e,-1),r),i=n.err;return i?(he(e,a),Et(e,"read",a,i)):(fe(e,a),l)};var Rt=function(e,t){return o(e,t,null)},wt=function(e,t,r){var n=ye(e);72!=r&&Je(e,Se("core and library have incompatible numeric types")),n!=ye(null)?Je(e,Se("multiple Lua VMs detected")):n!==t&&Je(e,Se("version mismatch: app. needs %f, Lua core provides %f"),t,n)};e.exports.LUA_ERRFILE=Me,e.exports.LUA_FILEHANDLE=De,e.exports.LUA_LOADED_TABLE=Pe,e.exports.LUA_NOREF=-2,e.exports.LUA_PRELOAD_TABLE=Ce,e.exports.LUA_REFNIL=-1,e.exports.luaL_Buffer=Ke,e.exports.luaL_addchar=function(e,t){st(e,1),e.b[e.n++]=t},e.exports.luaL_addlstring=lt,e.exports.luaL_addsize=ft,e.exports.luaL_addstring=it,e.exports.luaL_addvalue=function(e){var t=e.L,r=Oe(t,-1);lt(e,r,r.length),J(t,1)},e.exports.luaL_argcheck=function(e,t,r,n){t||Xe(e,r,n)},e.exports.luaL_argerror=Xe,e.exports.luaL_buffinit=ot,e.exports.luaL_buffinitsize=function(e,t,r){return ot(e,t),st(t,r)},e.exports.luaL_callmeta=At,e.exports.luaL_checkany=function(e,t){me(e,t)===L&&Xe(e,t,Se("value expected",!0))},e.exports.luaL_checkinteger=ut,e.exports.luaL_checklstring=et,e.exports.luaL_checknumber=at,e.exports.luaL_checkoption=function(e,t,r,n){for(var a=null!==r?nt(e,t,r):tt(e,t),u=0;n[u];u++)if(we(n[u],a))return u;return Xe(e,t,Q(e,Se("invalid option '%s'"),a))},e.exports.luaL_checkstack=Ot,e.exports.luaL_checkstring=tt,e.exports.luaL_checktype=function(e,t,r){me(e,t)!==r&&Qe(e,t,r)},e.exports.luaL_checkudata=function(e,t,r){var n=We(e,t,r);return null===n&&ze(e,t,r),n},e.exports.luaL_checkversion=function(e){wt(e,T,72)},e.exports.luaL_checkversion_=wt,e.exports.luaL_dofile=function(e,t){return Rt(e,t)||Y(e,0,f,0)},e.exports.luaL_dostring=function(e,t){return dt(e,t)||Y(e,0,f,0)},e.exports.luaL_error=Je,e.exports.luaL_execresult=function(e,t){var r,n;if(null===t)return Z(e,1),ee(e,"exit"),$(e,0),3;if(t.status)r="exit",n=t.status;else{if(!t.signal)return Ze(e,0,null,t);r="signal",n=t.signal}return re(e),ee(e,r),$(e,n),3},e.exports.luaL_fileresult=Ze,e.exports.luaL_getmetafield=Lt,e.exports.luaL_getmetatable=qe,e.exports.luaL_getsubtable=xt,e.exports.luaL_gsub=function(e,t,r,n){var a,u=new Ke;for(ot(e,u);(a=Tt(t,r))>=0;)lt(u,t,a),it(u,n),t=t.subarray(a+r.length);return it(u,t),ct(u),Oe(e,-1)},e.exports.luaL_len=function(e,t){F(e,t);var r=Ae(e,-1);return!1===r&&Je(e,Se("object length is not an integer",!0)),J(e,1),r},e.exports.luaL_loadbuffer=ht,e.exports.luaL_loadbufferx=vt,e.exports.luaL_loadfile=Rt,e.exports.luaL_loadfilex=o,e.exports.luaL_loadstring=dt,e.exports.luaL_newlib=function(e,t){N(e),kt(e,t,0)},e.exports.luaL_newlibtable=function(e){N(e)},e.exports.luaL_newmetatable=function(e,t){return qe(e,t)!==d?0:(J(e,1),N(e,0,2),ne(e,t),_e(e,-2,Ve),ae(e,-1),_e(e,_,t),1)},e.exports.luaL_newstate=function(){var e=H();return e&&O(e,He),e},e.exports.luaL_opt=_t,e.exports.luaL_optinteger=function(e,t,r){return _t(e,ut,t,r)},e.exports.luaL_optlstring=rt,e.exports.luaL_optnumber=function(e,t,r){return _t(e,at,t,r)},e.exports.luaL_optstring=nt,e.exports.luaL_prepbuffer=function(e){return st(e,l)},e.exports.luaL_prepbuffsize=st,e.exports.luaL_pushresult=ct,e.exports.luaL_pushresultsize=function(e,t){ft(e,t),ct(e)},e.exports.luaL_ref=function(e,t){var r;return V(e,-1)?(J(e,1),-1):(t=k(e,t),le(e,t,0),r=Le(e,-1),J(e,1),0!==r?(le(e,t,r),ce(e,t,0)):r=ie(e,t)+1,ce(e,t,r),r)},e.exports.luaL_requiref=function(e,t,r,n){xt(e,_,Pe),w(e,-1,t),de(e,-1)||(J(e,1),W(e,r),ne(e,t),E(e,1,1),ae(e,-1),_e(e,-3,t)),fe(e,-2),n&&(ae(e,-1),pe(e,t))},e.exports.luaL_setfuncs=kt,e.exports.luaL_setmetatable=function(e,t){qe(e,t),ve(e,-2)},e.exports.luaL_testudata=We,e.exports.luaL_tolstring=function(e,t){if(At(e,t,Be))G(e,-1)||Je(e,Se("'__tostring' must return a string"));else switch(me(e,t)){case A:D(e,t)?Q(e,gt,Le(e,t)):Q(e,bt,Te(e,t));break;case g:ae(e,t);break;case v:ee(e,de(e,t)?"true":"false");break;case d:ee(e,"nil");break;default:var r=Lt(e,t,Ve),n=r===g?Oe(e,-1):$e(e,t);Q(e,Se("%s: %p"),n,ke(e,t)),r!==d&&fe(e,-2)}return be(e,-1)},e.exports.luaL_traceback=function(e,t,r,n){var a=new x,u=P(e),s=function(e){for(var t=new x,r=1,n=1;M(e,n,t);)r=n,n*=2;for(;r<n;){var a=Math.floor((r+n)/2);M(e,a,t)?r=a+1:n=a}return n-1}(t),o=s-n>21?10:-1;for(r&&Q(e,Se("%s\n"),r),Ot(e,10,null),ee(e,"stack traceback:");M(t,n++,a);)0==o--?(ee(e,"\n\t..."),n=s-11+1):(S(t,Se("Slnt",!0),a),Q(e,Se("\n\t%s:"),a.short_src),a.currentline>0&&ee(e,"".concat(a.currentline,":")),ee(e," in "),je(e,a),a.istailcall&&ee(e,"\n\t(...tail calls..)"),U(e,P(e)-u));U(e,P(e)-u)},e.exports.luaL_typename=$e,e.exports.luaL_unref=function(e,t,r){r>=0&&(t=k(e,t),le(e,t,0),ce(e,t,r),$(e,r),ce(e,t,0))},e.exports.luaL_where=Ye,e.exports.lua_writestringerror=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];do{var r=/([^\n]*)\n?([\d\D]*)/.exec(t);console.error(r[1]),t=r[2]}while(""!==t)}}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var u=r(1),s=u.LUA_HOOKCALL,o=u.LUA_HOOKRET,l=u.LUA_HOOKTAILCALL,i=u.LUA_MASKCALL,c=u.LUA_MASKLINE,f=u.LUA_MASKRET,_=u.LUA_MINSTACK,p=u.LUA_MULTRET,v=u.LUA_SIGNATURE,h=u.constant_types,d=h.LUA_TCCL,L=h.LUA_TLCF,A=h.LUA_TLCL,g=h.LUA_TNIL,b=u.thread_status,T=b.LUA_ERRMEM,x=b.LUA_ERRERR,k=b.LUA_ERRRUN,O=b.LUA_ERRSYNTAX,E=b.LUA_OK,m=b.LUA_YIELD,U=u.lua_Debug,y=u.luastring_indexOf,N=u.to_luastring,R=r(19),w=r(11),S=r(13),I=r(4),M=I.api_check,P=I.lua_assert,C=I.LUAI_MAXCCALLS,D=r(6),V=r(16),B=r(23),G=r(12),K=r(10).luaS_newliteral,F=r(14),j=r(3).LUAI_MAXSTACK,H=r(36),X=r(15),z=r(20).MBuffer,Y=function(e,t){if(e.top<t)for(;e.top<t;)e.stack[e.top++]=new D.TValue(g,null);else for(;e.top>t;)delete e.stack[--e.top]},J=function(e,t,r){for(var n=e.top;e.top<r+1;)e.stack[e.top++]=new D.TValue(g,null);switch(t){case T:D.setsvalue2s(e,r,K(e,"not enough memory"));break;case x:D.setsvalue2s(e,r,K(e,"error in error handling"));break;default:D.setobjs2s(e,r,n-1)}for(;e.top>r+1;)delete e.stack[--e.top]},Z=j+200,q=function(e,t){P(t<=j||t==Z),P(e.stack_last==e.stack.length-G.EXTRA_STACK),e.stack.length=t,e.stack_last=t-G.EXTRA_STACK},W=function(e,t){var r=e.stack.length;if(r>j)le(e,x);else{var n=e.top+t+G.EXTRA_STACK,a=2*r;a>j&&(a=j),a<n&&(a=n),a>j?(q(e,Z),w.luaG_runerror(e,N("stack overflow",!0))):q(e,a)}},Q=function(e,t){e.stack_last-e.top<=t&&W(e,t)},$=function(e){var t=function(e){for(var t=e.top,r=e.ci;null!==r;r=r.previous)t<r.top&&(t=r.top);return P(t<=e.stack_last),t+1}(e),r=t+Math.floor(t/8)+2*G.EXTRA_STACK;r>j&&(r=j),e.stack.length>j&&G.luaE_freeCI(e),t<=j-G.EXTRA_STACK&&r<e.stack.length&&q(e,r)},ee=function e(t,r,n){var a=t.stack[r];switch(a.type){case d:case L:var u=a.type===d?a.value.f:a.value;Q(t,_);var o=G.luaE_extendCI(t);o.funcOff=r,o.nresults=n,o.func=a,o.top=t.top+_,P(o.top<=t.stack_last),o.callstatus=0,t.hookmask&i&&ne(t,s,-1);var l=u(t);if("number"!=typeof l||l<0||(0|l)!==l)throw Error("invalid return value from JS function (expected integer)");return R.api_checknelems(t,l),te(t,o,t.top-l,l),!0;case A:var c,f=a.value.p,p=t.top-r-1,v=f.maxstacksize;if(Q(t,v),f.is_vararg)c=ue(t,f,p);else{for(;p<f.numparams;p++)t.stack[t.top++]=new D.TValue(g,null);c=r+1}var h=G.luaE_extendCI(t);return h.funcOff=r,h.nresults=n,h.func=a,h.l_base=c,h.top=c+v,Y(t,h.top),h.l_code=f.code,h.l_savedpc=0,h.callstatus=G.CIST_LUA,t.hookmask&i&&ae(t,h),!1;default:return Q(t,1),se(t,r,a),e(t,r,n)}},te=function(e,t,r,n){var a=t.nresults;e.hookmask&(f|c)&&(e.hookmask&f&&ne(e,o,-1),e.oldpc=t.previous.l_savedpc);var u=t.funcOff;return e.ci=t.previous,e.ci.next=null,re(e,r,u,n,a)},re=function(e,t,r,n,a){switch(a){case 0:break;case 1:0===n?e.stack[r].setnilvalue():D.setobjs2s(e,r,t);break;case p:for(var u=0;u<n;u++)D.setobjs2s(e,r+u,t+u);for(var s=e.top;s>=r+n;s--)delete e.stack[s];return e.top=r+n,!1;default:var o;if(a<=n)for(o=0;o<a;o++)D.setobjs2s(e,r+o,t+o);else{for(o=0;o<n;o++)D.setobjs2s(e,r+o,t+o);for(;o<a;o++)r+o>=e.top?e.stack[r+o]=new D.TValue(g,null):e.stack[r+o].setnilvalue()}}for(var l=r+a,i=e.top;i>=l;i--)delete e.stack[i];return e.top=l,!0},ne=function(e,t,r){var n=e.hook;if(n&&e.allowhook){var a=e.ci,u=e.top,s=a.top,o=new U;o.event=t,o.currentline=r,o.i_ci=a,Q(e,_),a.top=e.top+_,P(a.top<=e.stack_last),e.allowhook=0,a.callstatus|=G.CIST_HOOKED,n(e,o),P(!e.allowhook),e.allowhook=1,a.top=s,Y(e,u),a.callstatus&=~G.CIST_HOOKED}},ae=function(e,t){var r=s;t.l_savedpc++,t.previous.callstatus&G.CIST_LUA&&t.previous.l_code[t.previous.l_savedpc-1].opcode==V.OpCodesI.OP_TAILCALL&&(t.callstatus|=G.CIST_TAIL,r=l),ne(e,r,-1),t.l_savedpc--},ue=function(e,t,r){var n,a=t.numparams,u=e.top-r,s=e.top;for(n=0;n<a&&n<r;n++)D.pushobj2s(e,e.stack[u+n]),e.stack[u+n].setnilvalue();for(;n<a;n++)e.stack[e.top++]=new D.TValue(g,null);return s},se=function(e,t,r){var n=F.luaT_gettmbyobj(e,r,F.TMS.TM_CALL);n.ttisfunction(n)||w.luaG_typeerror(e,r,N("call",!0)),D.pushobj2s(e,e.stack[e.top-1]);for(var a=e.top-2;a>t;a--)D.setobjs2s(e,a,a-1);D.setobj2s(e,t,n)},oe=function(e,t,r){++e.nCcalls>=C&&function(e){e.nCcalls===C?w.luaG_runerror(e,N("JS stack overflow",!0)):e.nCcalls>=C+(C>>3)&&le(e,x)}(e),ee(e,t,r)||X.luaV_execute(e),e.nCcalls--},le=function e(t,r){if(t.errorJmp)throw t.errorJmp.status=r,t.errorJmp;var n=t.l_G;if(t.status=r,!n.mainthread.errorJmp){var a=n.panic;throw a&&(J(t,r,t.top),t.ci.top<t.top&&(t.ci.top=t.top),a(t)),new Error("Aborted ".concat(r))}n.mainthread.stack[n.mainthread.top++]=t.stack[t.top-1],e(n.mainthread,r)},ie=function(e,t,r){var n=e.nCcalls,a={status:E,previous:e.errorJmp};e.errorJmp=a;try{t(e,r)}catch(t){if(a.status===E){var u=e.l_G.atnativeerror;if(u)try{if(a.status=E,R.lua_pushcfunction(e,u),R.lua_pushlightuserdata(e,t),Le(e,e.top-2,1),0!==e.errfunc){var s=e.errfunc;D.pushobj2s(e,e.stack[e.top-1]),D.setobjs2s(e,e.top-2,s),Le(e,e.top-2,1)}a.status=k}catch(e){a.status===E&&(a.status=-1)}else a.status=-1}}return e.errorJmp=a.previous,e.nCcalls=n,a.status},ce=function(e,t){var r=e.ci;P(null!==r.c_k&&0===e.nny),P(r.callstatus&G.CIST_YPCALL||t===m),r.callstatus&G.CIST_YPCALL&&(r.callstatus&=~G.CIST_YPCALL,e.errfunc=r.c_old_errfunc),r.nresults===p&&e.ci.top<e.top&&(e.ci.top=e.top);var n=(0,r.c_k)(e,t,r.c_ctx);R.api_checknelems(e,n),te(e,r,e.top-n,n)},fe=function(e,t){for(null!==t&&ce(e,t);e.ci!==e.base_ci;)e.ci.callstatus&G.CIST_LUA?(X.luaV_finishOp(e),X.luaV_execute(e)):ce(e,m)},_e=function(e,t){var r=function(e){for(var t=e.ci;null!==t;t=t.previous)if(t.callstatus&G.CIST_YPCALL)return t;return null}(e);if(null===r)return 0;var n=r.extra;return S.luaF_close(e,n),J(e,t,n),e.ci=r,e.allowhook=r.callstatus&G.CIST_OAH,e.nny=0,$(e),e.errfunc=r.c_old_errfunc,1},pe=function(e,t,r){var n=K(e,t);if(0===r)D.pushsvalue2s(e,n),M(e,e.top<=e.ci.top,"stack overflow");else{for(var a=1;a<r;a++)delete e.stack[--e.top];D.setsvalue2s(e,e.top-1,n)}return k},ve=function(e,t){var r=e.top-t,n=e.ci;e.status===E?ee(e,r-1,p)||X.luaV_execute(e):(P(e.status===m),e.status=E,n.funcOff=n.extra,n.func=e.stack[n.funcOff],n.callstatus&G.CIST_LUA?X.luaV_execute(e):(null!==n.c_k&&(t=n.c_k(e,m,n.c_ctx),R.api_checknelems(e,t),r=e.top-t),te(e,n,r,t)),fe(e,null))},he=function(e,t,r,n){var a=e.ci;return R.api_checknelems(e,t),e.nny>0&&(e!==e.l_G.mainthread?w.luaG_runerror(e,N("attempt to yield across a JS-call boundary",!0)):w.luaG_runerror(e,N("attempt to yield from outside a coroutine",!0))),e.status=m,a.extra=a.funcOff,a.callstatus&G.CIST_LUA?M(e,null===n,"hooks cannot continue after yielding"):(a.c_k=n,null!==n&&(a.c_ctx=r),a.funcOff=e.top-t-1,a.func=e.stack[a.funcOff],le(e,m)),P(a.callstatus&G.CIST_HOOKED),0},de=function(e,t,r,n,a){var u=e.ci,s=e.allowhook,o=e.nny,l=e.errfunc;e.errfunc=a;var i=ie(e,t,r);return i!==E&&(S.luaF_close(e,n),J(e,i,n),e.ci=u,e.allowhook=s,e.nny=o,$(e)),e.errfunc=l,i},Le=function(e,t,r){e.nny++,oe(e,t,r),e.nny--},Ae=a((function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.z=t,this.buff=new z,this.dyd=new B.Dyndata,this.mode=n,this.name=r})),ge=function(e,t,r){t&&-1===y(t,r[0])&&(D.luaO_pushfstring(e,N("attempt to load a %s chunk (mode is '%s')"),r,t),le(e,O))},be=function(e,t){var r,n=t.z.zgetc();n===v[0]?(ge(e,t.mode,N("binary",!0)),r=H.luaU_undump(e,t.z,t.name)):(ge(e,t.mode,N("text",!0)),r=B.luaY_parser(e,t.z,t.buff,t.dyd,t.name,n)),P(r.nupvalues===r.p.upvalues.length),S.luaF_initupvals(e,r)};e.exports.adjust_top=Y,e.exports.luaD_call=oe,e.exports.luaD_callnoyield=Le,e.exports.luaD_checkstack=Q,e.exports.luaD_growstack=W,e.exports.luaD_hook=ne,e.exports.luaD_inctop=function(e){Q(e,1),e.stack[e.top++]=new D.TValue(g,null)},e.exports.luaD_pcall=de,e.exports.luaD_poscall=te,e.exports.luaD_precall=ee,e.exports.luaD_protectedparser=function(e,t,r,n){var a=new Ae(t,r,n);e.nny++;var u=de(e,be,a,e.top,e.errfunc);return e.nny--,u},e.exports.luaD_rawrunprotected=ie,e.exports.luaD_reallocstack=q,e.exports.luaD_throw=le,e.exports.lua_isyieldable=function(e){return 0===e.nny},e.exports.lua_resume=function(e,t,r){var n=e.nny;if(e.status===E){if(e.ci!==e.base_ci)return pe(e,"cannot resume non-suspended coroutine",r)}else if(e.status!==m)return pe(e,"cannot resume dead coroutine",r);if(e.nCcalls=t?t.nCcalls+1:1,e.nCcalls>=C)return pe(e,"JS stack overflow",r);e.nny=0,R.api_checknelems(e,e.status===E?r+1:r);var a=ie(e,ve,r);if(-1===a)a=k;else{for(;a>m&&_e(e,a);)a=ie(e,fe,a);a>m?(e.status=a,J(e,a,e.top),e.ci.top=e.top):P(a===e.status)}return e.nny=n,e.nCcalls--,P(e.nCcalls===(t?t.nCcalls:0)),a},e.exports.lua_yield=function(e,t){he(e,t,0,null)},e.exports.lua_yieldk=he},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=r(1),o=s.constant_types,l=o.LUA_TBOOLEAN,i=o.LUA_TCCL,c=o.LUA_TLCF,f=o.LUA_TLCL,_=o.LUA_TLIGHTUSERDATA,p=o.LUA_TLNGSTR,v=o.LUA_TNIL,h=o.LUA_TNUMFLT,d=o.LUA_TNUMINT,L=o.LUA_TSHRSTR,A=o.LUA_TTABLE,g=o.LUA_TTHREAD,b=o.LUA_TUSERDATA,T=s.to_luastring,x=r(4).lua_assert,k=r(11),O=r(6),E=r(10),m=E.luaS_hashlongstr,U=E.TString,y=r(12),N=new WeakMap,R=function(e){var t=N.get(e);return t||(t={},N.set(e,t)),t},w=function(e,t){switch(t.type){case v:return k.luaG_runerror(e,T("table index is nil",!0));case h:if(isNaN(t.value))return k.luaG_runerror(e,T("table index is NaN",!0));case d:case l:case A:case f:case c:case i:case b:case g:return t.value;case L:case p:return m(t.tsvalue());case _:var r=t.value;switch(u(r)){case"string":return"*"+r;case"number":return"#"+r;case"boolean":return r?"?true":"?false";case"function":return R(r);case"object":if(r instanceof y.lua_State&&r.l_G===e.l_G||r instanceof S||r instanceof O.Udata||r instanceof O.LClosure||r instanceof O.CClosure)return R(r);default:return r}default:throw new Error("unknown key type: "+t.type)}},S=a((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1})),I=function(e,t,r,n){e.dead_strong.clear(),e.dead_weak=void 0;var a=null,u={key:r,value:n,p:a=e.l,n:void 0};e.f||(e.f=u),a&&(a.n=u),e.strong.set(t,u),e.l=u},M=function(e,t){var r,n=e.strong.get(t);if(n){n.key.setdeadvalue(),n.value=void 0;var a=n.n,s=n.p;n.p=void 0,s&&(s.n=a),a&&(a.p=s),e.f===n&&(e.f=a),e.l===n&&(e.l=s),e.strong.delete(t),("object"===u(r=t)?null!==r:"function"==typeof r)?(e.dead_weak||(e.dead_weak=new WeakMap),e.dead_weak.set(t,n)):e.dead_strong.set(t,n)}},P=function(e,t){var r=e.strong.get(t);return r?r.value:O.luaO_nilobject},C=function(e,t){return x("number"==typeof t&&(0|t)===t),P(e,t)};e.exports.invalidateTMcache=function(e){e.flags=0},e.exports.luaH_get=function(e,t,r){return x(r instanceof O.TValue),r.ttisnil()||r.ttisfloat()&&isNaN(r.value)?O.luaO_nilobject:P(t,w(e,r))},e.exports.luaH_getint=C,e.exports.luaH_getn=function(e){for(var t=0,r=e.strong.size+1;r-t>1;){var n=Math.floor((t+r)/2);C(e,n).ttisnil()?r=n:t=n}return t},e.exports.luaH_getstr=function(e,t){return x(t instanceof U),P(e,m(t))},e.exports.luaH_setfrom=function(e,t,r,n){x(r instanceof O.TValue);var a=w(e,r);if(n.ttisnil())M(t,a);else{var u=t.strong.get(a);if(u)u.value.setfrom(n);else{var s,o=r.value;s=r.ttisfloat()&&(0|o)===o?new O.TValue(d,o):new O.TValue(r.type,o);var l=new O.TValue(n.type,n.value);I(t,a,s,l)}}},e.exports.luaH_setint=function(e,t,r){x("number"==typeof t&&(0|t)===t&&r instanceof O.TValue);var n=t;if(r.ttisnil())M(e,n);else{var a=e.strong.get(n);if(a){a.value.setfrom(r)}else{var u=new O.TValue(d,t),s=new O.TValue(r.type,r.value);I(e,n,u,s)}}},e.exports.luaH_new=function(e){return new S(e)},e.exports.luaH_next=function(e,t,r){var n,a=e.stack[r];if(a.type===v){if(!(n=t.f))return!1}else{var u=w(e,a);if(n=t.strong.get(u)){if(!(n=n.n))return!1}else{if(!(n=t.dead_weak&&t.dead_weak.get(u)||t.dead_strong.get(u)))return k.luaG_runerror(e,T("invalid key to 'next'"));do{if(!(n=n.n))return!1}while(n.key.ttisdeadkey())}}return O.setobj2s(e,r,n.key),O.setobj2s(e,r+1,n.value),!0},e.exports.Table=S},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1),u=a.is_luastring,s=a.luastring_eq,o=a.luastring_from,l=a.to_luastring,i=r(4).lua_assert,c=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hash=null,this.realstring=r}var t,r,a;return t=e,(r=[{key:"getstr",value:function(){return this.realstring}},{key:"tsslen",value:function(){return this.realstring.length}}])&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(),f=function(e){i(u(e));for(var t=e.length,r="|",n=0;n<t;n++)r+=e[n].toString(16);return r},_=function(e,t){return i(t instanceof Uint8Array),new c(e,t)};e.exports.luaS_eqlngstr=function(e,t){return i(e instanceof c),i(t instanceof c),e==t||s(e.realstring,t.realstring)},e.exports.luaS_hash=f,e.exports.luaS_hashlongstr=function(e){return i(e instanceof c),null===e.hash&&(e.hash=f(e.getstr())),e.hash},e.exports.luaS_bless=_,e.exports.luaS_new=function(e,t){return _(e,o(t))},e.exports.luaS_newliteral=function(e,t){return _(e,l(t))},e.exports.TString=c},function(e,t,r){"use strict";var n=r(1),a=n.LUA_HOOKCOUNT,u=n.LUA_HOOKLINE,s=n.LUA_MASKCOUNT,o=n.LUA_MASKLINE,l=n.constant_types,i=l.LUA_TBOOLEAN,c=l.LUA_TNIL,f=l.LUA_TTABLE,_=n.thread_status,p=_.LUA_ERRRUN,v=_.LUA_YIELD,h=n.from_userstring,d=n.luastring_eq,L=n.luastring_indexOf,A=n.to_luastring,g=r(4),b=g.api_check,T=g.lua_assert,x=r(3).LUA_IDSIZE,k=r(19),O=r(8),E=r(13),m=r(21),U=r(6),y=r(16),N=r(12),R=r(9),w=r(14),S=r(15),I=function(e){return T(e.callstatus&N.CIST_LUA),e.l_savedpc-1},M=function(e){return 0!==e.func.value.p.lineinfo.length?e.func.value.p.lineinfo[I(e)]:-1},P=function(e){if(e.status===v){var t=e.ci,r=t.funcOff;t.func=e.stack[t.extra],t.funcOff=t.extra,t.extra=r}},C=function(e,t){T(t<e.upvalues.length);var r=e.upvalues[t].name;return null===r?A("?",!0):r.getstr()},D=function(e,t,r){var n,a=null;if(t.callstatus&N.CIST_LUA){if(r<0)return function(e,t){var r=e.func.value.p.numparams;return t>=e.l_base-e.funcOff-r?null:{pos:e.funcOff+r+t,name:A("(*vararg)",!0)}}(t,-r);n=t.l_base,a=E.luaF_getlocalname(t.func.value.p,r,I(t))}else n=t.funcOff+1;if(null===a){if(!((t===e.ci?e.top:t.next.funcOff)-n>=r&&r>0))return null;a=A("(*temporary)",!0)}return{pos:n+(r-1),name:a}},V=function(e,t){if(null===t||t instanceof U.CClosure)e.source=A("=[JS]",!0),e.linedefined=-1,e.lastlinedefined=-1,e.what=A("J",!0);else{var r=t.p;e.source=r.source?r.source.getstr():A("=?",!0),e.linedefined=r.linedefined,e.lastlinedefined=r.lastlinedefined,e.what=0===e.linedefined?A("main",!0):A("Lua",!0)}e.short_src=U.luaO_chunkid(e.source,x)},B=function(e,t){var r={name:null,funcname:null};return null===t?null:t.callstatus&N.CIST_FIN?(r.name=A("__gc",!0),r.funcname=A("metamethod",!0),r):!(t.callstatus&N.CIST_TAIL)&&t.previous.callstatus&N.CIST_LUA?j(e,t.previous):null},G=function(e,t,r){var n={name:null,funcname:null};if(y.ISK(r)){var a=e.k[y.INDEXK(r)];if(a.ttisstring())return n.name=a.svalue(),n}else{var u=F(e,t,r);if(u&&99===u.funcname[0])return u}return n.name=A("?",!0),n},K=function(e,t){return e<t?-1:e},F=function e(t,r,n){var a={name:E.luaF_getlocalname(t,n+1,r),funcname:null};if(a.name)return a.funcname=A("local",!0),a;var u=function(e,t,r){for(var n=-1,a=0,u=y.OpCodesI,s=0;s<t;s++){var o=e.code[s],l=o.A;switch(o.opcode){case u.OP_LOADNIL:var i=o.B;l<=r&&r<=l+i&&(n=K(s,a));break;case u.OP_TFORCALL:r>=l+2&&(n=K(s,a));break;case u.OP_CALL:case u.OP_TAILCALL:r>=l&&(n=K(s,a));break;case u.OP_JMP:var c=s+1+o.sBx;s<c&&c<=t&&c>a&&(a=c);break;default:y.testAMode(o.opcode)&&r===l&&(n=K(s,a))}}return n}(t,r,n),s=y.OpCodesI;if(-1!==u){var o=t.code[u];switch(o.opcode){case s.OP_MOVE:var l=o.B;if(l<o.A)return e(t,u,l);break;case s.OP_GETTABUP:case s.OP_GETTABLE:var i=o.C,c=o.B,f=o.opcode===s.OP_GETTABLE?E.luaF_getlocalname(t,c+1,u):C(t,c);return a.name=G(t,u,i).name,a.funcname=f&&d(f,m.LUA_ENV)?A("global",!0):A("field",!0),a;case s.OP_GETUPVAL:return a.name=C(t,o.B),a.funcname=A("upvalue",!0),a;case s.OP_LOADK:case s.OP_LOADKX:var _=o.opcode===s.OP_LOADK?o.Bx:t.code[u+1].Ax;if(t.k[_].ttisstring())return a.name=t.k[_].svalue(),a.funcname=A("constant",!0),a;break;case s.OP_SELF:var p=o.C;return a.name=G(t,u,p).name,a.funcname=A("method",!0),a}}return null},j=function(e,t){var r={name:null,funcname:null},n=0,a=t.func.value.p,u=I(t),s=a.code[u],o=y.OpCodesI;if(t.callstatus&N.CIST_HOOKED)return r.name=A("?",!0),r.funcname=A("hook",!0),r;switch(s.opcode){case o.OP_CALL:case o.OP_TAILCALL:return F(a,u,s.A);case o.OP_TFORCALL:return r.name=A("for iterator",!0),r.funcname=A("for iterator",!0),r;case o.OP_SELF:case o.OP_GETTABUP:case o.OP_GETTABLE:n=w.TMS.TM_INDEX;break;case o.OP_SETTABUP:case o.OP_SETTABLE:n=w.TMS.TM_NEWINDEX;break;case o.OP_ADD:n=w.TMS.TM_ADD;break;case o.OP_SUB:n=w.TMS.TM_SUB;break;case o.OP_MUL:n=w.TMS.TM_MUL;break;case o.OP_MOD:n=w.TMS.TM_MOD;break;case o.OP_POW:n=w.TMS.TM_POW;break;case o.OP_DIV:n=w.TMS.TM_DIV;break;case o.OP_IDIV:n=w.TMS.TM_IDIV;break;case o.OP_BAND:n=w.TMS.TM_BAND;break;case o.OP_BOR:n=w.TMS.TM_BOR;break;case o.OP_BXOR:n=w.TMS.TM_BXOR;break;case o.OP_SHL:n=w.TMS.TM_SHL;break;case o.OP_SHR:n=w.TMS.TM_SHR;break;case o.OP_UNM:n=w.TMS.TM_UNM;break;case o.OP_BNOT:n=w.TMS.TM_BNOT;break;case o.OP_LEN:n=w.TMS.TM_LEN;break;case o.OP_CONCAT:n=w.TMS.TM_CONCAT;break;case o.OP_EQ:n=w.TMS.TM_EQ;break;case o.OP_LT:n=w.TMS.TM_LT;break;case o.OP_LE:n=w.TMS.TM_LE;break;default:return null}return r.name=e.l_G.tmname[n].getstr(),r.funcname=A("metamethod",!0),r},H=function(e,t){var r=e.ci,n=null;if(r.callstatus&N.CIST_LUA){n=function(e,t,r){for(var n=t.func.value,a=0;a<n.nupvalues;a++)if(n.upvals[a]===r)return{name:C(n.p,a),funcname:A("upvalue",!0)};return null}(0,r,t);var a=function(e,t,r){for(var n=t.l_base;n<t.top;n++)if(e.stack[n]===r)return n;return!1}(e,r,t);!n&&a&&(n=F(r.func.value.p,I(r),a-r.l_base))}return n?U.luaO_pushfstring(e,A(" (%s '%s')",!0),n.funcname,n.name):A("",!0)},X=function(e,t,r){var n=w.luaT_objtypename(e,t);Y(e,A("attempt to %s a %s value%s",!0),r,n,H(e,t))},z=function(e,t,r,n){var a;return a=r?U.luaO_chunkid(r.getstr(),x):A("?",!0),U.luaO_pushfstring(e,A("%s:%d: %s",!0),a,n,t)},Y=function(e,t){for(var r=e.ci,n=arguments.length,a=new Array(n>2?n-2:0),u=2;u<n;u++)a[u-2]=arguments[u];var s=U.luaO_pushvfstring(e,t,a);r.callstatus&N.CIST_LUA&&z(e,s,r.func.value.p.source,M(r)),J(e)},J=function(e){if(0!==e.errfunc){var t=e.errfunc;U.pushobj2s(e,e.stack[e.top-1]),U.setobjs2s(e,e.top-2,t),O.luaD_callnoyield(e,e.top-2,1)}O.luaD_throw(e,p)};e.exports.luaG_addinfo=z,e.exports.luaG_concaterror=function(e,t,r){(t.ttisstring()||S.cvt2str(t))&&(t=r),X(e,t,A("concatenate",!0))},e.exports.luaG_errormsg=J,e.exports.luaG_opinterror=function(e,t,r,n){!1===S.tonumber(t)&&(r=t),X(e,r,n)},e.exports.luaG_ordererror=function(e,t,r){var n=w.luaT_objtypename(e,t),a=w.luaT_objtypename(e,r);d(n,a)?Y(e,A("attempt to compare two %s values",!0),n):Y(e,A("attempt to compare %s with %s",!0),n,a)},e.exports.luaG_runerror=Y,e.exports.luaG_tointerror=function(e,t,r){!1===S.tointeger(t)&&(r=t),Y(e,A("number%s has no integer representation",!0),H(e,r))},e.exports.luaG_traceexec=function(e){var t=e.ci,r=e.hookmask,n=0==--e.hookcount&&r&s;if(n)e.hookcount=e.basehookcount;else if(!(r&o))return;if(t.callstatus&N.CIST_HOOKYIELD)t.callstatus&=~N.CIST_HOOKYIELD;else{if(n&&O.luaD_hook(e,a,-1),r&o){var l=t.func.value.p,i=t.l_savedpc-1,c=0!==l.lineinfo.length?l.lineinfo[i]:-1;(0===i||t.l_savedpc<=e.oldpc||c!==(0!==l.lineinfo.length?l.lineinfo[e.oldpc-1]:-1))&&O.luaD_hook(e,u,c)}e.oldpc=t.l_savedpc,e.status===v&&(n&&(e.hookcount=1),t.l_savedpc--,t.callstatus|=N.CIST_HOOKYIELD,t.funcOff=e.top-1,t.func=e.stack[t.funcOff],O.luaD_throw(e,v))}},e.exports.luaG_typeerror=X,e.exports.lua_gethook=function(e){return e.hook},e.exports.lua_gethookcount=function(e){return e.basehookcount},e.exports.lua_gethookmask=function(e){return e.hookmask},e.exports.lua_getinfo=function(e,t,r){var n,a,u,s;return t=h(t),P(e),62===t[0]?(u=null,s=e.stack[e.top-1],b(e,s.ttisfunction(),"function expected"),t=t.subarray(1),e.top--):(s=(u=r.i_ci).func,T(u.func.ttisfunction())),n=function(e,t,r,n,a){for(var u=1;t.length>0;t=t.subarray(1))switch(t[0]){case 83:V(r,n);break;case 108:r.currentline=a&&a.callstatus&N.CIST_LUA?M(a):-1;break;case 117:r.nups=null===n?0:n.nupvalues,null===n||n instanceof U.CClosure?(r.isvararg=!0,r.nparams=0):(r.isvararg=n.p.is_vararg,r.nparams=n.p.numparams);break;case 116:r.istailcall=a?a.callstatus&N.CIST_TAIL:0;break;case 110:var s=B(e,a);null===s?(r.namewhat=A("",!0),r.name=null):(r.namewhat=s.funcname,r.name=s.name);break;case 76:case 102:break;default:u=0}return u}(e,t,r,a=s.ttisclosure()?s.value:null,u),L(t,102)>=0&&(U.pushobj2s(e,s),b(e,e.top<=e.ci.top,"stack overflow")),P(e),L(t,76)>=0&&function(e,t){if(null===t||t instanceof U.CClosure)e.stack[e.top]=new U.TValue(c,null),k.api_incr_top(e);else{var r=t.p.lineinfo,n=R.luaH_new(e);e.stack[e.top]=new U.TValue(f,n),k.api_incr_top(e);for(var a=new U.TValue(i,!0),u=0;u<r.length;u++)R.luaH_setint(n,r[u],a)}}(e,a),n},e.exports.lua_getlocal=function(e,t,r){var n;if(P(e),null===t)n=e.stack[e.top-1].ttisLclosure()?E.luaF_getlocalname(e.stack[e.top-1].value.p,r,0):null;else{var a=D(e,t.i_ci,r);a?(n=a.name,U.pushobj2s(e,e.stack[a.pos]),b(e,e.top<=e.ci.top,"stack overflow")):n=null}return P(e),n},e.exports.lua_getstack=function(e,t,r){var n,a;if(t<0)return 0;for(n=e.ci;t>0&&n!==e.base_ci;n=n.previous)t--;return 0===t&&n!==e.base_ci?(a=1,r.i_ci=n):a=0,a},e.exports.lua_sethook=function(e,t,r,n){null!==t&&0!==r||(r=0,t=null),e.ci.callstatus&N.CIST_LUA&&(e.oldpc=e.ci.l_savedpc),e.hook=t,e.basehookcount=n,e.hookcount=e.basehookcount,e.hookmask=r},e.exports.lua_setlocal=function(e,t,r){var n;P(e);var a=D(e,t.i_ci,r);return a?(n=a.name,U.setobjs2s(e,a.pos,e.top-1),delete e.stack[--e.top]):n=null,P(e),n}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=r(1),o=s.LUA_MINSTACK,l=s.LUA_RIDX_GLOBALS,i=s.LUA_RIDX_MAINTHREAD,c=s.constant_types,f=c.LUA_NUMTAGS,_=c.LUA_TNIL,p=c.LUA_TTABLE,v=c.LUA_TTHREAD,h=s.thread_status.LUA_OK,d=r(6),L=r(8),A=r(19),g=r(9),b=r(14),T=2*o,x=a((function e(){u(this,e),this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN})),k=a((function e(t){u(this,e),this.id=t.id_counter++,this.base_ci=new x,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=t,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.nny=1,this.status=h,this.errfunc=0})),O=a((function e(){u(this,e),this.id_counter=1,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new d.TValue(_,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=new Array(b.TMS.TM_N),this.mt=new Array(f)})),E=function(e){e.ci.next=null},m=function(e,t){e.stack=new Array(T),e.top=0,e.stack_last=T-5;var r=e.base_ci;r.next=r.previous=null,r.callstatus=0,r.funcOff=e.top,r.func=e.stack[e.top],e.stack[e.top++]=new d.TValue(_,null),r.top=e.top+o,e.ci=r},U=function(e){e.ci=e.base_ci,E(e),e.stack=null},y=function(e){var t=e.l_G;m(e),function(e,t){var r=g.luaH_new(e);t.l_registry.sethvalue(r),g.luaH_setint(r,i,new d.TValue(v,e)),g.luaH_setint(r,l,new d.TValue(p,g.luaH_new(e)))}(e,t),b.luaT_init(e),t.version=A.lua_version(null)};e.exports.lua_State=k,e.exports.CallInfo=x,e.exports.CIST_OAH=1,e.exports.CIST_LUA=2,e.exports.CIST_HOOKED=4,e.exports.CIST_FRESH=8,e.exports.CIST_YPCALL=16,e.exports.CIST_TAIL=32,e.exports.CIST_HOOKYIELD=64,e.exports.CIST_LEQ=128,e.exports.CIST_FIN=256,e.exports.EXTRA_STACK=5,e.exports.lua_close=function(e){!function(e){U(e)}(e=e.l_G.mainthread)},e.exports.lua_newstate=function(){var e=new O,t=new k(e);return e.mainthread=t,L.luaD_rawrunprotected(t,y,null)!==h&&(t=null),t},e.exports.lua_newthread=function(e){var t=e.l_G,r=new k(t);return e.stack[e.top]=new d.TValue(v,r),A.api_incr_top(e),r.hookmask=e.hookmask,r.basehookcount=e.basehookcount,r.hook=e.hook,r.hookcount=r.basehookcount,m(r),r},e.exports.luaE_extendCI=function(e){var t=new x;return e.ci.next=t,t.previous=e.ci,t.next=null,e.ci=t,t},e.exports.luaE_freeCI=E,e.exports.luaE_freethread=function(e,t){U(t)}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var u=r(1).constant_types.LUA_TNIL,s=r(6),o=a((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}));e.exports.MAXUPVAL=255,e.exports.Proto=o,e.exports.luaF_findupval=function(e,t){return e.stack[t]},e.exports.luaF_close=function(e,t){for(var r=t;r<e.top;r++){var n=e.stack[r];e.stack[r]=new s.TValue(n.type,n.value)}},e.exports.luaF_getlocalname=function(e,t,r){for(var n=0;n<e.locvars.length&&e.locvars[n].startpc<=r;n++)if(r<e.locvars[n].endpc&&0===--t)return e.locvars[n].varname.getstr();return null},e.exports.luaF_initupvals=function(e,t){for(var r=0;r<t.nupvalues;r++)t.upvals[r]=new s.TValue(u,null)},e.exports.luaF_newLclosure=function(e,t){return new s.LClosure(e,t)}},function(e,t,r){"use strict";var n=r(1),a=n.constant_types,u=a.LUA_TTABLE,s=a.LUA_TUSERDATA,o=n.to_luastring,l=r(4).lua_assert,i=r(6),c=r(8),f=r(12),_=r(10),p=_.luaS_bless,v=_.luaS_new,h=r(9),d=r(11),L=r(15),A=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map((function(e){return o(e)})),g=function(e){return A[e+1]},b={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},T=o("__name",!0),x=function(e,t,r,n,a,u){var s=e.top;if(i.pushobj2s(e,t),i.pushobj2s(e,r),i.pushobj2s(e,n),u||i.pushobj2s(e,a),e.ci.callstatus&f.CIST_LUA?c.luaD_call(e,s,u):c.luaD_callnoyield(e,s,u),u){var o=e.stack[e.top-1];delete e.stack[--e.top],a.setfrom(o)}},k=function(e,t,r,n,a){var u=E(e,t,a);return u.ttisnil()&&(u=E(e,r,a)),!u.ttisnil()&&(x(e,u,t,r,n,1),!0)},O=function(e,t,r){var n=h.luaH_getstr(e,r);return l(t<=b.TM_EQ),n.ttisnil()?(e.flags|=1<<t,null):n},E=function(e,t,r){var n;switch(t.ttnov()){case u:case s:n=t.value.metatable;break;default:n=e.l_G.mt[t.ttnov()]}return n?h.luaH_getstr(n,e.l_G.tmname[r]):i.luaO_nilobject};e.exports.fasttm=function(e,t,r){return null===t||t.flags&1<<r?null:O(t,r,e.l_G.tmname[r])},e.exports.TMS=b,e.exports.luaT_callTM=x,e.exports.luaT_callbinTM=k,e.exports.luaT_trybinTM=function(e,t,r,n,a){if(!k(e,t,r,n,a))switch(a){case b.TM_CONCAT:return d.luaG_concaterror(e,t,r);case b.TM_BAND:case b.TM_BOR:case b.TM_BXOR:case b.TM_SHL:case b.TM_SHR:case b.TM_BNOT:var u=L.tonumber(t),s=L.tonumber(r);return!1!==u&&!1!==s?d.luaG_tointerror(e,t,r):d.luaG_opinterror(e,t,r,o("perform bitwise operation on",!0));default:return d.luaG_opinterror(e,t,r,o("perform arithmetic on",!0))}},e.exports.luaT_callorderTM=function(e,t,r,n){var a=new i.TValue;return k(e,t,r,a,n)?!a.l_isfalse():null},e.exports.luaT_gettm=O,e.exports.luaT_gettmbyobj=E,e.exports.luaT_init=function(e){e.l_G.tmname[b.TM_INDEX]=new v(e,o("__index",!0)),e.l_G.tmname[b.TM_NEWINDEX]=new v(e,o("__newindex",!0)),e.l_G.tmname[b.TM_GC]=new v(e,o("__gc",!0)),e.l_G.tmname[b.TM_MODE]=new v(e,o("__mode",!0)),e.l_G.tmname[b.TM_LEN]=new v(e,o("__len",!0)),e.l_G.tmname[b.TM_EQ]=new v(e,o("__eq",!0)),e.l_G.tmname[b.TM_ADD]=new v(e,o("__add",!0)),e.l_G.tmname[b.TM_SUB]=new v(e,o("__sub",!0)),e.l_G.tmname[b.TM_MUL]=new v(e,o("__mul",!0)),e.l_G.tmname[b.TM_MOD]=new v(e,o("__mod",!0)),e.l_G.tmname[b.TM_POW]=new v(e,o("__pow",!0)),e.l_G.tmname[b.TM_DIV]=new v(e,o("__div",!0)),e.l_G.tmname[b.TM_IDIV]=new v(e,o("__idiv",!0)),e.l_G.tmname[b.TM_BAND]=new v(e,o("__band",!0)),e.l_G.tmname[b.TM_BOR]=new v(e,o("__bor",!0)),e.l_G.tmname[b.TM_BXOR]=new v(e,o("__bxor",!0)),e.l_G.tmname[b.TM_SHL]=new v(e,o("__shl",!0)),e.l_G.tmname[b.TM_SHR]=new v(e,o("__shr",!0)),e.l_G.tmname[b.TM_UNM]=new v(e,o("__unm",!0)),e.l_G.tmname[b.TM_BNOT]=new v(e,o("__bnot",!0)),e.l_G.tmname[b.TM_LT]=new v(e,o("__lt",!0)),e.l_G.tmname[b.TM_LE]=new v(e,o("__le",!0)),e.l_G.tmname[b.TM_CONCAT]=new v(e,o("__concat",!0)),e.l_G.tmname[b.TM_CALL]=new v(e,o("__call",!0))},e.exports.luaT_objtypename=function(e,t){var r;if(t.ttistable()&&null!==(r=t.value.metatable)||t.ttisfulluserdata()&&null!==(r=t.value.metatable)){var n=h.luaH_getstr(r,p(e,T));if(n.ttisstring())return n.svalue()}return g(t.ttnov())},e.exports.ttypename=g},function(e,t,r){"use strict";var n=r(1),a=n.LUA_MASKLINE,u=n.LUA_MASKCOUNT,s=n.LUA_MULTRET,o=n.constant_types,l=o.LUA_TBOOLEAN,i=o.LUA_TLCF,c=o.LUA_TLIGHTUSERDATA,f=o.LUA_TLNGSTR,_=o.LUA_TNIL,p=o.LUA_TNUMBER,v=o.LUA_TNUMFLT,h=o.LUA_TNUMINT,d=o.LUA_TSHRSTR,L=o.LUA_TTABLE,A=o.LUA_TUSERDATA,g=n.to_luastring,b=r(16),T=b.INDEXK,x=b.ISK,k=b.LFIELDS_PER_FLUSH,O=b.OpCodesI,E=O.OP_ADD,m=O.OP_BAND,U=O.OP_BNOT,y=O.OP_BOR,N=O.OP_BXOR,R=O.OP_CALL,w=O.OP_CLOSURE,S=O.OP_CONCAT,I=O.OP_DIV,M=O.OP_EQ,P=O.OP_EXTRAARG,C=O.OP_FORLOOP,D=O.OP_FORPREP,V=O.OP_GETTABLE,B=O.OP_GETTABUP,G=O.OP_GETUPVAL,K=O.OP_IDIV,F=O.OP_JMP,j=O.OP_LE,H=O.OP_LEN,X=O.OP_LOADBOOL,z=O.OP_LOADK,Y=O.OP_LOADKX,J=O.OP_LOADNIL,Z=O.OP_LT,q=O.OP_MOD,W=O.OP_MOVE,Q=O.OP_MUL,$=O.OP_NEWTABLE,ee=O.OP_NOT,te=O.OP_POW,re=O.OP_RETURN,ne=O.OP_SELF,ae=O.OP_SETLIST,ue=O.OP_SETTABLE,se=O.OP_SETTABUP,oe=O.OP_SETUPVAL,le=O.OP_SHL,ie=O.OP_SHR,ce=O.OP_SUB,fe=O.OP_TAILCALL,_e=O.OP_TEST,pe=O.OP_TESTSET,ve=O.OP_TFORCALL,he=O.OP_TFORLOOP,de=O.OP_UNM,Le=O.OP_VARARG,Ae=r(3),ge=Ae.LUA_MAXINTEGER,be=Ae.LUA_MININTEGER,Te=Ae.lua_numbertointeger,xe=r(4),ke=xe.lua_assert,Oe=xe.luai_nummod,Ee=r(6),me=r(13),Ue=r(12),ye=r(10),Ne=ye.luaS_bless,Re=ye.luaS_eqlngstr,we=ye.luaS_hashlongstr,Se=r(8),Ie=r(14),Me=r(9),Pe=r(11),Ce=function(e,t,r){return t+r.A},De=function(e,t,r){return t+r.B},Ve=function(e,t,r,n){return x(n.B)?r[T(n.B)]:e.stack[t+n.B]},Be=function(e,t,r,n){return x(n.C)?r[T(n.C)]:e.stack[t+n.C]},Ge=function(e,t,r,n){var a=r.A;0!==a&&me.luaF_close(e,t.l_base+a-1),t.l_savedpc+=r.sBx+n},Ke=function(e,t){Ge(e,t,t.l_code[t.l_savedpc],1)},Fe=function(e,t,r){if(t.ttisnumber()&&r.ttisnumber())return Ze(t,r)?1:0;if(t.ttisstring()&&r.ttisstring())return We(t.tsvalue(),r.tsvalue())<0?1:0;var n=Ie.luaT_callorderTM(e,t,r,Ie.TMS.TM_LT);return null===n&&Pe.luaG_ordererror(e,t,r),n?1:0},je=function(e,t,r){var n;return t.ttisnumber()&&r.ttisnumber()?qe(t,r)?1:0:t.ttisstring()&&r.ttisstring()?We(t.tsvalue(),r.tsvalue())<=0?1:0:null!==(n=Ie.luaT_callorderTM(e,t,r,Ie.TMS.TM_LE))?n?1:0:(e.ci.callstatus|=Ue.CIST_LEQ,n=Ie.luaT_callorderTM(e,r,t,Ie.TMS.TM_LT),e.ci.callstatus^=Ue.CIST_LEQ,null===n&&Pe.luaG_ordererror(e,t,r),n?0:1)},He=function(e,t,r){if(t.ttype()!==r.ttype())return t.ttnov()!==r.ttnov()||t.ttnov()!==p?0:t.value===r.value?1:0;var n;switch(t.ttype()){case _:return 1;case l:return t.value==r.value?1:0;case c:case h:case v:case i:return t.value===r.value?1:0;case d:case f:return Re(t.tsvalue(),r.tsvalue())?1:0;case A:case L:if(t.value===r.value)return 1;if(null===e)return 0;null===(n=Ie.fasttm(e,t.value.metatable,Ie.TMS.TM_EQ))&&(n=Ie.fasttm(e,r.value.metatable,Ie.TMS.TM_EQ));break;default:return t.value===r.value?1:0}if(null===n)return 0;var a=new Ee.TValue;return Ie.luaT_callTM(e,n,t,r,a,1),a.l_isfalse()?0:1},Xe=function(e,t){var r=!1,n=ze(e,t<0?2:1);if(!1===n){var a=Je(e);if(!1===a)return!1;0<a?(n=ge,t<0&&(r=!0)):(n=be,t>=0&&(r=!0))}return{stopnow:r,ilimit:n}},ze=function e(t,r){if(t.ttisfloat()){var n=t.value,a=Math.floor(n);if(n!==a){if(0===r)return!1;r>1&&(a+=1)}return Te(a)}if(t.ttisinteger())return t.value;if(st(t)){var u=new Ee.TValue;if(Ee.luaO_str2num(t.svalue(),u)===t.vslen()+1)return e(u,r)}return!1},Ye=function(e){return e.ttisinteger()?e.value:ze(e,0)},Je=function(e){if(e.ttnov()===p)return e.value;if(st(e)){var t=new Ee.TValue;if(Ee.luaO_str2num(e.svalue(),t)===e.vslen()+1)return t.value}return!1},Ze=function(e,t){return e.value<t.value},qe=function(e,t){return e.value<=t.value},We=function(e,t){var r=we(e),n=we(t);return r===n?0:r<n?-1:1},Qe=function(e,t,r){var n;switch(r.ttype()){case L:var a=r.value;if(null!==(n=Ie.fasttm(e,a.metatable,Ie.TMS.TM_LEN)))break;return void t.setivalue(Me.luaH_getn(a));case d:case f:return void t.setivalue(r.vslen());default:(n=Ie.luaT_gettmbyobj(e,r,Ie.TMS.TM_LEN)).ttisnil()&&Pe.luaG_typeerror(e,r,g("get length of",!0))}Ie.luaT_callTM(e,n,r,r,t,1)},$e=Math.imul||function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0},et=function(e,t,r){return 0===r&&Pe.luaG_runerror(e,g("attempt to divide by zero")),0|Math.floor(t/r)},tt=function(e,t,r){return 0===r&&Pe.luaG_runerror(e,g("attempt to perform 'n%%0'")),t-Math.floor(t/r)*r|0},rt=function(e,t){return t<0?t<=-32?0:e>>>-t:t>=32?0:e<<t},nt=function(e,t,r,n){var a=e.cache;if(null!==a)for(var u=e.upvalues,s=u.length,o=0;o<s;o++){var l=u[o].instack?r[n+u[o].idx]:t[u[o].idx];if(a.upvals[o]!==l)return null}return a},at=function(e,t,r,n,a){var u=t.upvalues.length,s=t.upvalues,o=new Ee.LClosure(e,u);o.p=t,e.stack[a].setclLvalue(o);for(var l=0;l<u;l++)s[l].instack?o.upvals[l]=me.luaF_findupval(e,n+s[l].idx):o.upvals[l]=r[s[l].idx];t.cache=o},ut=function(e){return e.ttisnumber()},st=function(e){return e.ttisstring()},ot=function(e,t){var r=e.stack[t];return!!r.ttisstring()||!!ut(r)&&(Ee.luaO_tostring(e,r),!0)},lt=function(e){return e.ttisstring()&&0===e.vslen()},it=function(e,t,r,n){var a=0;do{var u=e.stack[t-r],s=u.vslen(),o=u.svalue();n.set(o,a),a+=s}while(--r>0)},ct=function(e,t){ke(t>=2);do{var r=e.top,n=2;if((e.stack[r-2].ttisstring()||ut(e.stack[r-2]))&&ot(e,r-1))if(lt(e.stack[r-1]))ot(e,r-2);else if(lt(e.stack[r-2]))Ee.setobjs2s(e,r-2,r-1);else{var a=e.stack[r-1].vslen();for(n=1;n<t&&ot(e,r-n-1);n++){a+=e.stack[r-n-1].vslen()}var u=new Uint8Array(a);it(e,r,n,u);var s=Ne(e,u);Ee.setsvalue2s(e,r-n,s)}else Ie.luaT_trybinTM(e,e.stack[r-2],e.stack[r-1],e.stack[r-2],Ie.TMS.TM_CONCAT);for(t-=n-1;e.top>r-(n-1);)delete e.stack[--e.top]}while(t>1)},ft=function(e,t,r,n){for(var a=0;a<2e3;a++){var u=void 0;if(t.ttistable()){var s=Me.luaH_get(e,t.value,r);if(!s.ttisnil())return void Ee.setobj2s(e,n,s);if(null===(u=Ie.fasttm(e,t.value.metatable,Ie.TMS.TM_INDEX)))return void e.stack[n].setnilvalue()}else(u=Ie.luaT_gettmbyobj(e,t,Ie.TMS.TM_INDEX)).ttisnil()&&Pe.luaG_typeerror(e,t,g("index",!0));if(u.ttisfunction())return void Ie.luaT_callTM(e,u,t,r,e.stack[n],1);t=u}Pe.luaG_runerror(e,g("'__index' chain too long; possible loop",!0))},_t=function(e,t,r,n){for(var a=0;a<2e3;a++){var u=void 0;if(t.ttistable()){var s=t.value;if(!Me.luaH_get(e,s,r).ttisnil()||null===(u=Ie.fasttm(e,s.metatable,Ie.TMS.TM_NEWINDEX)))return Me.luaH_setfrom(e,s,r,n),void Me.invalidateTMcache(s)}else(u=Ie.luaT_gettmbyobj(e,t,Ie.TMS.TM_NEWINDEX)).ttisnil()&&Pe.luaG_typeerror(e,t,g("index",!0));if(u.ttisfunction())return void Ie.luaT_callTM(e,u,t,r,n,0);t=u}Pe.luaG_runerror(e,g("'__newindex' chain too long; possible loop",!0))};e.exports.cvt2str=ut,e.exports.cvt2num=st,e.exports.luaV_gettable=ft,e.exports.luaV_concat=ct,e.exports.luaV_div=et,e.exports.luaV_equalobj=He,e.exports.luaV_execute=function(e){var t=e.ci;t.callstatus|=Ue.CIST_FRESH;e:for(;;){ke(t===e.ci);var r=t.func.value,n=r.p.k,o=t.l_base,l=t.l_code[t.l_savedpc++];e.hookmask&(a|u)&&Pe.luaG_traceexec(e);var i=Ce(0,o,l);switch(l.opcode){case W:Ee.setobjs2s(e,i,De(0,o,l));break;case z:var c=n[l.Bx];Ee.setobj2s(e,i,c);break;case Y:ke(t.l_code[t.l_savedpc].opcode===P);var f=n[t.l_code[t.l_savedpc++].Ax];Ee.setobj2s(e,i,f);break;case X:e.stack[i].setbvalue(0!==l.B),0!==l.C&&t.l_savedpc++;break;case J:for(var _=0;_<=l.B;_++)e.stack[i+_].setnilvalue();break;case G:var p=l.B;Ee.setobj2s(e,i,r.upvals[p]);break;case B:var v=r.upvals[l.B],h=Be(e,o,n,l);ft(e,v,h,i);break;case V:var d=e.stack[De(0,o,l)],L=Be(e,o,n,l);ft(e,d,L,i);break;case se:var A=r.upvals[l.A],b=Ve(e,o,n,l),T=Be(e,o,n,l);_t(e,A,b,T);break;case oe:r.upvals[l.B].setfrom(e.stack[i]);break;case ue:var x=e.stack[i],O=Ve(e,o,n,l),Ae=Be(e,o,n,l);_t(e,x,O,Ae);break;case $:e.stack[i].sethvalue(Me.luaH_new(e));break;case ne:var ge=De(0,o,l),be=Be(e,o,n,l);Ee.setobjs2s(e,i+1,ge),ft(e,e.stack[ge],be,i);break;case E:var Te=Ve(e,o,n,l),xe=Be(e,o,n,l),ye=void 0,Ne=void 0;Te.ttisinteger()&&xe.ttisinteger()?e.stack[i].setivalue(Te.value+xe.value|0):!1!==(ye=Je(Te))&&!1!==(Ne=Je(xe))?e.stack[i].setfltvalue(ye+Ne):Ie.luaT_trybinTM(e,Te,xe,e.stack[i],Ie.TMS.TM_ADD);break;case ce:var Re=Ve(e,o,n,l),we=Be(e,o,n,l),ze=void 0,Ze=void 0;Re.ttisinteger()&&we.ttisinteger()?e.stack[i].setivalue(Re.value-we.value|0):!1!==(ze=Je(Re))&&!1!==(Ze=Je(we))?e.stack[i].setfltvalue(ze-Ze):Ie.luaT_trybinTM(e,Re,we,e.stack[i],Ie.TMS.TM_SUB);break;case Q:var qe=Ve(e,o,n,l),We=Be(e,o,n,l),ut=void 0,st=void 0;qe.ttisinteger()&&We.ttisinteger()?e.stack[i].setivalue($e(qe.value,We.value)):!1!==(ut=Je(qe))&&!1!==(st=Je(We))?e.stack[i].setfltvalue(ut*st):Ie.luaT_trybinTM(e,qe,We,e.stack[i],Ie.TMS.TM_MUL);break;case q:var ot=Ve(e,o,n,l),lt=Be(e,o,n,l),it=void 0,pt=void 0;ot.ttisinteger()&&lt.ttisinteger()?e.stack[i].setivalue(tt(e,ot.value,lt.value)):!1!==(it=Je(ot))&&!1!==(pt=Je(lt))?e.stack[i].setfltvalue(Oe(e,it,pt)):Ie.luaT_trybinTM(e,ot,lt,e.stack[i],Ie.TMS.TM_MOD);break;case te:var vt,ht=Ve(e,o,n,l),dt=Be(e,o,n,l),Lt=void 0;!1!==(vt=Je(ht))&&!1!==(Lt=Je(dt))?e.stack[i].setfltvalue(Math.pow(vt,Lt)):Ie.luaT_trybinTM(e,ht,dt,e.stack[i],Ie.TMS.TM_POW);break;case I:var At,gt=Ve(e,o,n,l),bt=Be(e,o,n,l),Tt=void 0;!1!==(At=Je(gt))&&!1!==(Tt=Je(bt))?e.stack[i].setfltvalue(At/Tt):Ie.luaT_trybinTM(e,gt,bt,e.stack[i],Ie.TMS.TM_DIV);break;case K:var xt=Ve(e,o,n,l),kt=Be(e,o,n,l),Ot=void 0,Et=void 0;xt.ttisinteger()&&kt.ttisinteger()?e.stack[i].setivalue(et(e,xt.value,kt.value)):!1!==(Ot=Je(xt))&&!1!==(Et=Je(kt))?e.stack[i].setfltvalue(Math.floor(Ot/Et)):Ie.luaT_trybinTM(e,xt,kt,e.stack[i],Ie.TMS.TM_IDIV);break;case m:var mt,Ut=Ve(e,o,n,l),yt=Be(e,o,n,l),Nt=void 0;!1!==(mt=Ye(Ut))&&!1!==(Nt=Ye(yt))?e.stack[i].setivalue(mt&Nt):Ie.luaT_trybinTM(e,Ut,yt,e.stack[i],Ie.TMS.TM_BAND);break;case y:var Rt,wt=Ve(e,o,n,l),St=Be(e,o,n,l),It=void 0;!1!==(Rt=Ye(wt))&&!1!==(It=Ye(St))?e.stack[i].setivalue(Rt|It):Ie.luaT_trybinTM(e,wt,St,e.stack[i],Ie.TMS.TM_BOR);break;case N:var Mt,Pt=Ve(e,o,n,l),Ct=Be(e,o,n,l),Dt=void 0;!1!==(Mt=Ye(Pt))&&!1!==(Dt=Ye(Ct))?e.stack[i].setivalue(Mt^Dt):Ie.luaT_trybinTM(e,Pt,Ct,e.stack[i],Ie.TMS.TM_BXOR);break;case le:var Vt,Bt=Ve(e,o,n,l),Gt=Be(e,o,n,l),Kt=void 0;!1!==(Vt=Ye(Bt))&&!1!==(Kt=Ye(Gt))?e.stack[i].setivalue(rt(Vt,Kt)):Ie.luaT_trybinTM(e,Bt,Gt,e.stack[i],Ie.TMS.TM_SHL);break;case ie:var Ft,jt=Ve(e,o,n,l),Ht=Be(e,o,n,l),Xt=void 0;!1!==(Ft=Ye(jt))&&!1!==(Xt=Ye(Ht))?e.stack[i].setivalue(rt(Ft,-Xt)):Ie.luaT_trybinTM(e,jt,Ht,e.stack[i],Ie.TMS.TM_SHR);break;case de:var zt=e.stack[De(0,o,l)],Yt=void 0;zt.ttisinteger()?e.stack[i].setivalue(0|-zt.value):!1!==(Yt=Je(zt))?e.stack[i].setfltvalue(-Yt):Ie.luaT_trybinTM(e,zt,zt,e.stack[i],Ie.TMS.TM_UNM);break;case U:var Jt=e.stack[De(0,o,l)];Jt.ttisinteger()?e.stack[i].setivalue(~Jt.value):Ie.luaT_trybinTM(e,Jt,Jt,e.stack[i],Ie.TMS.TM_BNOT);break;case ee:var Zt=e.stack[De(0,o,l)];e.stack[i].setbvalue(Zt.l_isfalse());break;case H:Qe(e,e.stack[i],e.stack[De(0,o,l)]);break;case S:var qt=l.B,Wt=l.C;e.top=o+Wt+1,ct(e,Wt-qt+1);var Qt=o+qt;Ee.setobjs2s(e,i,Qt),Se.adjust_top(e,t.top);break;case F:Ge(e,t,l,0);break;case M:He(e,Ve(e,o,n,l),Be(e,o,n,l))!==l.A?t.l_savedpc++:Ke(e,t);break;case Z:Fe(e,Ve(e,o,n,l),Be(e,o,n,l))!==l.A?t.l_savedpc++:Ke(e,t);break;case j:je(e,Ve(e,o,n,l),Be(e,o,n,l))!==l.A?t.l_savedpc++:Ke(e,t);break;case _e:(l.C?e.stack[i].l_isfalse():!e.stack[i].l_isfalse())?t.l_savedpc++:Ke(e,t);break;case pe:var $t=De(0,o,l),er=e.stack[$t];(l.C?er.l_isfalse():!er.l_isfalse())?t.l_savedpc++:(Ee.setobjs2s(e,i,$t),Ke(e,t));break;case R:var tr=l.B,rr=l.C-1;if(0!==tr&&Se.adjust_top(e,i+tr),!Se.luaD_precall(e,i,rr)){t=e.ci;continue e}rr>=0&&Se.adjust_top(e,t.top);break;case fe:var nr=l.B;if(0!==nr&&Se.adjust_top(e,i+nr),!Se.luaD_precall(e,i,s)){var ar=e.ci,ur=ar.previous,sr=ar.func,or=ar.funcOff,lr=ur.funcOff,ir=ar.l_base+sr.value.p.numparams;r.p.p.length>0&&me.luaF_close(e,ur.l_base);for(var cr=0;or+cr<ir;cr++)Ee.setobjs2s(e,lr+cr,or+cr);ur.l_base=lr+(ar.l_base-or),ur.top=lr+(e.top-or),Se.adjust_top(e,ur.top),ur.l_code=ar.l_code,ur.l_savedpc=ar.l_savedpc,ur.callstatus|=Ue.CIST_TAIL,ur.next=null,t=e.ci=ur,ke(e.top===ur.l_base+e.stack[lr].value.p.maxstacksize);continue e}break;case re:r.p.p.length>0&&me.luaF_close(e,o);var fr=Se.luaD_poscall(e,t,i,0!==l.B?l.B-1:e.top-i);if(t.callstatus&Ue.CIST_FRESH)return;t=e.ci,fr&&Se.adjust_top(e,t.top),ke(t.callstatus&Ue.CIST_LUA),ke(t.l_code[t.l_savedpc-1].opcode===R);continue e;case C:if(e.stack[i].ttisinteger()){var _r=e.stack[i+2].value,pr=e.stack[i].value+_r|0,vr=e.stack[i+1].value;(0<_r?pr<=vr:vr<=pr)&&(t.l_savedpc+=l.sBx,e.stack[i].chgivalue(pr),e.stack[i+3].setivalue(pr))}else{var hr=e.stack[i+2].value,dr=e.stack[i].value+hr,Lr=e.stack[i+1].value;(0<hr?dr<=Lr:Lr<=dr)&&(t.l_savedpc+=l.sBx,e.stack[i].chgfltvalue(dr),e.stack[i+3].setfltvalue(dr))}break;case D:var Ar=e.stack[i],gr=e.stack[i+1],br=e.stack[i+2],Tr=void 0;if(Ar.ttisinteger()&&br.ttisinteger()&&(Tr=Xe(gr,br.value))){var xr=Tr.stopnow?0:Ar.value;gr.value=Tr.ilimit,Ar.value=xr-br.value|0}else{var kr,Or,Er;!1===(kr=Je(gr))&&Pe.luaG_runerror(e,g("'for' limit must be a number",!0)),e.stack[i+1].setfltvalue(kr),!1===(Or=Je(br))&&Pe.luaG_runerror(e,g("'for' step must be a number",!0)),e.stack[i+2].setfltvalue(Or),!1===(Er=Je(Ar))&&Pe.luaG_runerror(e,g("'for' initial value must be a number",!0)),e.stack[i].setfltvalue(Er-Or)}t.l_savedpc+=l.sBx;break;case ve:var mr=i+3;Ee.setobjs2s(e,mr+2,i+2),Ee.setobjs2s(e,mr+1,i+1),Ee.setobjs2s(e,mr,i),Se.adjust_top(e,mr+3),Se.luaD_call(e,mr,l.C),Se.adjust_top(e,t.top),l=t.l_code[t.l_savedpc++],i=Ce(0,o,l),ke(l.opcode===he);case he:e.stack[i+1].ttisnil()||(Ee.setobjs2s(e,i,i+1),t.l_savedpc+=l.sBx);break;case ae:var Ur=l.B,yr=l.C;0===Ur&&(Ur=e.top-i-1),0===yr&&(ke(t.l_code[t.l_savedpc].opcode===P),yr=t.l_code[t.l_savedpc++].Ax);for(var Nr=e.stack[i].value,Rr=(yr-1)*k+Ur;Ur>0;Ur--)Me.luaH_setint(Nr,Rr--,e.stack[i+Ur]);Se.adjust_top(e,t.top);break;case w:var wr=r.p.p[l.Bx],Sr=nt(wr,r.upvals,e.stack,o);null===Sr?at(e,wr,r.upvals,o,i):e.stack[i].setclLvalue(Sr);break;case Le:var Ir=l.B-1,Mr=o-t.funcOff-r.p.numparams-1,Pr=void 0;for(Mr<0&&(Mr=0),Ir<0&&(Ir=Mr,Se.luaD_checkstack(e,Mr),Se.adjust_top(e,i+Mr)),Pr=0;Pr<Ir&&Pr<Mr;Pr++)Ee.setobjs2s(e,i+Pr,o-Mr+Pr);for(;Pr<Ir;Pr++)e.stack[i+Pr].setnilvalue();break;case P:throw Error("invalid opcode")}}},e.exports.luaV_finishOp=function(e){var t=e.ci,r=t.l_base,n=t.l_code[t.l_savedpc-1],a=n.opcode;switch(a){case E:case ce:case Q:case I:case K:case m:case y:case N:case le:case ie:case q:case te:case de:case U:case H:case B:case V:case ne:Ee.setobjs2s(e,r+n.A,e.top-1),delete e.stack[--e.top];break;case j:case Z:case M:var u=!e.stack[e.top-1].l_isfalse();delete e.stack[--e.top],t.callstatus&Ue.CIST_LEQ&&(ke(a===j),t.callstatus^=Ue.CIST_LEQ,u=!u),ke(t.l_code[t.l_savedpc].opcode===F),u!==!!n.A&&t.l_savedpc++;break;case S:var s=e.top-1,o=s-1-(r+n.B);Ee.setobjs2s(e,s-2,s),o>1&&(e.top=s-1,ct(e,o)),Ee.setobjs2s(e,t.l_base+n.A,e.top-1),Se.adjust_top(e,t.top);break;case ve:ke(t.l_code[t.l_savedpc].opcode===he),Se.adjust_top(e,t.top);break;case R:n.C-1>=0&&Se.adjust_top(e,t.top)}},e.exports.luaV_imul=$e,e.exports.luaV_lessequal=je,e.exports.luaV_lessthan=Fe,e.exports.luaV_mod=tt,e.exports.luaV_objlen=Qe,e.exports.luaV_rawequalobj=function(e,t){return He(null,e,t)},e.exports.luaV_shiftl=rt,e.exports.luaV_tointeger=ze,e.exports.settable=_t,e.exports.tointeger=Ye,e.exports.tonumber=Je},function(e,t,r){"use strict";var n=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],a=function(e,t){return~(-1<<e)<<t},u=function(e,t){return~a(e,t)},s=function(e,t,r,n){return e.code=e.code&u(n,r)|t<<r&a(n,r),l(e)},o=function(e,t){return s(e,t,14,18)},l=function(e){if("number"==typeof e)return{code:e,opcode:e>>0&a(6,0),A:e>>6&a(8,0),B:e>>23&a(9,0),C:e>>14&a(9,0),Bx:e>>14&a(18,0),Ax:e>>6&a(26,0),sBx:(e>>14&a(18,0))-131071};var t=e.code;return e.opcode=t>>0&a(6,0),e.A=t>>6&a(8,0),e.B=t>>23&a(9,0),e.C=t>>14&a(9,0),e.Bx=t>>14&a(18,0),e.Ax=t>>6&a(26,0),e.sBx=(t>>14&a(18,0))-131071,e};e.exports.BITRK=256,e.exports.CREATE_ABC=function(e,t,r,n){return l(e<<0|t<<6|r<<23|n<<14)},e.exports.CREATE_ABx=function(e,t,r){return l(e<<0|t<<6|r<<14)},e.exports.CREATE_Ax=function(e,t){return l(e<<0|t<<6)},e.exports.GET_OPCODE=function(e){return e.opcode},e.exports.GETARG_A=function(e){return e.A},e.exports.GETARG_B=function(e){return e.B},e.exports.GETARG_C=function(e){return e.C},e.exports.GETARG_Bx=function(e){return e.Bx},e.exports.GETARG_Ax=function(e){return e.Ax},e.exports.GETARG_sBx=function(e){return e.sBx},e.exports.INDEXK=function(e){return-257&e},e.exports.ISK=function(e){return 256&e},e.exports.LFIELDS_PER_FLUSH=50,e.exports.MAXARG_A=255,e.exports.MAXARG_Ax=67108863,e.exports.MAXARG_B=511,e.exports.MAXARG_Bx=262143,e.exports.MAXARG_C=511,e.exports.MAXARG_sBx=131071,e.exports.MAXINDEXRK=255,e.exports.NO_REG=255,e.exports.OpArgK=3,e.exports.OpArgN=0,e.exports.OpArgR=2,e.exports.OpArgU=1,e.exports.OpCodes=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],e.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},e.exports.POS_A=6,e.exports.POS_Ax=6,e.exports.POS_B=23,e.exports.POS_Bx=14,e.exports.POS_C=14,e.exports.POS_OP=0,e.exports.RKASK=function(e){return 256|e},e.exports.SETARG_A=function(e,t){return s(e,t,6,8)},e.exports.SETARG_Ax=function(e,t){return s(e,t,6,26)},e.exports.SETARG_B=function(e,t){return s(e,t,23,9)},e.exports.SETARG_Bx=o,e.exports.SETARG_C=function(e,t){return s(e,t,14,9)},e.exports.SETARG_sBx=function(e,t){return o(e,t+131071)},e.exports.SET_OPCODE=function(e,t){return e.code=e.code&u(6,0)|t<<0&a(6,0),l(e)},e.exports.SIZE_A=8,e.exports.SIZE_Ax=26,e.exports.SIZE_B=9,e.exports.SIZE_Bx=18,e.exports.SIZE_C=9,e.exports.SIZE_OP=6,e.exports.fullins=l,e.exports.getBMode=function(e){return n[e]>>4&3},e.exports.getCMode=function(e){return n[e]>>2&3},e.exports.getOpMode=function(e){return 3&n[e]},e.exports.iABC=0,e.exports.iABx=1,e.exports.iAsBx=2,e.exports.iAx=3,e.exports.testAMode=function(e){return 64&n[e]},e.exports.testTMode=function(e){return 128&n[e]}},function(e,t,r){"use strict";var n=r(2),a="_"+n.LUA_VERSION_MAJOR+"_"+n.LUA_VERSION_MINOR;e.exports.LUA_VERSUFFIX=a,e.exports.lua_assert=function(e){},e.exports.luaopen_base=r(24).luaopen_base;e.exports.LUA_COLIBNAME="coroutine",e.exports.luaopen_coroutine=r(25).luaopen_coroutine;e.exports.LUA_TABLIBNAME="table",e.exports.luaopen_table=r(26).luaopen_table;e.exports.LUA_OSLIBNAME="os",e.exports.luaopen_os=r(27).luaopen_os;e.exports.LUA_STRLIBNAME="string",e.exports.luaopen_string=r(28).luaopen_string;e.exports.LUA_UTF8LIBNAME="utf8",e.exports.luaopen_utf8=r(29).luaopen_utf8;e.exports.LUA_BITLIBNAME="bit32";e.exports.LUA_MATHLIBNAME="math",e.exports.luaopen_math=r(30).luaopen_math;e.exports.LUA_DBLIBNAME="debug",e.exports.luaopen_debug=r(31).luaopen_debug;e.exports.LUA_LOADLIBNAME="package",e.exports.luaopen_package=r(32).luaopen_package;e.exports.LUA_FENGARILIBNAME="fengari",e.exports.luaopen_fengari=r(33).luaopen_fengari;var u=r(39);e.exports.luaL_openlibs=u.luaL_openlibs},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a=r(0),u=a.lua,s=a.lauxlib,o=a.lualib,l=a.to_luastring,i=u.LUA_MULTRET,c=u.LUA_OK,f=u.LUA_REGISTRYINDEX,_=u.LUA_RIDX_MAINTHREAD,p=u.LUA_TBOOLEAN,v=u.LUA_TFUNCTION,h=u.LUA_TLIGHTUSERDATA,d=u.LUA_TNIL,L=u.LUA_TNONE,A=u.LUA_TNUMBER,g=u.LUA_TSTRING,b=u.LUA_TTABLE,T=u.LUA_TTHREAD,x=u.LUA_TUSERDATA,k=u.lua_atnativeerror,O=u.lua_call,E=u.lua_getfield,m=u.lua_gettable,U=u.lua_gettop,y=u.lua_isnil,N=u.lua_isproxy,R=u.lua_newuserdata,w=u.lua_pcall,S=u.lua_pop,I=u.lua_pushboolean,M=u.lua_pushcfunction,P=u.lua_pushinteger,C=u.lua_pushlightuserdata,D=u.lua_pushliteral,V=u.lua_pushnil,B=u.lua_pushnumber,G=u.lua_pushstring,K=u.lua_pushvalue,F=u.lua_rawgeti,j=u.lua_rawgetp,H=u.lua_rawsetp,X=u.lua_rotate,z=u.lua_setfield,Y=u.lua_settable,J=u.lua_settop,Z=u.lua_toboolean,q=u.lua_tojsstring,W=u.lua_tonumber,Q=u.lua_toproxy,$=u.lua_tothread,ee=u.lua_touserdata,te=u.lua_type,re=s.luaL_argerror,ne=s.luaL_checkany,ae=s.luaL_checkoption,ue=s.luaL_checkstack,se=s.luaL_checkudata,oe=s.luaL_error,le=s.luaL_getmetafield,ie=s.luaL_newlib,ce=s.luaL_newmetatable,fe=s.luaL_requiref,_e=s.luaL_setfuncs,pe=s.luaL_setmetatable,ve=s.luaL_testudata,he=s.luaL_tolstring,de=o.luaopen_base;var Le,Ae,ge,be="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:(0,eval)("this");if("undefined"!=typeof Reflect)Le=Reflect.apply,Ae=Reflect.construct,ge=Reflect.deleteProperty;else{var Te=Function.apply,xe=Function.bind;Le=function(e,t,r){return Te.call(e,t,r)},Ae=function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(xe.apply(e,r))},ge=Function("t","k","delete t[k]")}var ke=String.prototype.concat.bind(""),Oe=function(e){return"object"===n(e)?null!==e:"function"==typeof e},Ee=l("js object"),me=function(e,t){var r=ve(e,t,Ee);return r?r.data:void 0},Ue=function(e,t){return se(e,t,Ee).data},ye=function(e,t){R(e).data=t,pe(e,Ee)},Ne=function(e){F(e,f,_);var t=$(e,-1);return S(e,1),t},Re=new WeakMap,we=function(e,t){switch(n(t)){case"undefined":V(e);break;case"number":B(e,t);break;case"string":G(e,l(t));break;case"boolean":I(e,t);break;case"symbol":C(e,t);break;case"function":if(N(t,e)){t(e);break}case"object":if(null===t){if(j(e,f,null)!==x)throw Error("js library not loaded into lua_State");break}default:var r=Re.get(Ne(e));if(!r)throw Error("js library not loaded into lua_State");var a=r.get(t);a?a(e):(ye(e,t),a=Q(e,-1),r.set(t,a))}},Se=function(e){var t=ee(e,1);return we(e,t),1},Ie=function(e,t){switch(te(e,t)){case L:case d:return;case p:return Z(e,t);case h:return ee(e,t);case A:return W(e,t);case g:return q(e,t);case x:var r=me(e,t);if(void 0!==r)return r;case b:case v:case T:default:return je(e,Q(e,t))}},Me=function(e,t){var r=w(e,t,1,0),n=Ie(e,-1);switch(S(e,1),r){case c:return n;default:throw n}},Pe=function(e,t,r,n,a){if(!Oe(n))throw new TypeError("`args` argument must be an object");var u=+n.length;u>=0||(u=0),ue(e,2+u,null);var s=U(e);t(e),we(e,r);for(var o=0;o<u;o++)we(e,n[o]);switch(w(e,1+u,a,0)){case c:for(var l=U(e)-s,i=new Array(l),f=0;f<l;f++)i[f]=Ie(e,s+f+1);return J(e,s),i;default:var _=Ie(e,-1);throw J(e,s),_}},Ce=function(e){return m(e,1),1},De=function(e,t,r){return ue(e,3,null),M(e,Ce),t(e),we(e,r),Me(e,2)},Ve=function(e,t,r){switch(ue(e,3,null),M(e,Ce),t(e),we(e,r),w(e,2,1,0)){case c:var n=y(e,-1);return S(e,1),!n;default:var a=Ie(e,-1);throw S(e,1),a}},Be=function(e,t,r,n){switch(ue(e,4,null),M(e,(function(e){return Y(e,1),0})),t(e),we(e,r),we(e,n),w(e,3,0,0)){case c:return;default:var a=Ie(e,-1);throw S(e,1),a}},Ge=function(e,t,r){switch(ue(e,4,null),M(e,(function(e){return Y(e,1),0})),t(e),we(e,r),V(e),w(e,3,0,0)){case c:return;default:var n=Ie(e,-1);throw S(e,1),n}},Ke=function(e,t){return ue(e,2,null),M(e,(function(e){return he(e,1),1})),t(e),Me(e,1)},Fe=function(){var e=this.L;ue(e,3,null);var t=U(e);switch(this.iter(e),this.state(e),this.last(e),w(e,2,i,0)){case c:var r;if(this.last=Q(e,t+1),y(e,-1))r={done:!0,value:void 0};else{for(var n=U(e)-t,a=new Array(n),u=0;u<n;u++)a[u]=Ie(e,t+u+1);r={done:!1,value:a}}return J(e,t),r;default:var s=Ie(e,-1);throw S(e,1),s}},je=function(e,t){var r=Ne(e),n=function(){return Pe(r,t,this,arguments,1)[0]};n.apply=function(e,n){return Pe(r,t,e,n,1)[0]},n.invoke=function(e,n){return Pe(r,t,e,n,i)},n.get=function(e){return De(r,t,e)},n.has=function(e){return Ve(r,t,e)},n.set=function(e,n){return Be(r,t,e,n)},n.delete=function(e){return Ge(r,t,e)},n.toString=function(){return Ke(r,t)},"function"==typeof Symbol&&(n[Symbol.toStringTag]="Fengari object",n[Symbol.iterator]=function(){return function(e,t){switch(ue(e,1,null),M(e,(function(e){return fe(e,l("_G"),de,0),E(e,-1,l("pairs")),t(e),O(e,1,3),3})),w(e,0,3,0)){case c:var r=Q(e,-3),n=Q(e,-2),a=Q(e,-1);return S(e,3),{L:e,iter:r,state:n,last:a,next:Fe};default:var u=Ie(e,-1);throw S(e,1),u}}(r,t)},Symbol.toPrimitive&&(n[Symbol.toPrimitive]=function(e){if("string"===e)return Ke(r,t)}));var a=Re.get(r);if(!a)throw Error("js library not loaded into lua_State");return a.set(n,t),n},He={new:function(e){for(var t=Ie(e,1),r=U(e)-1,n=new Array(r),a=0;a<r;a++)n[a]=Ie(e,a+2);return we(e,Ae(t,n)),1},tonumber:function(e){var t=Ie(e,1);return B(e,+t),1},tostring:function(e){var t=Ie(e,1);return D(e,ke(t)),1},instanceof:function(e){var t=Ie(e,1),r=Ie(e,2);return I(e,t instanceof r),1},typeof:function e(t){var r=Ie(t,1);return D(t,e(r)),1}};if("function"==typeof Symbol&&Symbol.iterator){var Xe=function(e){var t=Ie(e,1).next();return t.done?0:(we(e,t.value),1)};He.of=function(e){var t=function(e,t){var r=Ue(e,t),n=r[Symbol.iterator];n||re(e,t,l("object not iterable"));var a=Le(n,r,[]);return Oe(a)||re(e,t,l("Result of the Symbol.iterator method is not an object")),a}(e,1);return M(e,Xe),we(e,t),2}}if("function"==typeof Proxy&&"function"==typeof Symbol){var ze=Symbol("lua_State"),Ye=Symbol("fengari-proxy"),Je={apply:function(e,t,r){return Pe(e[ze],e[Ye],t,r,1)[0]},construct:function(e,t){var r=e[ze],n=e[Ye],a=t.length;ue(r,2+a,null),n(r);var u=U(r);if(le(r,u,l("construct"))===d)throw S(r,1),new TypeError("not a constructor");X(r,u,1);for(var s=0;s<a;s++)we(r,t[s]);return Me(r,1+a)},defineProperty:function(e,t,r){var n=e[ze],a=e[Ye];return ue(n,4,null),a(n),le(n,-1,l("defineProperty"))===d?(S(n,1),!1):(X(n,-2,1),we(n,t),we(n,r),Me(n,3))},deleteProperty:function(e,t){return Ge(e[ze],e[Ye],t)},get:function(e,t){return De(e[ze],e[Ye],t)},getOwnPropertyDescriptor:function(e,t){var r=e[ze],n=e[Ye];if(ue(r,3,null),n(r),le(r,-1,l("getOwnPropertyDescriptor"))!==d)return X(r,-2,1),we(r,t),Me(r,2);S(r,1)},getPrototypeOf:function(e){var t=e[ze],r=e[Ye];return ue(t,2,null),r(t),le(t,-1,l("getPrototypeOf"))===d?(S(t,1),null):(X(t,-2,1),Me(t,1))},has:function(e,t){return Ve(e[ze],e[Ye],t)},ownKeys:function(e){var t=e[ze],r=e[Ye];if(ue(t,2,null),r(t),le(t,-1,l("ownKeys"))===d)throw S(t,1),Error("ownKeys unknown for fengari object");return X(t,-2,1),Me(t,1)},set:function(e,t,r){return Be(e[ze],e[Ye],t,r),!0},setPrototypeOf:function(e,t){var r=e[ze],n=e[Ye];return ue(r,3,null),n(r),le(r,-1,l("setPrototypeOf"))===d?(S(r,1),!1):(X(r,-2,1),we(r,t),Me(r,2))}},Ze=function(){return(Ze=Function("return ()=>void 0;"))()},qe=function(e,t,r){var n,a,u=Ne(e);switch(r){case"function":delete(a=function(){}.bind()).length,delete a.name,n=a;break;case"arrow_function":n=function(){var e=Ze();return delete e.length,delete e.name,e}();break;case"object":n={};break;default:throw TypeError("invalid type to createproxy")}return n[Ye]=t,n[ze]=u,new Proxy(n,Je)},We=["function","arrow_function","object"],Qe=We.map((function(e){return l(e)}));He.createproxy=function(e){ne(e,1);var t=We[ae(e,2,Qe[0],Qe)],r=qe(e,Q(e,1),t);return we(e,r),1}}var $e={__index:function(e){var t=Ue(e,1),r=Ie(e,2);return we(e,t[r]),1},__newindex:function(e){var t=Ue(e,1),r=Ie(e,2),n=Ie(e,3);return void 0===n?ge(t,r):t[r]=n,0},__tostring:function(e){var t=Ue(e,1),r=ke(t);return G(e,l(r)),1},__call:function(e){var t,r=Ue(e,1),n=U(e)-1,a=new Array(Math.max(0,n-1));if(n>0&&(t=Ie(e,2),n-- >0))for(var u=0;u<n;u++)a[u]=Ie(e,u+3);return we(e,Le(r,t,a)),1},__pairs:function(e){var t,r,n,a,u=Ue(e,1);if("function"!=typeof Symbol||void 0===(t=u[Symbol.for("__pairs")]))r=function(e){if(!(this.index>=this.keys.length)){var t=this.keys[this.index++];return[t,this.object[t]]}},n={object:u,keys:Object.keys(u),index:0};else{var s=Le(t,u,[]);void 0===s&&oe(e,l("bad '__pairs' result (object with keys 'iter', 'state', 'first' expected)")),void 0===(r=s.iter)&&oe(e,l("bad '__pairs' result (object.iter is missing)")),n=s.state,a=s.first}return M(e,(function(){var t=Ie(e,1),n=Ie(e,2),a=Le(r,t,[n]);if(void 0===a)return 0;Array.isArray(a)||oe(e,l("bad iterator result (Array or undefined expected)")),ue(e,a.length,null);for(var u=0;u<a.length;u++)we(e,a[u]);return a.length})),we(e,n),we(e,a),3},__len:function(e){var t,r,n=Ue(e,1);return r="function"!=typeof Symbol||void 0===(t=n[Symbol.for("__len")])?n.length:Le(t,n,[]),we(e,r),1}};e.exports.FENGARI_INTEROP_VERSION="0.1",e.exports.FENGARI_INTEROP_VERSION_NUM=1,e.exports.FENGARI_INTEROP_RELEASE="0.1.3",e.exports.checkjs=Ue,e.exports.testjs=me,e.exports.pushjs=ye,e.exports.push=we,e.exports.tojs=Ie,e.exports.luaopen_js=function(e){return Re.set(Ne(e),new WeakMap),k(e,Se),ie(e,He),D(e,"0.1"),z(e,-2,l("_VERSION")),P(e,1),z(e,-2,l("_VERSION_NUM")),D(e,"0.1.3"),z(e,-2,l("_RELEASE")),ce(e,Ee),_e(e,$e,0),S(e,1),ye(e,null),K(e,-1),H(e,f,null),z(e,-2,l("null")),we(e,be),z(e,-2,l("global")),1}},function(e,t,r){"use strict";var n=r(1),a=n.LUA_MULTRET,u=n.LUA_OPBNOT,s=n.LUA_OPEQ,o=n.LUA_OPLE,l=n.LUA_OPLT,i=n.LUA_OPUNM,c=n.LUA_REGISTRYINDEX,f=n.LUA_RIDX_GLOBALS,_=n.LUA_VERSION_NUM,p=n.constant_types,v=p.LUA_NUMTAGS,h=p.LUA_TBOOLEAN,d=p.LUA_TCCL,L=p.LUA_TFUNCTION,A=p.LUA_TLCF,g=p.LUA_TLCL,b=p.LUA_TLIGHTUSERDATA,T=p.LUA_TLNGSTR,x=p.LUA_TNIL,k=p.LUA_TNONE,O=p.LUA_TNUMFLT,E=p.LUA_TNUMINT,m=p.LUA_TSHRSTR,U=p.LUA_TTABLE,y=p.LUA_TTHREAD,N=p.LUA_TUSERDATA,R=n.thread_status.LUA_OK,w=n.from_userstring,S=n.to_luastring,I=r(4).api_check,M=r(11),P=r(8),C=r(37).luaU_dump,D=r(13),V=r(6),B=r(12),G=r(10),K=G.luaS_bless,F=G.luaS_new,j=G.luaS_newliteral,H=r(14),X=r(3).LUAI_MAXSTACK,z=r(15),Y=r(9),J=r(20).ZIO,Z=V.TValue,q=V.CClosure,W=function(e){e.top++,I(e,e.top<=e.ci.top,"stack overflow")},Q=function(e,t){I(e,t<e.top-e.ci.funcOff,"not enough elements in the stack")},$=function(e){if(!e)throw TypeError("invalid argument")},ee=function(e){$("number"==typeof e&&(0|e)===e)},te=function(e){return e!==V.luaO_nilobject},re=function(e,t){var r=e.ci;if(t>0){var n=r.funcOff+t;return I(e,t<=r.top-(r.funcOff+1),"unacceptable index"),n>=e.top?V.luaO_nilobject:e.stack[n]}return t>c?(I(e,0!==t&&-t<=e.top,"invalid index"),e.stack[e.top+t]):t===c?e.l_G.l_registry:(I(e,(t=c-t)<=D.MAXUPVAL+1,"upvalue index too large"),r.func.ttislcf()?V.luaO_nilobject:t<=r.func.value.nupvalues?r.func.value.upvalue[t-1]:V.luaO_nilobject)},ne=function(e,t){var r=e.ci;if(t>0){var n=r.funcOff+t;return I(e,t<=r.top-(r.funcOff+1),"unacceptable index"),n>=e.top?null:n}if(t>c)return I(e,0!==t&&-t<=e.top,"invalid index"),e.top+t;throw Error("attempt to use pseudo-index")},ae=function(e,t){var r,n=e.ci.funcOff;t>=0?(I(e,t<=e.stack_last-(n+1),"new top too large"),r=n+1+t):(I(e,-(t+1)<=e.top-(n+1),"invalid new top"),r=e.top+t+1),P.adjust_top(e,r)},ue=function(e,t){ae(e,-t-1)},se=function(e,t,r){for(;t<r;t++,r--){var n=e.stack[t],a=new Z(n.type,n.value);V.setobjs2s(e,t,r),V.setobj2s(e,r,a)}},oe=function(e,t,r){var n=e.top-1,a=ne(e,t),u=e.stack[a];I(e,te(u)&&t>c,"index not in the stack"),I(e,(r>=0?r:-r)<=n-a+1,"invalid 'n'");var s=r>=0?n-r:a-r-1;se(e,a,s),se(e,s+1,e.top-1),se(e,a,e.top-1)},le=function(e,t,r){var n=re(e,t);re(e,r).setfrom(n)},ie=function(e,t,r){if($("function"==typeof t),ee(r),0===r)e.stack[e.top]=new Z(A,t);else{Q(e,r),I(e,r<=D.MAXUPVAL,"upvalue index too large");for(var n=new q(e,t,r),a=0;a<r;a++)n.upvalue[a].setfrom(e.stack[e.top-r+a]);for(var u=1;u<r;u++)delete e.stack[--e.top];r>0&&--e.top,e.stack[e.top].setclCvalue(n)}W(e)},ce=ie,fe=function(e,t){ie(e,t,0)},_e=fe,pe=function(e,t,r){var n=F(e,w(r));Q(e,1),V.pushsvalue2s(e,n),I(e,e.top<=e.ci.top,"stack overflow"),z.settable(e,t,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},ve=function(e,t){pe(e,Y.luaH_getint(e.l_G.l_registry.value,f),t)},he=function(e,t,r){var n=F(e,w(r));return V.pushsvalue2s(e,n),I(e,e.top<=e.ci.top,"stack overflow"),z.luaV_gettable(e,t,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},de=function(e,t,r){var n=re(e,t);return ee(r),I(e,n.ttistable(),"table expected"),V.pushobj2s(e,Y.luaH_getint(n.value,r)),I(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},Le=function(e,t,r){var n=new V.TValue(U,Y.luaH_new(e));e.stack[e.top]=n,W(e)},Ae=function(e,t,r){switch(ee(r),t.ttype()){case d:var n=t.value;return 1<=r&&r<=n.nupvalues?{name:S("",!0),val:n.upvalue[r-1]}:null;case g:var a=t.value,u=a.p;if(!(1<=r&&r<=u.upvalues.length))return null;var s=u.upvalues[r-1].name;return{name:s?s.getstr():S("(*no name)",!0),val:a.upvals[r-1]};default:return null}},ge=function(e,t){var r=re(e,t);if(!r.ttisstring()){if(!z.cvt2str(r))return null;V.luaO_tostring(e,r)}return r.svalue()},be=ge,Te=function(e,t){return z.tointeger(re(e,t))},xe=function(e,t){return z.tonumber(re(e,t))},ke=new WeakMap,Oe=function(e,t){P.luaD_callnoyield(e,t.funcOff,t.nresults)},Ee=function(e,t){var r=re(e,t);return te(r)?r.ttnov():k},me=S("?"),Ue=function(e,t,r){I(e,r===a||e.ci.top-e.top>=r-t,"results from function overflow current stack size")},ye=function(e,t,r,n,u){I(e,null===u||!(e.ci.callstatus&B.CIST_LUA),"cannot use continuations inside hooks"),Q(e,t+1),I(e,e.status===R,"cannot do calls on non-normal thread"),Ue(e,t,r);var s=e.top-(t+1);null!==u&&0===e.nny?(e.ci.c_k=u,e.ci.c_ctx=n,P.luaD_call(e,s,r)):P.luaD_callnoyield(e,s,r),r===a&&e.ci.top<e.top&&(e.ci.top=e.top)},Ne=function(e,t,r,n,u,s){var o,l;I(e,null===s||!(e.ci.callstatus&B.CIST_LUA),"cannot use continuations inside hooks"),Q(e,t+1),I(e,e.status===R,"cannot do calls on non-normal thread"),Ue(e,t,r),l=0===n?0:ne(e,n);var i=e.top-(t+1);if(null===s||e.nny>0){var c={funcOff:i,nresults:r};o=P.luaD_pcall(e,Oe,c,i,l)}else{var f=e.ci;f.c_k=s,f.c_ctx=u,f.extra=i,f.c_old_errfunc=e.errfunc,e.errfunc=l,f.callstatus&=~B.CIST_OAH|e.allowhook,f.callstatus|=B.CIST_YPCALL,P.luaD_call(e,i,r),f.callstatus&=~B.CIST_YPCALL,e.errfunc=f.c_old_errfunc,o=R}return r===a&&e.ci.top<e.top&&(e.ci.top=e.top),o},Re=function(e,t,r){var n=re(e,t);I(e,n.ttisLclosure(),"Lua function expected");var a=n.value;return ee(r),I(e,1<=r&&r<=a.p.upvalues.length,"invalid upvalue index"),{f:a,i:r-1}};e.exports.api_incr_top=W,e.exports.api_checknelems=Q,e.exports.lua_absindex=function(e,t){return t>0||t<=c?t:e.top-e.ci.funcOff+t},e.exports.lua_arith=function(e,t){t!==i&&t!==u?Q(e,2):(Q(e,1),V.pushobj2s(e,e.stack[e.top-1]),I(e,e.top<=e.ci.top,"stack overflow")),V.luaO_arith(e,t,e.stack[e.top-2],e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top]},e.exports.lua_atpanic=function(e,t){var r=e.l_G.panic;return e.l_G.panic=t,r},e.exports.lua_atnativeerror=function(e,t){var r=e.l_G.atnativeerror;return e.l_G.atnativeerror=t,r},e.exports.lua_call=function(e,t,r){ye(e,t,r,0,null)},e.exports.lua_callk=ye,e.exports.lua_checkstack=function(e,t){var r,n=e.ci;(I(e,t>=0,"negative 'n'"),e.stack_last-e.top>t)?r=!0:e.top+B.EXTRA_STACK>X-t?r=!1:(P.luaD_growstack(e,t),r=!0);return r&&n.top<e.top+t&&(n.top=e.top+t),r},e.exports.lua_compare=function(e,t,r,n){var a=re(e,t),u=re(e,r),i=0;if(te(a)&&te(u))switch(n){case s:i=z.luaV_equalobj(e,a,u);break;case l:i=z.luaV_lessthan(e,a,u);break;case o:i=z.luaV_lessequal(e,a,u);break;default:I(e,!1,"invalid option")}return i},e.exports.lua_concat=function(e,t){Q(e,t),t>=2?z.luaV_concat(e,t):0===t&&(V.pushsvalue2s(e,K(e,S("",!0))),I(e,e.top<=e.ci.top,"stack overflow"))},e.exports.lua_copy=le,e.exports.lua_createtable=Le,e.exports.lua_dump=function(e,t,r,n){Q(e,1);var a=e.stack[e.top-1];return a.ttisLclosure()?C(e,a.value.p,t,r,n):1},e.exports.lua_error=function(e){Q(e,1),M.luaG_errormsg(e)},e.exports.lua_gc=function(){},e.exports.lua_getallocf=function(){return console.warn("lua_getallocf is not available"),0},e.exports.lua_getextraspace=function(){return console.warn("lua_getextraspace is not available"),0},e.exports.lua_getfield=function(e,t,r){return he(e,re(e,t),r)},e.exports.lua_getglobal=function(e,t){return he(e,Y.luaH_getint(e.l_G.l_registry.value,f),t)},e.exports.lua_geti=function(e,t,r){var n=re(e,t);return ee(r),e.stack[e.top]=new Z(E,r),W(e),z.luaV_gettable(e,n,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_getmetatable=function(e,t){var r,n=re(e,t),a=!1;switch(n.ttnov()){case U:case N:r=n.value.metatable;break;default:r=e.l_G.mt[n.ttnov()]}return null!=r&&(e.stack[e.top]=new Z(U,r),W(e),a=!0),a},e.exports.lua_gettable=function(e,t){var r=re(e,t);return z.luaV_gettable(e,r,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_gettop=function(e){return e.top-(e.ci.funcOff+1)},e.exports.lua_getupvalue=function(e,t,r){var n=Ae(0,re(e,t),r);if(n){var a=n.name,u=n.val;return V.pushobj2s(e,u),I(e,e.top<=e.ci.top,"stack overflow"),a}return null},e.exports.lua_getuservalue=function(e,t){var r=re(e,t);I(e,r.ttisfulluserdata(),"full userdata expected");var n=r.value.uservalue;return e.stack[e.top]=new Z(n.type,n.value),W(e),e.stack[e.top-1].ttnov()},e.exports.lua_insert=function(e,t){oe(e,t,1)},e.exports.lua_isboolean=function(e,t){return Ee(e,t)===h},e.exports.lua_iscfunction=function(e,t){var r=re(e,t);return r.ttislcf(r)||r.ttisCclosure()},e.exports.lua_isfunction=function(e,t){return Ee(e,t)===L},e.exports.lua_isinteger=function(e,t){return re(e,t).ttisinteger()},e.exports.lua_islightuserdata=function(e,t){return Ee(e,t)===b},e.exports.lua_isnil=function(e,t){return Ee(e,t)===x},e.exports.lua_isnone=function(e,t){return Ee(e,t)===k},e.exports.lua_isnoneornil=function(e,t){return Ee(e,t)<=0},e.exports.lua_isnumber=function(e,t){return!1!==z.tonumber(re(e,t))},e.exports.lua_isproxy=function(e,t){var r=ke.get(e);return!!r&&(null===t||t.l_G===r)},e.exports.lua_isstring=function(e,t){var r=re(e,t);return r.ttisstring()||z.cvt2str(r)},e.exports.lua_istable=function(e,t){return re(e,t).ttistable()},e.exports.lua_isthread=function(e,t){return Ee(e,t)===y},e.exports.lua_isuserdata=function(e,t){var r=re(e,t);return r.ttisfulluserdata(r)||r.ttislightuserdata()},e.exports.lua_len=function(e,t){var r=re(e,t),n=new Z;z.luaV_objlen(e,n,r),e.stack[e.top]=n,W(e)},e.exports.lua_load=function(e,t,r,n,a){n=n?w(n):me,null!==a&&(a=w(a));var u=new J(e,t,r),s=P.luaD_protectedparser(e,u,n,a);if(s===R){var o=e.stack[e.top-1].value;if(o.nupvalues>=1){var l=Y.luaH_getint(e.l_G.l_registry.value,f);o.upvals[0].setfrom(l)}}return s},e.exports.lua_newtable=function(e){Le(e)},e.exports.lua_newuserdata=function(e,t){var r=function(e,t){return new V.Udata(e,t)}(e,t);return e.stack[e.top]=new V.TValue(N,r),W(e),r.data},e.exports.lua_next=function(e,t){var r=re(e,t);return I(e,r.ttistable(),"table expected"),e.stack[e.top]=new Z,Y.luaH_next(e,r.value,e.top-1)?(W(e),1):(delete e.stack[e.top],delete e.stack[--e.top],0)},e.exports.lua_pcall=function(e,t,r,n){return Ne(e,t,r,n,0,null)},e.exports.lua_pcallk=Ne,e.exports.lua_pop=ue,e.exports.lua_pushboolean=function(e,t){e.stack[e.top]=new Z(h,!!t),W(e)},e.exports.lua_pushcclosure=ie,e.exports.lua_pushcfunction=fe,e.exports.lua_pushfstring=function(e,t){t=w(t);for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return V.luaO_pushvfstring(e,t,n)},e.exports.lua_pushglobaltable=function(e){de(e,c,f)},e.exports.lua_pushinteger=function(e,t){ee(t),e.stack[e.top]=new Z(E,t),W(e)},e.exports.lua_pushjsclosure=ce,e.exports.lua_pushjsfunction=_e,e.exports.lua_pushlightuserdata=function(e,t){e.stack[e.top]=new Z(b,t),W(e)},e.exports.lua_pushliteral=function(e,t){if(null==t)e.stack[e.top]=new Z(x,null),e.top++;else{$("string"==typeof t);var r=j(e,t);V.pushsvalue2s(e,r),t=r.getstr()}return I(e,e.top<=e.ci.top,"stack overflow"),t},e.exports.lua_pushlstring=function(e,t,r){var n;return ee(r),0===r?(t=S("",!0),n=K(e,t)):(t=w(t),I(e,t.length>=r,"invalid length to lua_pushlstring"),n=F(e,t.subarray(0,r))),V.pushsvalue2s(e,n),I(e,e.top<=e.ci.top,"stack overflow"),n.value},e.exports.lua_pushnil=function(e){e.stack[e.top]=new Z(x,null),W(e)},e.exports.lua_pushnumber=function(e,t){$("number"==typeof t),e.stack[e.top]=new Z(O,t),W(e)},e.exports.lua_pushstring=function(e,t){if(null==t)e.stack[e.top]=new Z(x,null),e.top++;else{var r=F(e,w(t));V.pushsvalue2s(e,r),t=r.getstr()}return I(e,e.top<=e.ci.top,"stack overflow"),t},e.exports.lua_pushthread=function(e){return e.stack[e.top]=new Z(y,e),W(e),e.l_G.mainthread===e},e.exports.lua_pushvalue=function(e,t){V.pushobj2s(e,re(e,t)),I(e,e.top<=e.ci.top,"stack overflow")},e.exports.lua_pushvfstring=function(e,t,r){return t=w(t),V.luaO_pushvfstring(e,t,r)},e.exports.lua_rawequal=function(e,t,r){var n=re(e,t),a=re(e,r);return te(n)&&te(a)?z.luaV_equalobj(null,n,a):0},e.exports.lua_rawget=function(e,t){var r=re(e,t);return I(e,r.ttistable(r),"table expected"),V.setobj2s(e,e.top-1,Y.luaH_get(e,r.value,e.stack[e.top-1])),e.stack[e.top-1].ttnov()},e.exports.lua_rawgeti=de,e.exports.lua_rawgetp=function(e,t,r){var n=re(e,t);I(e,n.ttistable(),"table expected");var a=new Z(b,r);return V.pushobj2s(e,Y.luaH_get(e,n.value,a)),I(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},e.exports.lua_rawlen=function(e,t){var r=re(e,t);switch(r.ttype()){case m:case T:return r.vslen();case N:return r.value.len;case U:return Y.luaH_getn(r.value);default:return 0}},e.exports.lua_rawset=function(e,t){Q(e,2);var r=re(e,t);I(e,r.ttistable(),"table expected");var n=e.stack[e.top-2],a=e.stack[e.top-1];Y.luaH_setfrom(e,r.value,n,a),Y.invalidateTMcache(r.value),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_rawseti=function(e,t,r){ee(r),Q(e,1);var n=re(e,t);I(e,n.ttistable(),"table expected"),Y.luaH_setint(n.value,r,e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_rawsetp=function(e,t,r){Q(e,1);var n=re(e,t);I(e,n.ttistable(),"table expected");var a=new Z(b,r),u=e.stack[e.top-1];Y.luaH_setfrom(e,n.value,a,u),delete e.stack[--e.top]},e.exports.lua_register=function(e,t,r){fe(e,r),ve(e,t)},e.exports.lua_remove=function(e,t){oe(e,t,-1),ue(e,1)},e.exports.lua_replace=function(e,t){le(e,-1,t),ue(e,1)},e.exports.lua_rotate=oe,e.exports.lua_setallocf=function(){return console.warn("lua_setallocf is not available"),0},e.exports.lua_setfield=function(e,t,r){pe(e,re(e,t),r)},e.exports.lua_setglobal=ve,e.exports.lua_seti=function(e,t,r){ee(r),Q(e,1);var n=re(e,t);e.stack[e.top]=new Z(E,r),W(e),z.settable(e,n,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_setmetatable=function(e,t){var r;Q(e,1);var n=re(e,t);switch(e.stack[e.top-1].ttisnil()?r=null:(I(e,e.stack[e.top-1].ttistable(),"table expected"),r=e.stack[e.top-1].value),n.ttnov()){case N:case U:n.value.metatable=r;break;default:e.l_G.mt[n.ttnov()]=r}return delete e.stack[--e.top],!0},e.exports.lua_settable=function(e,t){Q(e,2);var r=re(e,t);z.settable(e,r,e.stack[e.top-2],e.stack[e.top-1]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_settop=ae,e.exports.lua_setupvalue=function(e,t,r){var n=re(e,t);Q(e,1);var a=Ae(0,n,r);if(a){var u=a.name;return a.val.setfrom(e.stack[e.top-1]),delete e.stack[--e.top],u}return null},e.exports.lua_setuservalue=function(e,t){Q(e,1);var r=re(e,t);I(e,r.ttisfulluserdata(),"full userdata expected"),r.value.uservalue.setfrom(e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_status=function(e){return e.status},e.exports.lua_stringtonumber=function(e,t){var r=new Z,n=V.luaO_str2num(t,r);return 0!==n&&(e.stack[e.top]=r,W(e)),n},e.exports.lua_toboolean=function(e,t){return!re(e,t).l_isfalse()},e.exports.lua_tocfunction=function(e,t){var r=re(e,t);return r.ttislcf()||r.ttisCclosure()?r.value:null},e.exports.lua_todataview=function(e,t){var r=ge(e,t);return new DataView(r.buffer,r.byteOffset,r.byteLength)},e.exports.lua_tointeger=function(e,t){var r=Te(e,t);return!1===r?0:r},e.exports.lua_tointegerx=Te,e.exports.lua_tojsstring=function(e,t){var r=re(e,t);if(!r.ttisstring()){if(!z.cvt2str(r))return null;V.luaO_tostring(e,r)}return r.jsstring()},e.exports.lua_tolstring=ge,e.exports.lua_tonumber=function(e,t){var r=xe(e,t);return!1===r?0:r},e.exports.lua_tonumberx=xe,e.exports.lua_topointer=function(e,t){var r=re(e,t);switch(r.ttype()){case U:case g:case d:case A:case y:case N:case b:return r.value;default:return null}},e.exports.lua_toproxy=function(e,t){var r,n,a,u,s=re(e,t);return r=e.l_G,n=s.type,a=s.value,u=function(e){I(e,e instanceof B.lua_State&&r===e.l_G,"must be from same global state"),e.stack[e.top]=new Z(n,a),W(e)},ke.set(u,r),u},e.exports.lua_tostring=be,e.exports.lua_tothread=function(e,t){var r=re(e,t);return r.ttisthread()?r.value:null},e.exports.lua_touserdata=function(e,t){var r=re(e,t);switch(r.ttnov()){case N:return r.value.data;case b:return r.value;default:return null}},e.exports.lua_type=Ee,e.exports.lua_typename=function(e,t){return I(e,k<=t&&t<v,"invalid tag"),H.ttypename(t)},e.exports.lua_upvalueid=function(e,t,r){var n=re(e,t);switch(n.ttype()){case g:var a=Re(e,t,r);return a.f.upvals[a.i];case d:var u=n.value;return I(e,(0|r)===r&&r>0&&r<=u.nupvalues,"invalid upvalue index"),u.upvalue[r-1];default:return I(e,!1,"closure expected"),null}},e.exports.lua_upvaluejoin=function(e,t,r,n,a){var u=Re(e,t,r),s=Re(e,n,a),o=s.f.upvals[s.i];u.f.upvals[u.i]=o},e.exports.lua_version=function(e){return null===e?_:e.l_G.version},e.exports.lua_xmove=function(e,t,r){if(e!==t){Q(e,r),I(e,e.l_G===t.l_G,"moving among independent states"),I(e,t.ci.top-t.top>=r,"stack overflow"),e.top-=r;for(var n=0;n<r;n++)t.stack[t.top]=new V.TValue,V.setobj2s(t,t.top,e.stack[e.top+n]),delete e.stack[e.top+n],t.top++}}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=r(4).lua_assert,o=a((function e(){u(this,e),this.buffer=null,this.n=0})),l=function(){function e(t,r,n){u(this,e),this.L=t,s("function"==typeof r,"ZIO requires a reader"),this.reader=r,this.data=n,this.n=0,this.buffer=null,this.off=0}return a(e,[{key:"zgetc",value:function(){return this.n-- >0?this.buffer[this.off++]:i(this)}}]),e}(),i=function(e){var t=e.reader(e.L,e.data);if(null===t)return-1;s(t instanceof Uint8Array,"Should only load binary of array of bytes");var r=t.length;return 0===r?-1:(e.buffer=t,e.off=0,e.n=r-1,e.buffer[e.off++])};e.exports.EOZ=-1,e.exports.luaZ_buffer=function(e){return e.buffer.subarray(0,e.n)},e.exports.luaZ_buffremove=function(e,t){e.n-=t},e.exports.luaZ_fill=i,e.exports.luaZ_read=function(e,t,r,n){for(;n;){if(0===e.n){if(-1===i(e))return n;e.n++,e.off--}for(var a=n<=e.n?n:e.n,u=0;u<a;u++)t[r++]=e.buffer[e.off++];e.n-=a,0===e.n&&(e.buffer=null),n-=a}return 0},e.exports.luaZ_resetbuffer=function(e){e.n=0},e.exports.luaZ_resizebuffer=function(e,t,r){var n=new Uint8Array(r);t.buffer&&n.set(t.buffer),t.buffer=n},e.exports.MBuffer=o,e.exports.ZIO=l},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=r(1),o=s.constant_types,l=o.LUA_TBOOLEAN,i=o.LUA_TLNGSTR,c=s.thread_status.LUA_ERRSYNTAX,f=s.to_luastring,_=r(4),p=_.LUA_MINBUFFER,v=_.MAX_INT,h=_.lua_assert,d=r(11),L=r(8),A=r(22),g=A.lisdigit,b=A.lislalnum,T=A.lislalpha,x=A.lisspace,k=A.lisxdigit,O=r(6),E=r(10),m=E.luaS_bless,U=E.luaS_hash,y=E.luaS_hashlongstr,N=E.luaS_new,R=r(9),w=r(20),S=w.EOZ,I=w.luaZ_buffer,M=w.luaZ_buffremove,P=w.luaZ_resetbuffer,C=w.luaZ_resizebuffer,D=f("_ENV",!0),V={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},B=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"].map((function(e,t){return f(e)})),G=a((function e(){u(this,e),this.r=NaN,this.i=NaN,this.ts=null})),K=a((function e(){u(this,e),this.token=NaN,this.seminfo=new G})),F=a((function e(){u(this,e),this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new K,this.lookahead=new K,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null})),j=function(e,t){var r=e.buff;if(r.n+1>r.buffer.length){r.buffer.length>=v/2&&ee(e,f("lexical element too long",!0),0);var n=2*r.buffer.length;C(e.L,r,n)}r.buffer[r.n++]=t<0?255+t+1:t},H=function(e,t){if(t<257)return O.luaO_pushfstring(e.L,f("'%c'",!0),t);var r=B[t-257];return t<289?O.luaO_pushfstring(e.L,f("'%s'",!0),r):r},X=function(e){return 10===e.current||13===e.current},z=function(e){e.current=e.z.zgetc()},Y=function(e){j(e,e.current),z(e)},J=new O.TValue(l,!0),Z=function(e,t){var r=e.L,n=N(r,t),a=e.h.strong.get(y(n));if(a)n=a.key.tsvalue();else{var u=new O.TValue(i,n);R.luaH_setfrom(r,e.h,u,J)}return n},q=function(e){var t=e.current;h(X(e)),z(e),X(e)&&e.current!==t&&z(e),++e.linenumber>=v&&ee(e,f("chunk has too many lines",!0),0)},W=function(e,t){return e.current===t&&(z(e),!0)},Q=function(e,t){return(e.current===t[0].charCodeAt(0)||e.current===t[1].charCodeAt(0))&&(Y(e),!0)},$=function(e,t){var r="Ee",n=e.current;for(h(g(e.current)),Y(e),48===n&&Q(e,"xX")&&(r="Pp");;)if(Q(e,r)&&Q(e,"-+"),k(e.current))Y(e);else{if(46!==e.current)break;Y(e)}var a=new O.TValue;return 0===O.luaO_str2num(I(e.buff),a)&&ee(e,f("malformed number",!0),290),a.ttisinteger()?(t.i=a.value,291):(h(a.ttisfloat()),t.r=a.value,290)},ee=function(e,t,r){t=d.luaG_addinfo(e.L,t,e.source,e.linenumber),r&&O.luaO_pushfstring(e.L,f("%s near %s"),t,function(e,t){switch(t){case 292:case 293:case 290:case 291:return O.luaO_pushfstring(e.L,f("'%s'",!0),I(e.buff));default:return H(e,t)}}(e,r)),L.luaD_throw(e.L,c)},te=function(e){var t=0,r=e.current;for(h(91===r||93===r),Y(e);61===e.current;)Y(e),t++;return e.current===r?t:-t-1},re=function(e,t,r){var n=e.linenumber;Y(e),X(e)&&q(e);for(var a=!1;!a;)switch(e.current){case S:var u="unfinished long ".concat(t?"string":"comment"," (starting at line ").concat(n,")");ee(e,f(u),289);break;case 93:te(e)===r&&(Y(e),a=!0);break;case 10:case 13:j(e,10),q(e),t||P(e.buff);break;default:t?Y(e):z(e)}t&&(t.ts=Z(e,e.buff.buffer.subarray(2+r,e.buff.n-(2+r))))},ne=function(e,t,r){t||(e.current!==S&&Y(e),ee(e,r,293))},ae=function(e){return Y(e),ne(e,k(e.current),f("hexadecimal digit expected",!0)),O.luaO_hexavalue(e.current)},ue=function(e){var t=ae(e);return t=(t<<4)+ae(e),M(e.buff,2),t},se=function(e){for(var t=new Uint8Array(O.UTF8BUFFSZ),r=O.luaO_utf8esc(t,function(e){var t=4;Y(e),ne(e,123===e.current,f("missing '{'",!0));var r=ae(e);for(Y(e);k(e.current);)t++,r=(r<<4)+O.luaO_hexavalue(e.current),ne(e,r<=1114111,f("UTF-8 value too large",!0)),Y(e);return ne(e,125===e.current,f("missing '}'",!0)),z(e),M(e.buff,t),r}(e));r>0;r--)j(e,t[O.UTF8BUFFSZ-r])},oe=function(e){var t,r=0;for(t=0;t<3&&g(e.current);t++)r=10*r+e.current-48,Y(e);return ne(e,r<=255,f("decimal escape too large",!0)),M(e.buff,t),r},le=function(e,t,r){for(Y(e);e.current!==t;)switch(e.current){case S:ee(e,f("unfinished string",!0),289);break;case 10:case 13:ee(e,f("unfinished string",!0),293);break;case 92:Y(e);var n=void 0,a=void 0;switch(e.current){case 97:a=7,n="read_save";break;case 98:a=8,n="read_save";break;case 102:a=12,n="read_save";break;case 110:a=10,n="read_save";break;case 114:a=13,n="read_save";break;case 116:a=9,n="read_save";break;case 118:a=11,n="read_save";break;case 120:a=ue(e),n="read_save";break;case 117:se(e),n="no_save";break;case 10:case 13:q(e),a=10,n="only_save";break;case 92:case 34:case 39:a=e.current,n="read_save";break;case S:n="no_save";break;case 122:for(M(e.buff,1),z(e);x(e.current);)X(e)?q(e):z(e);n="no_save";break;default:ne(e,g(e.current),f("invalid escape sequence",!0)),a=oe(e),n="only_save"}"read_save"===n&&z(e),"read_save"!==n&&"only_save"!==n||(M(e.buff,1),j(e,a));break;default:Y(e)}Y(e),r.ts=Z(e,e.buff.buffer.subarray(1,e.buff.n-1))},ie=Object.create(null);B.forEach((function(e,t){return ie[U(e)]=t}));var ce=function(e,t){for(P(e.buff);;)switch(h("number"==typeof e.current),e.current){case 10:case 13:q(e);break;case 32:case 12:case 9:case 11:z(e);break;case 45:if(z(e),45!==e.current)return 45;if(z(e),91===e.current){var r=te(e);if(P(e.buff),r>=0){re(e,null,r),P(e.buff);break}}for(;!X(e)&&e.current!==S;)z(e);break;case 91:var n=te(e);return n>=0?(re(e,t,n),293):(-1!==n&&ee(e,f("invalid long string delimiter",!0),293),91);case 61:return z(e),W(e,61)?282:61;case 60:return z(e),W(e,61)?284:W(e,60)?286:60;case 62:return z(e),W(e,61)?283:W(e,62)?287:62;case 47:return z(e),W(e,47)?279:47;case 126:return z(e),W(e,61)?285:126;case 58:return z(e),W(e,58)?288:58;case 34:case 39:return le(e,e.current,t),293;case 46:return Y(e),W(e,46)?W(e,46)?281:280:g(e.current)?$(e,t):46;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return $(e,t);case S:return 289;default:if(T(e.current)){do{Y(e)}while(b(e.current));var a=Z(e,I(e.buff));t.ts=a;var u=ie[y(a)];return void 0!==u&&u<=22?u+257:292}var s=e.current;return z(e),s}};e.exports.FIRST_RESERVED=257,e.exports.LUA_ENV=D,e.exports.LexState=F,e.exports.RESERVED=V,e.exports.isreserved=function(e){var t=ie[y(e)];return void 0!==t&&t<=22},e.exports.luaX_lookahead=function(e){return h(289===e.lookahead.token),e.lookahead.token=ce(e,e.lookahead.seminfo),e.lookahead.token},e.exports.luaX_newstring=Z,e.exports.luaX_next=function(e){e.lastline=e.linenumber,289!==e.lookahead.token?(e.t.token=e.lookahead.token,e.t.seminfo.i=e.lookahead.seminfo.i,e.t.seminfo.r=e.lookahead.seminfo.r,e.t.seminfo.ts=e.lookahead.seminfo.ts,e.lookahead.token=289):e.t.token=ce(e,e.t.seminfo)},e.exports.luaX_setinput=function(e,t,r,n,a){t.t={token:0,seminfo:new G},t.L=e,t.current=a,t.lookahead={token:289,seminfo:new G},t.z=r,t.fs=null,t.linenumber=1,t.lastline=1,t.source=n,t.envn=m(e,D),C(e,t.buff,p)},e.exports.luaX_syntaxerror=function(e,t){ee(e,t,e.t.token)},e.exports.luaX_token2str=H,e.exports.luaX_tokens=B},function(e,t,r){"use strict";var n=(0,r(1).luastring_of)(0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,22,22,22,22,22,22,22,22,22,22,4,4,4,4,4,4,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,5,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);e.exports.lisdigit=function(e){return 0!=(2&n[e+1])},e.exports.lislalnum=function(e){return 0!=(3&n[e+1])},e.exports.lislalpha=function(e){return 0!=(1&n[e+1])},e.exports.lisprint=function(e){return 0!=(4&n[e+1])},e.exports.lisspace=function(e){return 0!=(8&n[e+1])},e.exports.lisxdigit=function(e){return 0!=(16&n[e+1])}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=r(1),o=s.LUA_MULTRET,l=s.to_luastring,i=r(35),c=i.BinOpr,f=c.OPR_ADD,_=c.OPR_AND,p=c.OPR_BAND,v=c.OPR_BOR,h=c.OPR_BXOR,d=c.OPR_CONCAT,L=c.OPR_DIV,A=c.OPR_EQ,g=c.OPR_GE,b=c.OPR_GT,T=c.OPR_IDIV,x=c.OPR_LE,k=c.OPR_LT,O=c.OPR_MOD,E=c.OPR_MUL,m=c.OPR_NE,U=c.OPR_NOBINOPR,y=c.OPR_OR,N=c.OPR_POW,R=c.OPR_SHL,w=c.OPR_SHR,S=c.OPR_SUB,I=i.UnOpr,M=I.OPR_BNOT,P=I.OPR_LEN,C=I.OPR_MINUS,D=I.OPR_NOT,V=I.OPR_NOUNOPR,B=i.NO_JUMP,G=i.getinstruction,K=i.luaK_checkstack,F=i.luaK_codeABC,j=i.luaK_codeABx,H=i.luaK_codeAsBx,X=i.luaK_codek,z=i.luaK_concat,Y=i.luaK_dischargevars,J=i.luaK_exp2RK,Z=i.luaK_exp2anyreg,q=i.luaK_exp2anyregup,W=i.luaK_exp2nextreg,Q=i.luaK_exp2val,$=i.luaK_fixline,ee=i.luaK_getlabel,te=i.luaK_goiffalse,re=i.luaK_goiftrue,ne=i.luaK_indexed,ae=i.luaK_infix,ue=i.luaK_intK,se=i.luaK_jump,oe=i.luaK_jumpto,le=i.luaK_nil,ie=i.luaK_patchclose,ce=i.luaK_patchlist,fe=i.luaK_patchtohere,_e=i.luaK_posfix,pe=i.luaK_prefix,ve=i.luaK_reserveregs,he=i.luaK_ret,de=i.luaK_self,Le=i.luaK_setlist,Ae=i.luaK_setmultret,ge=i.luaK_setoneret,be=i.luaK_setreturns,Te=i.luaK_storevar,xe=i.luaK_stringK,ke=r(8),Oe=r(13),Ee=r(21),me=r(4),Ue=me.LUAI_MAXCCALLS,ye=me.MAX_INT,Ne=me.lua_assert,Re=r(6),we=r(16),Se=we.OpCodesI,Ie=Se.OP_CALL,Me=Se.OP_CLOSURE,Pe=Se.OP_FORLOOP,Ce=Se.OP_FORPREP,De=Se.OP_GETUPVAL,Ve=Se.OP_MOVE,Be=Se.OP_NEWTABLE,Ge=Se.OP_SETTABLE,Ke=Se.OP_TAILCALL,Fe=Se.OP_TFORCALL,je=Se.OP_TFORLOOP,He=Se.OP_VARARG,Xe=we.LFIELDS_PER_FLUSH,ze=we.SETARG_B,Ye=we.SETARG_C,Je=we.SET_OPCODE,Ze=r(10),qe=Ze.luaS_eqlngstr,We=Ze.luaS_new,Qe=Ze.luaS_newliteral,$e=r(9),et=Oe.Proto,tt=Ee.RESERVED,rt=function(e){return e===ut.VCALL||e===ut.VVARARG},nt=function(e,t){return qe(e,t)},at=a((function e(){u(this,e),this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN})),ut={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14},st=function(){function e(){u(this,e),this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}return a(e,[{key:"to",value:function(e){this.k=e.k,this.u=e.u,this.t=e.t,this.f=e.f}}]),e}(),ot=a((function e(){u(this,e),this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN})),lt=a((function e(){u(this,e),this.idx=NaN})),it=a((function e(){u(this,e),this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN})),ct=a((function e(){u(this,e),this.arr=[],this.n=NaN,this.size=NaN})),ft=a((function e(){u(this,e),this.actvar={arr:[],n:NaN,size:NaN},this.gt=new ct,this.label=new ct})),_t=function(e,t){e.t.token=0,Ee.luaX_syntaxerror(e,t)},pt=function(e,t){Ee.luaX_syntaxerror(e,Re.luaO_pushfstring(e.L,l("%s expected",!0),Ee.luaX_token2str(e,t)))},vt=function(e,t,r,n){t>r&&function(e,t,r){var n=e.ls.L,a=e.f.linedefined,u=0===a?l("main function",!0):Re.luaO_pushfstring(n,l("function at line %d",!0),a),s=Re.luaO_pushfstring(n,l("too many %s (limit is %d) in %s",!0),r,t,u);Ee.luaX_syntaxerror(e.ls,s)}(e,r,n)},ht=function(e,t){return e.t.token===t&&(Ee.luaX_next(e),!0)},dt=function(e,t){e.t.token!==t&&pt(e,t)},Lt=function(e,t){dt(e,t),Ee.luaX_next(e)},At=function(e,t,r){t||Ee.luaX_syntaxerror(e,r)},gt=function(e,t,r,n){ht(e,t)||(n===e.linenumber?pt(e,t):Ee.luaX_syntaxerror(e,Re.luaO_pushfstring(e.L,l("%s expected (to close %s at line %d)"),Ee.luaX_token2str(e,t),Ee.luaX_token2str(e,r),n)))},bt=function(e){dt(e,tt.TK_NAME);var t=e.t.seminfo.ts;return Ee.luaX_next(e),t},Tt=function(e,t,r){e.f=e.t=B,e.k=t,e.u.info=r},xt=function(e,t,r){Tt(t,ut.VK,xe(e.fs,r))},kt=function(e,t){xt(e,t,bt(e))},Ot=function(e,t){var r=e.fs,n=e.dyd,a=function(e,t){var r=e.fs,n=r.f;return n.locvars[r.nlocvars]=new Re.LocVar,n.locvars[r.nlocvars].varname=t,r.nlocvars++}(e,t);vt(r,n.actvar.n+1-r.firstlocal,200,l("local variables",!0)),n.actvar.arr[n.actvar.n]=new lt,n.actvar.arr[n.actvar.n].idx=a,n.actvar.n++},Et=function(e,t){Ot(e,Ee.luaX_newstring(e,l(t,!0)))},mt=function(e,t){var r=e.ls.dyd.actvar.arr[e.firstlocal+t].idx;return Ne(r<e.nlocvars),e.f.locvars[r]},Ut=function(e,t){var r=e.fs;for(r.nactvar=r.nactvar+t;t;t--)mt(r,r.nactvar-t).startpc=r.pc},yt=function(e,t,r){var n=e.f;return vt(e,e.nups+1,Oe.MAXUPVAL,l("upvalues",!0)),n.upvalues[e.nups]={instack:r.k===ut.VLOCAL,idx:r.u.info,name:t},e.nups++},Nt=function e(t,r,n,a){if(null===t)Tt(n,ut.VVOID,0);else{var u=function(e,t){for(var r=e.nactvar-1;r>=0;r--)if(nt(t,mt(e,r).varname))return r;return-1}(t,r);if(u>=0)Tt(n,ut.VLOCAL,u),a||function(e,t){for(var r=e.bl;r.nactvar>t;)r=r.previous;r.upval=1}(t,u);else{var s=function(e,t){for(var r=e.f.upvalues,n=0;n<e.nups;n++)if(nt(r[n].name,t))return n;return-1}(t,r);if(s<0){if(e(t.prev,r,n,0),n.k===ut.VVOID)return;s=yt(t,r,n)}Tt(n,ut.VUPVAL,s)}}},Rt=function(e,t){var r=bt(e),n=e.fs;if(Nt(n,r,t,1),t.k===ut.VVOID){var a=new st;Nt(n,e.envn,t,1),Ne(t.k!==ut.VVOID),xt(e,a,r),ne(n,t,a)}},wt=function(e,t,r,n){var a=e.fs,u=t-r;if(rt(n.k))++u<0&&(u=0),be(a,n,u),u>1&&ve(a,u-1);else if(n.k!==ut.VVOID&&W(a,n),u>0){var s=a.freereg;ve(a,u),le(a,s,u)}r>t&&(e.fs.freereg-=r-t)},St=function(e){var t=e.L;++t.nCcalls,vt(e.fs,t.nCcalls,Ue,l("JS levels",!0))},It=function(e){return e.L.nCcalls--},Mt=function(e,t,r){var n=e.fs,a=e.dyd.gt,u=a.arr[t];if(Ne(nt(u.name,r.name)),u.nactvar<r.nactvar){var s=mt(n,u.nactvar).varname,o=Re.luaO_pushfstring(e.L,l("<goto %s> at line %d jumps into the scope of local '%s'"),u.name.getstr(),u.line,s.getstr());_t(e,o)}ce(n,u.pc,r.pc);for(var i=t;i<a.n-1;i++)a.arr[i]=a.arr[i+1];a.n--},Pt=function(e,t){for(var r=e.fs.bl,n=e.dyd,a=n.gt.arr[t],u=r.firstlabel;u<n.label.n;u++){var s=n.label.arr[u];if(nt(s.name,a.name))return a.nactvar>s.nactvar&&(r.upval||n.label.n>r.firstlabel)&&ie(e.fs,a.pc,s.nactvar),Mt(e,t,s),!0}return!1},Ct=function(e,t,r,n,a){var u=t.n;return t.arr[u]=new it,t.arr[u].name=r,t.arr[u].line=n,t.arr[u].nactvar=e.fs.nactvar,t.arr[u].pc=a,t.n=u+1,u},Dt=function(e,t){for(var r=e.dyd.gt,n=e.fs.bl.firstgoto;n<r.n;)nt(r.arr[n].name,t.name)?Mt(e,n,t):n++},Vt=function(e,t,r){t.isloop=r,t.nactvar=e.nactvar,t.firstlabel=e.ls.dyd.label.n,t.firstgoto=e.ls.dyd.gt.n,t.upval=0,t.previous=e.bl,e.bl=t,Ne(e.freereg===e.nactvar)},Bt=function(e,t,r){t.prev=e.fs,t.ls=e,e.fs=t,t.pc=0,t.lasttarget=0,t.jpc=B,t.freereg=0,t.nk=0,t.np=0,t.nups=0,t.nlocvars=0,t.nactvar=0,t.firstlocal=e.dyd.actvar.n,t.bl=null;var n=t.f;n.source=e.source,n.maxstacksize=2,Vt(t,r,!1)},Gt=function(e){var t=e.bl,r=e.ls;if(t.previous&&t.upval){var n=se(e);ie(e,n,t.nactvar),fe(e,n)}t.isloop&&function(e){var t=Qe(e.L,"break"),r=Ct(e,e.dyd.label,t,0,e.fs.pc);Dt(e,e.dyd.label.arr[r])}(r),e.bl=t.previous,function(e,t){for(e.ls.dyd.actvar.n-=e.nactvar-t;e.nactvar>t;)mt(e,--e.nactvar).endpc=e.pc}(e,t.nactvar),Ne(t.nactvar===e.nactvar),e.freereg=e.nactvar,r.dyd.label.n=t.firstlabel,t.previous?function(e,t){for(var r=t.firstgoto,n=e.ls.dyd.gt;r<n.n;){var a=n.arr[r];a.nactvar>t.nactvar&&(t.upval&&ie(e,a.pc,t.nactvar),a.nactvar=t.nactvar),Pt(e.ls,r)||r++}}(e,t):t.firstgoto<r.dyd.gt.n&&function(e,t){var r=Ee.isreserved(t.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d";r=Re.luaO_pushfstring(e.L,l(r),t.name.getstr(),t.line),_t(e,r)}(r,r.dyd.gt.arr[t.firstgoto])},Kt=function(e){var t=e.fs;he(t,0,0),Gt(t),Ne(null===t.bl),e.fs=t.prev},Ft=function(e,t){switch(e.t.token){case tt.TK_ELSE:case tt.TK_ELSEIF:case tt.TK_END:case tt.TK_EOS:return!0;case tt.TK_UNTIL:return t;default:return!1}},jt=function(e){for(;!Ft(e,1);){if(e.t.token===tt.TK_RETURN)return void dr(e);dr(e)}},Ht=function(e,t){var r=e.fs,n=new st;q(r,t),Ee.luaX_next(e),kt(e,n),ne(r,t,n)},Xt=function(e,t){Ee.luaX_next(e),ar(e,t),Q(e.fs,t),Lt(e,93)},zt=a((function e(){u(this,e),this.v=new st,this.t=new st,this.nh=NaN,this.na=NaN,this.tostore=NaN})),Yt=function(e,t){var r=e.fs,n=e.fs.freereg,a=new st,u=new st;e.t.token===tt.TK_NAME?(vt(r,t.nh,ye,l("items in a constructor",!0)),kt(e,a)):Xt(e,a),t.nh++,Lt(e,61);var s=J(r,a);ar(e,u),F(r,Ge,t.t.u.info,s,J(r,u)),r.freereg=n},Jt=function(e,t){t.v.k!==ut.VVOID&&(W(e,t.v),t.v.k=ut.VVOID,t.tostore===Xe&&(Le(e,t.t.u.info,t.na,t.tostore),t.tostore=0))},Zt=function(e,t){ar(e,t.v),vt(e.fs,t.na,ye,l("items in a constructor",!0)),t.na++,t.tostore++},qt=function(e,t){switch(e.t.token){case tt.TK_NAME:61!==Ee.luaX_lookahead(e)?Zt(e,t):Yt(e,t);break;case 91:Yt(e,t);break;default:Zt(e,t)}},Wt=function(e,t){var r=e.fs,n=e.linenumber,a=F(r,Be,0,0,0),u=new zt;u.na=u.nh=u.tostore=0,u.t=t,Tt(t,ut.VRELOCABLE,a),Tt(u.v,ut.VVOID,0),W(e.fs,t),Lt(e,123);do{if(Ne(u.v.k===ut.VVOID||u.tostore>0),125===e.t.token)break;Jt(r,u),qt(e,u)}while(ht(e,44)||ht(e,59));gt(e,125,123,n),function(e,t){0!==t.tostore&&(rt(t.v.k)?(Ae(e,t.v),Le(e,t.t.u.info,t.na,o),t.na--):(t.v.k!==ut.VVOID&&W(e,t.v),Le(e,t.t.u.info,t.na,t.tostore)))}(r,u),ze(r.f.code[a],Re.luaO_int2fb(u.na)),Ye(r.f.code[a],Re.luaO_int2fb(u.nh))},Qt=function(e,t,r,n){var a=new ot,u=new at;a.f=function(e){var t=e.L,r=new et(t),n=e.fs;return n.f.p[n.np++]=r,r}(e),a.f.linedefined=n,Bt(e,a,u),Lt(e,40),r&&(Et(e,"self"),Ut(e,1)),function(e){var t=e.fs,r=t.f,n=0;if(r.is_vararg=!1,41!==e.t.token)do{switch(e.t.token){case tt.TK_NAME:Ot(e,bt(e)),n++;break;case tt.TK_DOTS:Ee.luaX_next(e),r.is_vararg=!0;break;default:Ee.luaX_syntaxerror(e,l("<name> or '...' expected",!0))}}while(!r.is_vararg&&ht(e,44));Ut(e,n),r.numparams=t.nactvar,ve(t,t.nactvar)}(e),Lt(e,41),jt(e),a.f.lastlinedefined=e.linenumber,gt(e,tt.TK_END,tt.TK_FUNCTION,n),function(e,t){var r=e.fs.prev;Tt(t,ut.VRELOCABLE,j(r,Me,0,r.np-1)),W(r,t)}(e,t),Kt(e)},$t=function(e,t){var r=1;for(ar(e,t);ht(e,44);)W(e.fs,t),ar(e,t),r++;return r},er=function(e,t,r){var n,a=e.fs,u=new st;switch(e.t.token){case 40:Ee.luaX_next(e),41===e.t.token?u.k=ut.VVOID:($t(e,u),Ae(a,u)),gt(e,41,40,r);break;case 123:Wt(e,u);break;case tt.TK_STRING:xt(e,u,e.t.seminfo.ts),Ee.luaX_next(e);break;default:Ee.luaX_syntaxerror(e,l("function arguments expected",!0))}Ne(t.k===ut.VNONRELOC);var s=t.u.info;rt(u.k)?n=o:(u.k!==ut.VVOID&&W(a,u),n=a.freereg-(s+1)),Tt(t,ut.VCALL,F(a,Ie,s,n+1,2)),$(a,r),a.freereg=s+1},tr=function(e,t){var r=e.fs,n=e.linenumber;for(!function(e,t){switch(e.t.token){case 40:var r=e.linenumber;return Ee.luaX_next(e),ar(e,t),gt(e,41,40,r),void Y(e.fs,t);case tt.TK_NAME:return void Rt(e,t);default:Ee.luaX_syntaxerror(e,l("unexpected symbol",!0))}}(e,t);;)switch(e.t.token){case 46:Ht(e,t);break;case 91:var a=new st;q(r,t),Xt(e,a),ne(r,t,a);break;case 58:var u=new st;Ee.luaX_next(e),kt(e,u),de(r,t,u),er(e,t,n);break;case 40:case tt.TK_STRING:case 123:W(r,t),er(e,t,n);break;default:return}},rr=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],nr=function e(t,r,n){St(t);var a=function(e){switch(e){case tt.TK_NOT:return D;case 45:return C;case 126:return M;case 35:return P;default:return V}}(t.t.token);if(a!==V){var u=t.linenumber;Ee.luaX_next(t),e(t,r,12),pe(t.fs,a,r,u)}else!function(e,t){switch(e.t.token){case tt.TK_FLT:Tt(t,ut.VKFLT,0),t.u.nval=e.t.seminfo.r;break;case tt.TK_INT:Tt(t,ut.VKINT,0),t.u.ival=e.t.seminfo.i;break;case tt.TK_STRING:xt(e,t,e.t.seminfo.ts);break;case tt.TK_NIL:Tt(t,ut.VNIL,0);break;case tt.TK_TRUE:Tt(t,ut.VTRUE,0);break;case tt.TK_FALSE:Tt(t,ut.VFALSE,0);break;case tt.TK_DOTS:var r=e.fs;At(e,r.f.is_vararg,l("cannot use '...' outside a vararg function",!0)),Tt(t,ut.VVARARG,F(r,He,0,1,0));break;case 123:return void Wt(e,t);case tt.TK_FUNCTION:return Ee.luaX_next(e),void Qt(e,t,0,e.linenumber);default:return void tr(e,t)}Ee.luaX_next(e)}(t,r);for(var s=function(e){switch(e){case 43:return f;case 45:return S;case 42:return E;case 37:return O;case 94:return N;case 47:return L;case tt.TK_IDIV:return T;case 38:return p;case 124:return v;case 126:return h;case tt.TK_SHL:return R;case tt.TK_SHR:return w;case tt.TK_CONCAT:return d;case tt.TK_NE:return m;case tt.TK_EQ:return A;case 60:return k;case tt.TK_LE:return x;case 62:return b;case tt.TK_GE:return g;case tt.TK_AND:return _;case tt.TK_OR:return y;default:return U}}(t.t.token);s!==U&&rr[s].left>n;){var o=new st,i=t.linenumber;Ee.luaX_next(t),ae(t.fs,s,r);var c=e(t,o,rr[s].right);_e(t.fs,s,r,o,i),s=c}return It(t),s},ar=function(e,t){nr(e,t,0)},ur=function(e){var t=e.fs,r=new at;Vt(t,r,0),jt(e),Gt(t)},sr=a((function e(){u(this,e),this.prev=null,this.v=new st})),or=function e(t,r,n){var a,u=new st;if(At(t,(a=r.v.k,ut.VLOCAL<=a&&a<=ut.VINDEXED),l("syntax error",!0)),ht(t,44)){var s=new sr;s.prev=r,tr(t,s.v),s.v.k!==ut.VINDEXED&&function(e,t,r){for(var n=e.fs,a=n.freereg,u=!1;t;t=t.prev)t.v.k===ut.VINDEXED&&(t.v.u.ind.vt===r.k&&t.v.u.ind.t===r.u.info&&(u=!0,t.v.u.ind.vt=ut.VLOCAL,t.v.u.ind.t=a),r.k===ut.VLOCAL&&t.v.u.ind.idx===r.u.info&&(u=!0,t.v.u.ind.idx=a));if(u){var s=r.k===ut.VLOCAL?Ve:De;F(n,s,a,r.u.info,0),ve(n,1)}}(t,r,s.v),vt(t.fs,n+t.L.nCcalls,Ue,l("JS levels",!0)),e(t,s,n+1)}else{Lt(t,61);var o=$t(t,u);if(o===n)return ge(t.fs,u),void Te(t.fs,r.v,u);wt(t,n,o,u)}Tt(u,ut.VNONRELOC,t.fs.freereg-1),Te(t.fs,r.v,u)},lr=function(e){var t=new st;return ar(e,t),t.k===ut.VNIL&&(t.k=ut.VFALSE),re(e.fs,t),t.f},ir=function(e,t){var r,n=e.linenumber;ht(e,tt.TK_GOTO)?r=bt(e):(Ee.luaX_next(e),r=Qe(e.L,"break"));var a=Ct(e,e.dyd.gt,r,n,t);Pt(e,a)},cr=function(e,t,r){var n,a=e.fs,u=e.dyd.label;!function(e,t,r){for(var n=e.bl.firstlabel;n<t.n;n++)if(nt(r,t.arr[n].name)){var a=Re.luaO_pushfstring(e.ls.L,l("label '%s' already defined on line %d",!0),r.getstr(),t.arr[n].line);_t(e.ls,a)}}(a,u,t),Lt(e,tt.TK_DBCOLON),n=Ct(e,u,t,r,ee(a)),function(e){for(;59===e.t.token||e.t.token===tt.TK_DBCOLON;)dr(e)}(e),Ft(e,0)&&(u.arr[n].nactvar=a.bl.nactvar),Dt(e,u.arr[n])},fr=function(e){var t=new st;return ar(e,t),W(e.fs,t),Ne(t.k===ut.VNONRELOC),t.u.info},_r=function(e,t,r,n,a){var u,s=new at,o=e.fs;Ut(e,3),Lt(e,tt.TK_DO);var l=a?H(o,Ce,t,B):se(o);Vt(o,s,0),Ut(e,n),ve(o,n),ur(e),Gt(o),fe(o,l),a?u=H(o,Pe,t,B):(F(o,Fe,t,0,n),$(o,r),u=H(o,je,t+2,B)),ce(o,u,l+1),$(o,r)},pr=function(e,t){var r=e.fs,n=new at;Vt(r,n,1),Ee.luaX_next(e);var a=bt(e);switch(e.t.token){case 61:!function(e,t,r){var n=e.fs,a=n.freereg;Et(e,"(for index)"),Et(e,"(for limit)"),Et(e,"(for step)"),Ot(e,t),Lt(e,61),fr(e),Lt(e,44),fr(e),ht(e,44)?fr(e):(X(n,n.freereg,ue(n,1)),ve(n,1)),_r(e,a,r,1,1)}(e,a,t);break;case 44:case tt.TK_IN:!function(e,t){var r=e.fs,n=new st,a=4,u=r.freereg;for(Et(e,"(for generator)"),Et(e,"(for state)"),Et(e,"(for control)"),Ot(e,t);ht(e,44);)Ot(e,bt(e)),a++;Lt(e,tt.TK_IN);var s=e.linenumber;wt(e,3,$t(e,n),n),K(r,3),_r(e,u,s,a-3,0)}(e,a);break;default:Ee.luaX_syntaxerror(e,l("'=' or 'in' expected",!0))}gt(e,tt.TK_END,tt.TK_FOR,t),Gt(r)},vr=function(e,t){var r,n=new at,a=e.fs,u=new st;if(Ee.luaX_next(e),ar(e,u),Lt(e,tt.TK_THEN),e.t.token===tt.TK_GOTO||e.t.token===tt.TK_BREAK){for(te(e.fs,u),Vt(a,n,!1),ir(e,u.t);ht(e,59););if(Ft(e,0))return Gt(a),t;r=se(a)}else re(e.fs,u),Vt(a,n,!1),r=u.f;return jt(e),Gt(a),e.t.token!==tt.TK_ELSE&&e.t.token!==tt.TK_ELSEIF||(t=z(a,t,se(a))),fe(a,r),t},hr=function(e,t){var r=new st,n=new st;Ee.luaX_next(e);var a=function(e,t){var r=0;for(Rt(e,t);46===e.t.token;)Ht(e,t);return 58===e.t.token&&(r=1,Ht(e,t)),r}(e,r);Qt(e,n,a,t),Te(e.fs,r,n),$(e.fs,t)},dr=function(e){var t=e.linenumber;switch(St(e),e.t.token){case 59:Ee.luaX_next(e);break;case tt.TK_IF:!function(e,t){var r=e.fs,n=B;for(n=vr(e,n);e.t.token===tt.TK_ELSEIF;)n=vr(e,n);ht(e,tt.TK_ELSE)&&ur(e),gt(e,tt.TK_END,tt.TK_IF,t),fe(r,n)}(e,t);break;case tt.TK_WHILE:!function(e,t){var r=e.fs,n=new at;Ee.luaX_next(e);var a=ee(r),u=lr(e);Vt(r,n,1),Lt(e,tt.TK_DO),ur(e),oe(r,a),gt(e,tt.TK_END,tt.TK_WHILE,t),Gt(r),fe(r,u)}(e,t);break;case tt.TK_DO:Ee.luaX_next(e),ur(e),gt(e,tt.TK_END,tt.TK_DO,t);break;case tt.TK_FOR:pr(e,t);break;case tt.TK_REPEAT:!function(e,t){var r=e.fs,n=ee(r),a=new at,u=new at;Vt(r,a,1),Vt(r,u,0),Ee.luaX_next(e),jt(e),gt(e,tt.TK_UNTIL,tt.TK_REPEAT,t);var s=lr(e);u.upval&&ie(r,s,u.nactvar),Gt(r),ce(r,s,n),Gt(r)}(e,t);break;case tt.TK_FUNCTION:hr(e,t);break;case tt.TK_LOCAL:Ee.luaX_next(e),ht(e,tt.TK_FUNCTION)?function(e){var t=new st,r=e.fs;Ot(e,bt(e)),Ut(e,1),Qt(e,t,0,e.linenumber),mt(r,t.u.info).startpc=r.pc}(e):function(e){var t,r=0,n=new st;do{Ot(e,bt(e)),r++}while(ht(e,44));ht(e,61)?t=$t(e,n):(n.k=ut.VVOID,t=0),wt(e,r,t,n),Ut(e,r)}(e);break;case tt.TK_DBCOLON:Ee.luaX_next(e),cr(e,bt(e),t);break;case tt.TK_RETURN:Ee.luaX_next(e),function(e){var t,r,n=e.fs,a=new st;Ft(e,1)||59===e.t.token?t=r=0:(r=$t(e,a),rt(a.k)?(Ae(n,a),a.k===ut.VCALL&&1===r&&(Je(G(n,a),Ke),Ne(G(n,a).A===n.nactvar)),t=n.nactvar,r=o):1===r?t=Z(n,a):(W(n,a),t=n.nactvar,Ne(r===n.freereg-t))),he(n,t,r),ht(e,59)}(e);break;case tt.TK_BREAK:case tt.TK_GOTO:ir(e,se(e.fs));break;default:!function(e){var t=e.fs,r=new sr;tr(e,r.v),61===e.t.token||44===e.t.token?(r.prev=null,or(e,r,1)):(At(e,r.v.k===ut.VCALL,l("syntax error",!0)),Ye(G(t,r.v),1))}(e)}Ne(e.fs.f.maxstacksize>=e.fs.freereg&&e.fs.freereg>=e.fs.nactvar),e.fs.freereg=e.fs.nactvar,It(e)};e.exports.Dyndata=ft,e.exports.expkind=ut,e.exports.expdesc=st,e.exports.luaY_parser=function(e,t,r,n,a,u){var s,o,l,i,c=new Ee.LexState,f=new ot,_=Oe.luaF_newLclosure(e,1);return ke.luaD_inctop(e),e.stack[e.top-1].setclLvalue(_),c.h=$e.luaH_new(e),ke.luaD_inctop(e),e.stack[e.top-1].sethvalue(c.h),f.f=_.p=new et(e),f.f.source=We(e,a),c.buff=r,c.dyd=n,n.actvar.n=n.gt.n=n.label.n=0,Ee.luaX_setinput(e,c,t,f.f.source,u),s=c,o=f,l=new at,i=new st,Bt(s,o,l),o.f.is_vararg=!0,Tt(i,ut.VLOCAL,0),yt(o,s.envn,i),Ee.luaX_next(s),jt(s),dt(s,tt.TK_EOS),Kt(s),Ne(!f.prev&&1===f.nups&&!c.fs),Ne(0===n.actvar.n&&0===n.gt.n&&0===n.label.n),delete e.stack[--e.top],_},e.exports.vkisinreg=function(e){return e===ut.VNONRELOC||e===ut.VLOCAL}},function(e,t,r){"use strict";var n,a,u=r(2),s=u.LUA_MULTRET,o=u.LUA_OK,l=u.LUA_TFUNCTION,i=u.LUA_TNIL,c=u.LUA_TNONE,f=u.LUA_TNUMBER,_=u.LUA_TSTRING,p=u.LUA_TTABLE,v=u.LUA_VERSION,h=u.LUA_YIELD,d=u.lua_call,L=u.lua_callk,A=u.lua_concat,g=u.lua_error,b=u.lua_getglobal,T=u.lua_geti,x=u.lua_getmetatable,k=u.lua_gettop,O=u.lua_insert,E=u.lua_isnil,m=u.lua_isnone,U=u.lua_isstring,y=u.lua_load,N=u.lua_next,R=u.lua_pcallk,w=u.lua_pop,S=u.lua_pushboolean,I=u.lua_pushcfunction,M=u.lua_pushglobaltable,P=u.lua_pushinteger,C=u.lua_pushliteral,D=u.lua_pushnil,V=u.lua_pushstring,B=u.lua_pushvalue,G=u.lua_rawequal,K=u.lua_rawget,F=u.lua_rawlen,j=u.lua_rawset,H=u.lua_remove,X=u.lua_replace,z=u.lua_rotate,Y=u.lua_setfield,J=u.lua_setmetatable,Z=u.lua_settop,q=u.lua_setupvalue,W=u.lua_stringtonumber,Q=u.lua_toboolean,$=u.lua_tolstring,ee=u.lua_tostring,te=u.lua_type,re=u.lua_typename,ne=r(7),ae=ne.luaL_argcheck,ue=ne.luaL_checkany,se=ne.luaL_checkinteger,oe=ne.luaL_checkoption,le=ne.luaL_checkstack,ie=ne.luaL_checktype,ce=ne.luaL_error,fe=ne.luaL_getmetafield,_e=ne.luaL_loadbufferx,pe=ne.luaL_loadfile,ve=ne.luaL_loadfilex,he=ne.luaL_optinteger,de=ne.luaL_optstring,Le=ne.luaL_setfuncs,Ae=ne.luaL_tolstring,ge=ne.luaL_where,be=r(5),Te=be.to_jsstring,xe=be.to_luastring;if("function"==typeof TextDecoder){var ke="",Oe=new TextDecoder("utf-8");n=function(e){ke+=Oe.decode(e,{stream:!0})};var Ee=new Uint8Array(0);a=function(){ke+=Oe.decode(Ee),console.log(ke),ke=""}}else{var me=[];n=function(e){try{e=Te(e)}catch(r){var t=new Uint8Array(e.length);t.set(e),e=t}me.push(e)},a=function(){console.log.apply(console.log,me),me=[]}}var Ue=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map((function(e){return xe(e)})),ye=function(e){return ie(e,1,p),Z(e,2),N(e,1)?2:(D(e),1)},Ne=function(e){var t=se(e,2)+1;return P(e,t),T(e,1,t)===i?1:2},Re=function(e){var t=he(e,2,1);return Z(e,1),te(e,1)===_&&t>0&&(ge(e,t),B(e,1),A(e,2)),g(e)},we=function(e,t,r){return t!==o&&t!==h?(S(e,0),B(e,-2),2):k(e)-r},Se=function(e,t,r){return t===o?(0!==r&&(B(e,r),q(e,-2,1)||w(e,1)),1):(D(e),O(e,-2),2)},Ie=function(e,t){return le(e,2,"too many nested functions"),B(e,1),d(e,0,1),E(e,-1)?(w(e,1),null):(U(e,-1)||ce(e,xe("reader function must return a string")),X(e,5),ee(e,5))},Me=function(e,t,r){return k(e)-1},Pe={assert:function(e){return Q(e,1)?k(e):(ue(e,1),H(e,1),C(e,"assertion failed!"),Z(e,1),Re(e))},collectgarbage:function(e){oe(e,1,"collect",Ue),he(e,2,0),ce(e,xe("lua_gc not implemented"))},dofile:function(e){var t=de(e,1,null);return Z(e,1),pe(e,t)!==o?g(e):(L(e,0,s,0,Me),Me(e))},error:Re,getmetatable:function(e){return ue(e,1),x(e,1)?(fe(e,1,xe("__metatable",!0)),1):(D(e),1)},ipairs:function(e){return ue(e,1),I(e,Ne),B(e,1),P(e,0),3},load:function(e){var t,r=ee(e,1),n=de(e,3,"bt"),a=m(e,4)?0:4;if(null!==r){var u=de(e,2,r);t=_e(e,r,r.length,u,n)}else{var s=de(e,2,"=(load)");ie(e,1,l),Z(e,5),t=y(e,Ie,null,s,n)}return Se(e,t,a)},loadfile:function(e){var t=de(e,1,null),r=de(e,2,null),n=m(e,3)?0:3,a=ve(e,t,r);return Se(e,a,n)},next:ye,pairs:function(e){return function(e,t,r,n){return ue(e,1),fe(e,1,t)===i?(I(e,n),B(e,1),r?P(e,0):D(e)):(B(e,1),d(e,1,3)),3}(e,xe("__pairs",!0),0,ye)},pcall:function(e){ue(e,1),S(e,1),O(e,1);var t=R(e,k(e)-2,s,0,0,we);return we(e,t,0)},print:function(e){var t=k(e);b(e,xe("tostring",!0));for(var r=1;r<=t;r++){B(e,-1),B(e,r),d(e,1,1);var u=$(e,-1);if(null===u)return ce(e,xe("'tostring' must return a string to 'print'"));r>1&&n(xe("\t")),n(u),w(e,1)}return a(),0},rawequal:function(e){return ue(e,1),ue(e,2),S(e,G(e,1,2)),1},rawget:function(e){return ie(e,1,p),ue(e,2),Z(e,2),K(e,1),1},rawlen:function(e){var t=te(e,1);return ae(e,t===p||t===_,1,"table or string expected"),P(e,F(e,1)),1},rawset:function(e){return ie(e,1,p),ue(e,2),ue(e,3),Z(e,3),j(e,1),1},select:function(e){var t=k(e);if(te(e,1)===_&&35===ee(e,1)[0])return P(e,t-1),1;var r=se(e,1);return r<0?r=t+r:r>t&&(r=t),ae(e,1<=r,1,"index out of range"),t-r},setmetatable:function(e){var t=te(e,2);return ie(e,1,p),ae(e,t===i||t===p,2,"nil or table expected"),fe(e,1,xe("__metatable",!0))!==i?ce(e,xe("cannot change a protected metatable")):(Z(e,2),J(e,1),1)},tonumber:function(e){if(te(e,2)<=0){if(ue(e,1),te(e,1)===f)return Z(e,1),1;var t=ee(e,1);if(null!==t&&W(e,t)===t.length+1)return 1}else{var r=se(e,2);ie(e,1,_);var n=ee(e,1);ae(e,2<=r&&r<=36,2,"base out of range");var a=function(e,t){try{e=Te(e)}catch(e){return null}var r=/^[\t\v\f \n\r]*([+-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(e);if(!r)return null;var n=parseInt(r[1]+r[2],t);return isNaN(n)?null:0|n}(n,r);if(null!==a)return P(e,a),1}return D(e),1},tostring:function(e){return ue(e,1),Ae(e,1),1},type:function(e){var t=te(e,1);return ae(e,t!==c,1,"value expected"),V(e,re(e,t)),1},xpcall:function(e){var t=k(e);ie(e,2,l),S(e,1),B(e,1),z(e,3,2);var r=R(e,t-2,s,2,2,we);return we(e,r,2)}};e.exports.luaopen_base=function(e){return M(e),Le(e,Pe,0),B(e,-1),Y(e,-2,xe("_G")),C(e,v),Y(e,-2,xe("_VERSION")),1}},function(e,t,r){"use strict";var n=r(2),a=n.LUA_OK,u=n.LUA_TFUNCTION,s=n.LUA_TSTRING,o=n.LUA_YIELD,l=n.lua_Debug,i=n.lua_checkstack,c=n.lua_concat,f=n.lua_error,_=n.lua_getstack,p=n.lua_gettop,v=n.lua_insert,h=n.lua_isyieldable,d=n.lua_newthread,L=n.lua_pop,A=n.lua_pushboolean,g=n.lua_pushcclosure,b=n.lua_pushliteral,T=n.lua_pushthread,x=n.lua_pushvalue,k=n.lua_resume,O=n.lua_status,E=n.lua_tothread,m=n.lua_type,U=n.lua_upvalueindex,y=n.lua_xmove,N=n.lua_yield,R=r(7),w=R.luaL_argcheck,S=R.luaL_checktype,I=R.luaL_newlib,M=R.luaL_where,P=function(e){var t=E(e,1);return w(e,t,1,"thread expected"),t},C=function(e,t,r){if(!i(t,r))return b(e,"too many arguments to resume"),-1;if(O(t)===a&&0===p(t))return b(e,"cannot resume dead coroutine"),-1;y(e,t,r);var n=k(t,e,r);if(n===a||n===o){var u=p(t);return i(e,u+1)?(y(t,e,u),u):(L(t,u),b(e,"too many results to resume"),-1)}return y(t,e,1),-1},D=function(e){var t=E(e,U(1)),r=C(e,t,p(e));return r<0?(m(e,-1)===s&&(M(e,1),v(e,-2),c(e,2)),f(e)):r},V=function(e){S(e,1,u);var t=d(e);return x(e,1),y(e,t,1),1},B={create:V,isyieldable:function(e){return A(e,h(e)),1},resume:function(e){var t=P(e),r=C(e,t,p(e)-1);return r<0?(A(e,0),v(e,-2),2):(A(e,1),v(e,-(r+1)),r+1)},running:function(e){return A(e,T(e)),2},status:function(e){var t=P(e);if(e===t)b(e,"running");else switch(O(t)){case o:b(e,"suspended");break;case a:var r=new l;_(t,0,r)>0?b(e,"normal"):0===p(t)?b(e,"dead"):b(e,"suspended");break;default:b(e,"dead")}return 1},wrap:function(e){return V(e),g(e,D,1),1},yield:function(e){return N(e,p(e))}};e.exports.luaopen_coroutine=function(e){return I(e,B),1}},function(e,t,r){"use strict";var n=r(3).LUA_MAXINTEGER,a=r(2),u=a.LUA_OPEQ,s=a.LUA_OPLT,o=a.LUA_TFUNCTION,l=a.LUA_TNIL,i=a.LUA_TTABLE,c=a.lua_call,f=a.lua_checkstack,_=a.lua_compare,p=a.lua_createtable,v=a.lua_geti,h=a.lua_getmetatable,d=a.lua_gettop,L=a.lua_insert,A=a.lua_isnil,g=a.lua_isnoneornil,b=a.lua_isstring,T=a.lua_pop,x=a.lua_pushinteger,k=a.lua_pushnil,O=a.lua_pushstring,E=a.lua_pushvalue,m=a.lua_rawget,U=a.lua_setfield,y=a.lua_seti,N=a.lua_settop,R=a.lua_toboolean,w=a.lua_type,S=r(7),I=S.luaL_Buffer,M=S.luaL_addlstring,P=S.luaL_addvalue,C=S.luaL_argcheck,D=S.luaL_buffinit,V=S.luaL_checkinteger,B=S.luaL_checktype,G=S.luaL_error,K=S.luaL_len,F=S.luaL_newlib,j=S.luaL_opt,H=S.luaL_optinteger,X=S.luaL_optlstring,z=S.luaL_pushresult,Y=S.luaL_typename,J=r(17),Z=r(5).to_luastring,q=function(e,t,r){return O(e,t),m(e,-r)!==l},W=function(e,t,r){if(w(e,t)!==i){var n=1;!h(e,t)||1&r&&!q(e,Z("__index",!0),++n)||2&r&&!q(e,Z("__newindex",!0),++n)||4&r&&!q(e,Z("__len",!0),++n)?B(e,t,i):T(e,n)}},Q=function(e,t,r){return W(e,t,4|r),K(e,t)},$=function(e,t,r){v(e,1,r),b(e,-1)||G(e,Z("invalid value (%s) at index %d in table for 'concat'"),Y(e,-1),r),P(t)},ee=function(e,t,r){y(e,1,t),y(e,1,r)},te=function(e,t,r){if(A(e,2))return _(e,t,r,s);E(e,2),E(e,t-1),E(e,r-2),c(e,2,1);var n=R(e,-1);return T(e,1),n},re=function(e,t,r){for(var n=t,a=r-1;;){for(;v(e,1,++n),te(e,-1,-2);)n==r-1&&G(e,Z("invalid order function for sorting")),T(e,1);for(;v(e,1,--a),te(e,-3,-1);)a<n&&G(e,Z("invalid order function for sorting")),T(e,1);if(a<n)return T(e,1),ee(e,r-1,n),n;ee(e,n,a)}},ne=function(e,t,r){var n=Math.floor((t-e)/4),a=r%(2*n)+(e+n);return J.lua_assert(e+n<=a&&a<=t-n),a},ae={concat:function(e){var t=Q(e,1,1),r=X(e,2,""),n=r.length,a=H(e,3,1);t=H(e,4,t);var u=new I;for(D(e,u);a<t;a++)$(e,u,a),M(u,r,n);return a===t&&$(e,u,a),z(u),1},insert:function(e){var t,r=Q(e,1,3)+1;switch(d(e)){case 2:t=r;break;case 3:t=V(e,2),C(e,1<=t&&t<=r,2,"position out of bounds");for(var n=r;n>t;n--)v(e,1,n-1),y(e,1,n);break;default:return G(e,"wrong number of arguments to 'insert'")}return y(e,1,t),0},move:function(e){var t=V(e,2),r=V(e,3),a=V(e,4),s=g(e,5)?1:5;if(W(e,1,1),W(e,s,2),r>=t){C(e,t>0||r<n+t,3,"too many elements to move");var o=r-t+1;if(C(e,a<=n-o+1,4,"destination wrap around"),a>r||a<=t||1!==s&&1!==_(e,1,s,u))for(var l=0;l<o;l++)v(e,1,t+l),y(e,s,a+l);else for(var i=o-1;i>=0;i--)v(e,1,t+i),y(e,s,a+i)}return E(e,s),1},pack:function(e){var t=d(e);p(e,t,1),L(e,1);for(var r=t;r>=1;r--)y(e,1,r);return x(e,t),U(e,1,Z("n")),1},remove:function(e){var t=Q(e,1,3),r=H(e,2,t);for(r!==t&&C(e,1<=r&&r<=t+1,1,"position out of bounds"),v(e,1,r);r<t;r++)v(e,1,r+1),y(e,1,r);return k(e),y(e,1,r),1},sort:function(e){var t=Q(e,1,3);return t>1&&(C(e,t<n,1,"array too big"),g(e,2)||B(e,2,o),N(e,2),function e(t,r,n,a){for(;r<n;){if(v(t,1,r),v(t,1,n),te(t,-1,-2)?ee(t,r,n):T(t,2),n-r==1)return;var u=void 0;if(u=n-r<100||0===a?Math.floor((r+n)/2):ne(r,n,a),v(t,1,u),v(t,1,r),te(t,-2,-1)?ee(t,u,r):(T(t,1),v(t,1,n),te(t,-1,-2)?ee(t,u,n):T(t,2)),n-r==2)return;v(t,1,u),E(t,-1),v(t,1,n-1),ee(t,u,n-1);var s=void 0;(u=re(t,r,n))-r<n-u?(e(t,r,u-1,a),s=u-r,r=u+1):(e(t,u+1,n,a),s=n-u,n=u-1),(n-r)/128>s&&(a=Math.floor(4294967296*Math.random()))}}(e,1,t,0)),0},unpack:function(e){var t=H(e,2,1),r=j(e,V,3,K(e,1));if(t>r)return 0;var n=r-t;if(n>=Number.MAX_SAFE_INTEGER||!f(e,++n))return G(e,Z("too many results to unpack"));for(;t<r;t++)v(e,1,t);return v(e,1,r),n}};e.exports.luaopen_table=function(e){return F(e,ae),1}},function(e,t,r){"use strict";var n=r(2),a=n.LUA_TNIL,u=n.LUA_TTABLE,s=(n.lua_close,n.lua_createtable),o=n.lua_getfield,l=(n.lua_isboolean,n.lua_isnoneornil),i=n.lua_pop,c=(n.lua_pushboolean,n.lua_pushfstring),f=n.lua_pushinteger,_=(n.lua_pushliteral,n.lua_pushnil,n.lua_pushnumber),p=(n.lua_pushstring,n.lua_setfield),v=n.lua_settop,h=(n.lua_toboolean,n.lua_tointegerx),d=r(7),L=d.luaL_Buffer,A=d.luaL_addchar,g=d.luaL_addstring,b=d.luaL_argerror,T=d.luaL_buffinit,x=d.luaL_checkinteger,k=(d.luaL_checkstring,d.luaL_checktype),O=d.luaL_error,E=(d.luaL_execresult,d.luaL_fileresult,d.luaL_newlib),m=(d.luaL_optinteger,d.luaL_optlstring),U=(d.luaL_optstring,d.luaL_pushresult),y=r(5),N=y.luastring_eq,R=(y.to_jsstring,y.to_luastring),w=R("aAbBcCdDeFhHIjklmMnpPrRStTuUwWxXyYzZ%"),S=function(e,t,r){f(e,r),p(e,-2,R(t,!0))},I=function(e,t,r){S(e,"sec",r?t.getUTCSeconds():t.getSeconds()),S(e,"min",r?t.getUTCMinutes():t.getMinutes()),S(e,"hour",r?t.getUTCHours():t.getHours()),S(e,"day",r?t.getUTCDate():t.getDate()),S(e,"month",(r?t.getUTCMonth():t.getMonth())+1),S(e,"year",r?t.getUTCFullYear():t.getFullYear()),S(e,"wday",(r?t.getUTCDay():t.getDay())+1),S(e,"yday",Math.floor((t-new Date(t.getFullYear(),0,0))/864e5))},M=Number.MAX_SAFE_INTEGER/2,P=function(e,t,r,n){var u=o(e,-1,R(t,!0)),s=h(e,-1);if(!1===s){if(u!==a)return O(e,R("field '%s' is not an integer"),t);if(r<0)return O(e,R("field '%s' missing in date table"),t);s=r}else{if(!(-M<=s&&s<=M))return O(e,R("field '%s' is out-of-bound"),t);s-=n}return i(e,1),s},C={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((function(e){return R(e)})),shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((function(e){return R(e)})),months:["January","February","March","April","May","June","July","August","September","October","November","December"].map((function(e){return R(e)})),shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map((function(e){return R(e)})),AM:R("AM"),PM:R("PM"),am:R("am"),pm:R("pm"),formats:{c:R("%a %b %e %H:%M:%S %Y"),D:R("%m/%d/%y"),F:R("%Y-%m-%d"),R:R("%H:%M"),r:R("%I:%M:%S %p"),T:R("%H:%M:%S"),X:R("%T"),x:R("%D")}},D=function(e,t){var r=e.getDay();"monday"===t&&(0===r?r=6:r--);var n=(e-new Date(e.getFullYear(),0,1))/864e5;return Math.floor((n+7-r)/7)},V=function(e,t,r){t<10&&A(e,r),g(e,R(String(t)))},B=function(e,t,r){for(var n=w,a=0,u=1;a<n.length&&u<=t.length-r;a+=u)if(n[a]==="|".charCodeAt(0))u++;else if(N(t.subarray(r,r+u),n.subarray(a,a+u)))return u;b(e,1,c(e,R("invalid conversion specifier '%%%s'"),t))},G=function(e,t){return x(e,t)},K={date:function(e){var t=m(e,1,"%c"),r=l(e,2)?new Date:new Date(1e3*G(e,2)),n=!1,a=0;if(t[a]==="!".charCodeAt(0)&&(n=!0,a++),t[a]==="*".charCodeAt(0)&&t[a+1]==="t".charCodeAt(0))s(e,0,9),I(e,r,n);else{new Uint8Array(4)[0]="%".charCodeAt(0);var u=new L;T(e,u),function e(t,r,n,a){for(var u=0;u<n.length;)if(37!==n[u])A(r,n[u++]);else{u++;var s=B(t,n,u);switch(n[u]){case 37:A(r,37);break;case 65:g(r,C.days[a.getDay()]);break;case 66:g(r,C.months[a.getMonth()]);break;case 67:V(r,Math.floor(a.getFullYear()/100),48);break;case 68:e(t,r,C.formats.D,a);break;case 70:e(t,r,C.formats.F,a);break;case 72:V(r,a.getHours(),48);break;case 73:V(r,(a.getHours()+11)%12+1,48);break;case 77:V(r,a.getMinutes(),48);break;case 80:g(r,a.getHours()<12?C.am:C.pm);break;case 82:e(t,r,C.formats.R,a);break;case 83:V(r,a.getSeconds(),48);break;case 84:e(t,r,C.formats.T,a);break;case 85:V(r,D(a,"sunday"),48);break;case 87:V(r,D(a,"monday"),48);break;case 88:e(t,r,C.formats.X,a);break;case 89:g(r,R(String(a.getFullYear())));break;case 90:var o=a.toString().match(/\(([\w\s]+)\)/);o&&g(r,R(o[1]));break;case 97:g(r,C.shortDays[a.getDay()]);break;case 98:case 104:g(r,C.shortMonths[a.getMonth()]);break;case 99:e(t,r,C.formats.c,a);break;case 100:V(r,a.getDate(),48);break;case 101:V(r,a.getDate(),32);break;case 106:var l=Math.floor((a-new Date(a.getFullYear(),0,1))/864e5);l<100&&(l<10&&A(r,48),A(r,48)),g(r,R(String(l)));break;case 107:V(r,a.getHours(),32);break;case 108:V(r,(a.getHours()+11)%12+1,32);break;case 109:V(r,a.getMonth()+1,48);break;case 110:A(r,10);break;case 112:g(r,a.getHours()<12?C.AM:C.PM);break;case 114:e(t,r,C.formats.r,a);break;case 115:g(r,R(String(Math.floor(a/1e3))));break;case 116:A(r,8);break;case 117:var i=a.getDay();g(r,R(String(0===i?7:i)));break;case 119:g(r,R(String(a.getDay())));break;case 120:e(t,r,C.formats.x,a);break;case 121:V(r,a.getFullYear()%100,48);break;case 122:var c=a.getTimezoneOffset();c>0?A(r,45):(c=-c,A(r,43)),V(r,Math.floor(c/60),48),V(r,c%60,48)}u+=s}}(e,u,t,r),U(u)}return 1},difftime:function(e){var t=G(e,1),r=G(e,2);return _(e,t-r),1},time:function(e){var t;return l(e,1)?t=new Date:(k(e,1,u),v(e,1),t=new Date(P(e,"year",-1,0),P(e,"month",-1,1),P(e,"day",-1,0),P(e,"hour",12,0),P(e,"min",0,0),P(e,"sec",0,0)),I(e,t)),f(e,Math.floor(t/1e3)),1}};K.clock=function(e){return _(e,performance.now()/1e3),1};e.exports.luaopen_os=function(e){return E(e,K),1}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=r(38).sprintf,o=r(3),l=o.LUA_INTEGER_FMT,i=o.LUA_INTEGER_FRMLEN,c=o.LUA_MININTEGER,f=o.LUA_NUMBER_FMT,_=o.LUA_NUMBER_FRMLEN,p=o.frexp,v=o.lua_getlocaledecpoint,h=r(2),d=h.LUA_TBOOLEAN,L=h.LUA_TFUNCTION,A=h.LUA_TNIL,g=h.LUA_TNUMBER,b=h.LUA_TSTRING,T=h.LUA_TTABLE,x=h.lua_call,k=h.lua_createtable,O=h.lua_dump,E=h.lua_gettable,m=h.lua_gettop,U=h.lua_isinteger,y=h.lua_isstring,N=h.lua_pop,R=h.lua_pushcclosure,w=h.lua_pushinteger,S=h.lua_pushlightuserdata,I=h.lua_pushliteral,M=h.lua_pushlstring,P=h.lua_pushnil,C=h.lua_pushnumber,D=h.lua_pushstring,V=h.lua_pushvalue,B=h.lua_remove,G=h.lua_setfield,K=h.lua_setmetatable,F=h.lua_settop,j=h.lua_toboolean,H=h.lua_tointeger,X=h.lua_tonumber,z=h.lua_tostring,Y=h.lua_touserdata,J=h.lua_type,Z=h.lua_upvalueindex,q=r(7),W=q.luaL_Buffer,Q=q.luaL_addchar,$=q.luaL_addlstring,ee=q.luaL_addsize,te=q.luaL_addstring,re=q.luaL_addvalue,ne=q.luaL_argcheck,ae=q.luaL_argerror,ue=q.luaL_buffinit,se=q.luaL_buffinitsize,oe=q.luaL_checkinteger,le=q.luaL_checknumber,ie=q.luaL_checkstack,ce=q.luaL_checkstring,fe=q.luaL_checktype,_e=q.luaL_error,pe=q.luaL_newlib,ve=q.luaL_optinteger,he=q.luaL_optstring,de=q.luaL_prepbuffsize,Le=q.luaL_pushresult,Ae=q.luaL_pushresultsize,ge=q.luaL_tolstring,be=q.luaL_typename,Te=r(17),xe=r(5),ke=xe.luastring_eq,Oe=xe.luastring_indexOf,Ee=xe.to_jsstring,me=xe.to_luastring,Ue="%".charCodeAt(0),ye=function(e){var t=Oe(e,0);return t>-1?t:e.length},Ne=function(e,t){return e>=0?e:0-e>t?0:t+e+1},Re=function(e,t,r,n){return $(n,t,r),0},we=_.length+1,Se=function(e,t,r){var n=function(e){if(Object.is(e,1/0))return me("inf");if(Object.is(e,-1/0))return me("-inf");if(Number.isNaN(e))return me("nan");if(0===e){var t=s(f+"x0p+0",e);return Object.is(e,-0)&&(t="-"+t),me(t)}var r="",n=p(e),a=n[0],u=n[1];return a<0&&(r+="-",a=-a),r+="0x",r+=(2*a).toString(16),r+=s("p%+d",u-=1),me(r)}(r);if(65===t[we])for(var a=0;a<n.length;a++){var u=n[a];u>=97&&(n[a]=223&u)}else 97!==t[we]&&_e(e,me("modifiers for format '%%a'/'%%A' not implemented"));return n},Ie=me("-+ #0"),Me=function(e){return 97<=e&&e<=122||65<=e&&e<=90},Pe=function(e){return 48<=e&&e<=57},Ce=function(e){return 0<=e&&e<=31||127===e},De=function(e){return 33<=e&&e<=126},Ve=function(e){return 97<=e&&e<=122},Be=function(e){return 65<=e&&e<=90},Ge=function(e){return 97<=e&&e<=122||65<=e&&e<=90||48<=e&&e<=57},Ke=function(e){return De(e)&&!Ge(e)},Fe=function(e){return 32===e||e>=9&&e<=13},je=function(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102},He=function(e,t,r){switch(J(e,r)){case b:var n=z(e,r);!function(e,t,r){Q(e,34);for(var n=0;r--;){if(34===t[n]||92===t[n]||10===t[n])Q(e,92),Q(e,t[n]);else if(Ce(t[n])){var a=""+t[n];Pe(t[n+1])&&(a="0".repeat(3-a.length)+a),te(e,me("\\"+a))}else Q(e,t[n]);n++}Q(e,34)}(t,n,n.length);break;case g:var a;if(U(e,r)){var u=H(e,r);a=me(s(u===c?"0x%"+i+"x":l,u))}else{var o=X(e,r);(function(e){if(Oe(e,46)<0){var t=v(),r=Oe(e,t);r&&(e[r]=46)}})(a=Se(e,me("%".concat(i,"a")),o))}te(t,a);break;case A:case d:ge(e,r),re(t);break;default:ae(e,r,me("value has no literal form"))}},Xe=function(e,t,r,n){for(var a=r;0!==t[a]&&Oe(Ie,t[a])>=0;)a++;a-r>=Ie.length&&_e(e,me("invalid format (repeated flags)")),Pe(t[a])&&a++,Pe(t[a])&&a++,46===t[a]&&(a++,Pe(t[a])&&a++,Pe(t[a])&&a++),Pe(t[a])&&_e(e,me("invalid format (width or precision too long)")),n[0]=37;for(var u=0;u<a-r+1;u++)n[u+1]=t[r+u];return a},ze=function(e,t){for(var r=e.length,n=t.length,a=e[r-1],u=0;u<n;u++)e[u+r-1]=t[u];e[r+n-1]=a},Ye=a((function e(t){u(this,e),this.L=t,this.islittle=!0,this.maxalign=1})),Je=Pe,Ze=function(e,t){if(e.off>=e.s.length||!Je(e.s[e.off]))return t;var r=0;do{r=10*r+(e.s[e.off++]-48)}while(e.off<e.s.length&&Je(e.s[e.off])&&r<=214748363.8);return r},qe=function(e,t,r){var n=Ze(t,r);return(n>16||n<=0)&&_e(e.L,me("integral size (%d) out of limits [1,%d]"),n,16),n},We=function(e,t){var r={opt:t.s[t.off++],size:0};switch(r.opt){case 98:return r.size=1,r.opt=0,r;case 66:return r.size=1,r.opt=1,r;case 104:return r.size=2,r.opt=0,r;case 72:return r.size=2,r.opt=1,r;case 108:return r.size=4,r.opt=0,r;case 76:return r.size=4,r.opt=1,r;case 106:return r.size=4,r.opt=0,r;case 74:case 84:return r.size=4,r.opt=1,r;case 102:return r.size=4,r.opt=2,r;case 100:case 110:return r.size=8,r.opt=2,r;case 105:return r.size=qe(e,t,4),r.opt=0,r;case 73:return r.size=qe(e,t,4),r.opt=1,r;case 115:return r.size=qe(e,t,4),r.opt=4,r;case 99:return r.size=Ze(t,-1),-1===r.size&&_e(e.L,me("missing size for format option 'c'")),r.opt=3,r;case 122:return r.opt=5,r;case 120:return r.size=1,r.opt=6,r;case 88:return r.opt=7,r;case 32:break;case 60:e.islittle=!0;break;case 62:e.islittle=!1;break;case 61:e.islittle=!0;break;case 33:e.maxalign=qe(e,t,8);break;default:_e(e.L,me("invalid format option '%c'"),r.opt)}return r.opt=8,r},Qe=function(e,t,r){var n={opt:NaN,size:NaN,ntoalign:NaN},a=We(e,r);n.size=a.size,n.opt=a.opt;var u=n.size;if(7===n.opt)if(r.off>=r.s.length||0===r.s[r.off])ae(e.L,1,me("invalid next option for option 'X'"));else{var s=We(e,r);u=s.size,3!==(s=s.opt)&&0!==u||ae(e.L,1,me("invalid next option for option 'X'"))}return u<=1||3===n.opt?n.ntoalign=0:(u>e.maxalign&&(u=e.maxalign),0!=(u&u-1)&&ae(e.L,1,me("format asks for alignment not power of 2")),n.ntoalign=u-(t&u-1)&u-1),n},$e=function(e,t,r,n,a){var u=de(e,n);u[r?0:n-1]=255&t;for(var s=1;s<n;s++)t>>=8,u[r?s:n-1-s]=255&t;if(a&&n>4)for(var o=4;o<n;o++)u[r?o:n-1-o]=255;ee(e,n)},et=function(e,t,r,n,a){for(var u=0,s=n<=4?n:4,o=s-1;o>=0;o--)u<<=8,u|=t[r?o:n-1-o];if(n<4){if(a){var l=1<<8*n-1;u=(u^l)-l}}else if(n>4)for(var i=!a||u>=0?0:255,c=s;c<n;c++)t[r?c:n-1-c]!==i&&_e(e,me("%d-byte integer does not fit into Lua Integer"),n);return u},tt=function(e,t,r,n){Te.lua_assert(t.length>=n);for(var a=new DataView(new ArrayBuffer(n)),u=0;u<n;u++)a.setUint8(u,t[u],r);return 4==n?a.getFloat32(0,r):a.getFloat64(0,r)},rt=me("^$*+?.([%-"),nt=a((function e(t){u(this,e),this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=t,this.matchdepth=NaN,this.level=NaN,this.capture=[]})),at=function(e,t){switch(e.p[t++]){case Ue:return t===e.p_end&&_e(e.L,me("malformed pattern (ends with '%%')")),t+1;case 91:94===e.p[t]&&t++;do{t===e.p_end&&_e(e.L,me("malformed pattern (missing ']')")),e.p[t++]===Ue&&t<e.p_end&&t++}while(93!==e.p[t]);return t+1;default:return t}},ut=function(e,t){switch(t){case 97:return Me(e);case 65:return!Me(e);case 99:return Ce(e);case 67:return!Ce(e);case 100:return Pe(e);case 68:return!Pe(e);case 103:return De(e);case 71:return!De(e);case 108:return Ve(e);case 76:return!Ve(e);case 112:return Ke(e);case 80:return!Ke(e);case 115:return Fe(e);case 83:return!Fe(e);case 117:return Be(e);case 85:return!Be(e);case 119:return Ge(e);case 87:return!Ge(e);case 120:return je(e);case 88:return!je(e);case 122:return 0===e;case 90:return 0!==e;default:return t===e}},st=function(e,t,r,n){var a=!0;for(94===e.p[r+1]&&(a=!1,r++);++r<n;)if(e.p[r]===Ue){if(r++,ut(t,e.p[r]))return a}else if(45===e.p[r+1]&&r+2<n){if(r+=2,e.p[r-2]<=t&&t<=e.p[r])return a}else if(e.p[r]===t)return a;return!a},ot=function(e,t,r,n){if(t>=e.src_end)return!1;var a=e.src[t];switch(e.p[r]){case 46:return!0;case Ue:return ut(a,e.p[r+1]);case 91:return st(e,a,r,n-1);default:return e.p[r]===a}},lt=function(e,t,r){if(r>=e.p_end-1&&_e(e.L,me("malformed pattern (missing arguments to '%%b'")),e.src[t]!==e.p[r])return null;for(var n=e.p[r],a=e.p[r+1],u=1;++t<e.src_end;)if(e.src[t]===a){if(0==--u)return t+1}else e.src[t]===n&&u++;return null},it=function(e,t,r,n){for(var a=0;ot(e,t+a,r,n);)a++;for(;a>=0;){var u=vt(e,t+a,n+1);if(u)return u;a--}return null},ct=function(e,t,r,n){for(;;){var a=vt(e,t,n+1);if(null!==a)return a;if(!ot(e,t,r,n))return null;t++}},ft=function(e,t,r,n){var a,u=e.level;return u>=32&&_e(e.L,me("too many captures")),e.capture[u]=e.capture[u]?e.capture[u]:{},e.capture[u].init=t,e.capture[u].len=n,e.level=u+1,null===(a=vt(e,t,r))&&e.level--,a},_t=function(e,t,r){var n,a=function(e){var t=e.level;for(t--;t>=0;t--)if(-1===e.capture[t].len)return t;return _e(e.L,me("invalid pattern capture"))}(e);return e.capture[a].len=t-e.capture[a].init,null===(n=vt(e,t,r))&&(e.capture[a].len=-1),n},pt=function(e,t,r){r=function(e,t){return(t-=49)<0||t>=e.level||-1===e.capture[t].len?_e(e.L,me("invalid capture index %%%d"),t+1):t}(e,r);var n=e.capture[r].len;return e.src_end-t>=n&&function(e,t,r,n,a){return ke(e.subarray(t,t+a),r.subarray(n,n+a))}(e.src,e.capture[r].init,e.src,t,n)?t+n:null},vt=function e(t,r,n){var a=!1,u=!0;for(0==t.matchdepth--&&_e(t.L,me("pattern too complex"));u||a;)if(u=!1,n!==t.p_end)switch(a?void 0:t.p[n]){case 40:r=41===t.p[n+1]?ft(t,r,n+2,-2):ft(t,r,n+1,-1);break;case 41:r=_t(t,r,n+1);break;case 36:if(n+1!==t.p_end){a=!0;break}r=t.src.length-r==0?r:null;break;case Ue:switch(t.p[n+1]){case 98:null!==(r=lt(t,r,n+2))&&(n+=4,u=!0);break;case 102:n+=2,91!==t.p[n]&&_e(t.L,me("missing '[' after '%%f' in pattern"));var s=at(t,n),o=r===t.src_init?0:t.src[r-1];if(!st(t,o,n,s-1)&&st(t,r===t.src_end?0:t.src[r],n,s-1)){n=s,u=!0;break}r=null;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:null!==(r=pt(t,r,t.p[n+1]))&&(n+=2,u=!0);break;default:a=!0}break;default:a=!1;var l=at(t,n);if(ot(t,r,n,l))switch(t.p[l]){case 63:var i;null!==(i=e(t,r+1,l+1))?r=i:(n=l+1,u=!0);break;case 43:r++;case 42:r=it(t,r,n,l);break;case 45:r=ct(t,r,n,l);break;default:r++,n=l,u=!0}else{if(42===t.p[l]||63===t.p[l]||45===t.p[l]){n=l+1,u=!0;break}r=null}}return t.matchdepth++,r},ht=function(e,t,r,n){if(t>=e.level)0===t?M(e.L,e.src.subarray(r,n),n-r):_e(e.L,me("invalid capture index %%%d"),t+1);else{var a=e.capture[t].len;-1===a&&_e(e.L,me("unfinished capture")),-2===a?w(e.L,e.capture[t].init-e.src_init+1):M(e.L,e.src.subarray(e.capture[t].init),a)}},dt=function(e,t,r){var n=0===e.level&&e.src.subarray(t)?1:e.level;ie(e.L,n,"too many captures");for(var a=0;a<n;a++)ht(e,a,t,r);return n},Lt=function(e,t,r,n,a,u){e.L=t,e.matchdepth=200,e.src=r,e.src_init=0,e.src_end=n,e.p=a,e.p_end=u},At=function(e){e.level=0,Te.lua_assert(200===e.matchdepth)},gt=function(e,t){var r=ce(e,1),n=ce(e,2),a=r.length,u=n.length,s=Ne(ve(e,3,1),a);if(s<1)s=1;else if(s>a+1)return P(e),1;if(t&&(j(e,4)||function(e,t){for(var r=0;r<t;r++)if(-1!==Oe(rt,e[r]))return!1;return!0}(n,u))){var o=function(e,t,r){var n=r>>>0,a=t.length;if(0===a)return n;for(;-1!==(n=e.indexOf(t[0],n));n++)if(ke(e.subarray(n,n+a),t))return n;return-1}(r.subarray(s-1),n,0);if(o>-1)return w(e,s+o),w(e,s+o+u-1),2}else{var l=new nt(e),i=s-1,c=94===n[0];c&&(n=n.subarray(1),u--),Lt(l,e,r,a,n,u);do{var f;if(At(l),null!==(f=vt(l,i,0)))return t?(w(e,i+1),w(e,f),dt(l,null,0)+2):dt(l,i,f)}while(i++<l.src_end&&!c)}return P(e),1},bt=a((function e(){u(this,e),this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new nt})),Tt=function(e){var t=Y(e,Z(3));t.ms.L=e;for(var r=t.src;r<=t.ms.src_end;r++){At(t.ms);var n;if(null!==(n=vt(t.ms,r,t.p))&&n!==t.lastmatch)return t.src=t.lastmatch=n,dt(t.ms,r,n)}return 0},xt=function(e,t,r,n,a){var u=e.L;switch(a){case L:V(u,3);var s=dt(e,r,n);x(u,s,1);break;case T:ht(e,0,r,n),E(u,3);break;default:return void function(e,t,r,n){for(var a=e.L,u=z(a,3),s=u.length,o=0;o<s;o++)u[o]!==Ue?Q(t,u[o]):(o++,Pe(u[o])?48===u[o]?$(t,e.src.subarray(r,n),n-r):(ht(e,u[o]-49,r,n),ge(a,-1),B(a,-2),re(t)):(u[o]!==Ue&&_e(a,me("invalid use of '%c' in replacement string"),Ue),Q(t,u[o])))}(e,t,r,n)}j(u,-1)?y(u,-1)||_e(u,me("invalid replacement value (a %s)"),be(u,-1)):(N(u,1),M(u,e.src.subarray(r,n),n-r)),re(t)},kt={byte:function(e){var t=ce(e,1),r=t.length,n=Ne(ve(e,2,1),r),a=Ne(ve(e,3,n),r);if(n<1&&(n=1),a>r&&(a=r),n>a)return 0;if(a-n>=Number.MAX_SAFE_INTEGER)return _e(e,"string slice too long");var u=a-n+1;ie(e,u,"string slice too long");for(var s=0;s<u;s++)w(e,t[n+s-1]);return u},char:function(e){for(var t=m(e),r=new W,n=se(e,r,t),a=1;a<=t;a++){var u=oe(e,a);ne(e,u>=0&&u<=255,"value out of range"),n[a-1]=u}return Ae(r,t),1},dump:function(e){var t=new W,r=j(e,2);return fe(e,1,L),F(e,1),ue(e,t),0!==O(e,Re,t,r)?_e(e,me("unable to dump given function")):(Le(t),1)},find:function(e){return gt(e,1)},format:function(e){var t=m(e),r=1,n=ce(e,r),a=0,u=new W;for(ue(e,u);a<n.length;)if(n[a]!==Ue)Q(u,n[a++]);else if(n[++a]===Ue)Q(u,n[a++]);else{var o=[];switch(++r>t&&ae(e,r,me("no value")),a=Xe(e,n,a,o),String.fromCharCode(n[a++])){case"c":Q(u,oe(e,r));break;case"d":case"i":case"o":case"u":case"x":case"X":var l=oe(e,r);ze(o,me(i,!0)),te(u,me(s(String.fromCharCode.apply(String,o),l)));break;case"a":case"A":ze(o,me(i,!0)),te(u,Se(e,o,le(e,r)));break;case"e":case"E":case"f":case"g":case"G":var c=le(e,r);ze(o,me(i,!0)),te(u,me(s(String.fromCharCode.apply(String,o),c)));break;case"q":He(e,u,r);break;case"s":var f=ge(e,r);o.length<=2||0===o[2]?re(u):(ne(e,f.length===ye(f),r,"string contains zeros"),Oe(o,46)<0&&f.length>=100?re(u):(te(u,me(s(String.fromCharCode.apply(String,o),Ee(f)))),N(e,1)));break;default:return _e(e,me("invalid option '%%%c' to 'format'"),n[a-1])}}return Le(u),1},gmatch:function(e){var t=ce(e,1),r=ce(e,2),n=t.length,a=r.length;F(e,2);var u=new bt;return S(e,u),Lt(u.ms,e,t,n,r,a),u.src=0,u.p=0,u.lastmatch=null,R(e,Tt,3),1},gsub:function(e){var t=ce(e,1),r=t.length,n=ce(e,2),a=n.length,u=null,s=J(e,3),o=ve(e,4,r+1),l=94===n[0],i=0,c=new nt(e),f=new W;for(ne(e,s===g||s===b||s===L||s===T,3,"string/function/table expected"),ue(e,f),l&&(n=n.subarray(1),a--),Lt(c,e,t,r,n,a),t=0,n=0;i<o;){var _;if(At(c),null!==(_=vt(c,t,n))&&_!==u)i++,xt(c,f,t,_,s),t=u=_;else{if(!(t<c.src_end))break;Q(f,c.src[t++])}if(l)break}return $(f,c.src.subarray(t,c.src_end),c.src_end-t),Le(f),w(e,i),2},len:function(e){return w(e,ce(e,1).length),1},lower:function(e){for(var t=ce(e,1),r=t.length,n=new Uint8Array(r),a=0;a<r;a++){var u=t[a];Be(u)&&(u|=32),n[a]=u}return D(e,n),1},match:function(e){return gt(e,0)},pack:function(e){var t=new W,r=new Ye(e),n={s:ce(e,1),off:0},a=1,u=0;for(P(e),ue(e,t);n.off<n.s.length;){var s=Qe(r,u,n),o=s.opt,l=s.size,i=s.ntoalign;for(u+=i+l;i-- >0;)Q(t,0);switch(a++,o){case 0:var c=oe(e,a);if(l<4){var f=1<<8*l-1;ne(e,-f<=c&&c<f,a,"integer overflow")}$e(t,c,r.islittle,l,c<0);break;case 1:var _=oe(e,a);l<4&&ne(e,_>>>0<1<<8*l,a,"unsigned overflow"),$e(t,_>>>0,r.islittle,l,!1);break;case 2:var p=de(t,l),v=le(e,a),h=new DataView(p.buffer,p.byteOffset,p.byteLength);4===l?h.setFloat32(0,v,r.islittle):h.setFloat64(0,v,r.islittle),ee(t,l);break;case 3:var d=ce(e,a),L=d.length;for(ne(e,L<=l,a,"string longer than given size"),$(t,d,L);L++<l;)Q(t,0);break;case 4:var A=ce(e,a),g=A.length;ne(e,l>=4||g<1<<8*l,a,"string length does not fit in given size"),$e(t,g,r.islittle,l,0),$(t,A,g),u+=g;break;case 5:var b=ce(e,a),T=b.length;ne(e,Oe(b,0)<0,a,"strings contains zeros"),$(t,b,T),Q(t,0),u+=T+1;break;case 6:Q(t,0);case 7:case 8:a--}}return Le(t),1},packsize:function(e){for(var t=new Ye(e),r={s:ce(e,1),off:0},n=0;r.off<r.s.length;){var a=Qe(t,n,r),u=a.opt,s=a.size,o=a.ntoalign;switch(ne(e,n<=2147483647-(s+=o),1,"format result too large"),n+=s,u){case 4:case 5:ae(e,1,"variable-length format")}}return w(e,n),1},rep:function(e){var t=ce(e,1),r=t.length,n=oe(e,2),a=he(e,3,""),u=a.length;if(n<=0)I(e,"");else{if(r+u<r||r+u>2147483647/n)return _e(e,me("resulting string too large"));for(var s=n*r+(n-1)*u,o=new W,l=se(e,o,s),i=0;n-- >1;)l.set(t,i),i+=r,u>0&&(l.set(a,i),i+=u);l.set(t,i),Ae(o,s)}return 1},reverse:function(e){for(var t=ce(e,1),r=t.length,n=new Uint8Array(r),a=0;a<r;a++)n[a]=t[r-1-a];return D(e,n),1},sub:function(e){var t=ce(e,1),r=t.length,n=Ne(oe(e,2),r),a=Ne(ve(e,3,-1),r);return n<1&&(n=1),a>r&&(a=r),n<=a?D(e,t.subarray(n-1,n-1+(a-n+1))):I(e,""),1},unpack:function(e){var t=new Ye(e),r={s:ce(e,1),off:0},n=ce(e,2),a=n.length,u=Ne(ve(e,3,1),a)-1,s=0;for(ne(e,u<=a&&u>=0,3,"initial position out of string");r.off<r.s.length;){var o=Qe(t,u,r),l=o.opt,i=o.size,c=o.ntoalign;switch(u+c+i>a&&ae(e,2,me("data string too short")),u+=c,ie(e,2,"too many results"),s++,l){case 0:case 1:var f=et(e,n.subarray(u),t.islittle,i,0===l);w(e,f);break;case 2:var _=tt(0,n.subarray(u),t.islittle,i);C(e,_);break;case 3:D(e,n.subarray(u,u+i));break;case 4:var p=et(e,n.subarray(u),t.islittle,i,0);ne(e,u+p+i<=a,2,"data string too short"),D(e,n.subarray(u+i,u+i+p)),u+=p;break;case 5:var v=Oe(n,0,u);-1===v&&(v=n.length-u),D(e,n.subarray(u,v)),u=v+1;break;case 7:case 6:case 8:s--}u+=i}return w(e,u+1),s+1},upper:function(e){for(var t=ce(e,1),r=t.length,n=new Uint8Array(r),a=0;a<r;a++){var u=t[a];Ve(u)&&(u&=223),n[a]=u}return D(e,n),1}};e.exports.luaopen_string=function(e){return pe(e,kt),function(e){k(e,0,1),I(e,""),V(e,-2),K(e,-2),N(e,1),V(e,-2),G(e,-2,me("__index",!0)),N(e,1)}(e),1}},function(e,t,r){"use strict";var n=r(2),a=n.lua_gettop,u=n.lua_pushcfunction,s=n.lua_pushfstring,o=n.lua_pushinteger,l=n.lua_pushnil,i=n.lua_pushstring,c=n.lua_pushvalue,f=n.lua_setfield,_=n.lua_tointeger,p=r(7),v=p.luaL_Buffer,h=p.luaL_addvalue,d=p.luaL_argcheck,L=p.luaL_buffinit,A=p.luaL_checkinteger,g=p.luaL_checkstack,b=p.luaL_checkstring,T=p.luaL_error,x=p.luaL_newlib,k=p.luaL_optinteger,O=p.luaL_pushresult,E=r(5),m=E.luastring_of,U=E.to_luastring,y=function(e){return 128===(192&e)},N=function(e,t){return e>=0?e:0-e>t?0:t+e+1},R=[255,127,2047,65535],w=function(e,t){var r=e[t],n=0;if(r<128)n=r;else{for(var a=0;64&r;){var u=e[t+ ++a];if(128!=(192&u))return null;n=n<<6|63&u,r<<=1}if(n|=(127&r)<<5*a,a>3||n>1114111||n<=R[a])return null;t+=a}return{code:n,pos:t+1}},S=U("%U"),I=function(e,t){var r=A(e,t);d(e,0<=r&&r<=1114111,t,"value out of range"),s(e,S,r)},M=function(e){var t=b(e,1),r=t.length,n=_(e,2)-1;if(n<0)n=0;else if(n<r)for(n++;y(t[n]);)n++;if(n>=r)return 0;var a=w(t,n);return null===a||y(t[a.pos])?T(e,U("invalid UTF-8 code")):(o(e,n+1),o(e,a.code),2)},P={char:function(e){var t=a(e);if(1===t)I(e,1);else{var r=new v;L(e,r);for(var n=1;n<=t;n++)I(e,n),h(r);O(r)}return 1},codepoint:function(e){var t=b(e,1),r=N(k(e,2,1),t.length),n=N(k(e,3,r),t.length);if(d(e,r>=1,2,"out of range"),d(e,n<=t.length,3,"out of range"),r>n)return 0;if(n-r>=Number.MAX_SAFE_INTEGER)return T(e,"string slice too long");var a=n-r+1;for(g(e,a,"string slice too long"),a=0,r-=1;r<n;){var u=w(t,r);if(null===u)return T(e,"invalid UTF-8 code");o(e,u.code),r=u.pos,a++}return a},codes:function(e){return b(e,1),u(e,M),c(e,1),o(e,0),3},len:function(e){var t=0,r=b(e,1),n=r.length,a=N(k(e,2,1),n),u=N(k(e,3,-1),n);for(d(e,1<=a&&--a<=n,2,"initial position out of string"),d(e,--u<n,3,"final position out of string");a<=u;){var s=w(r,a);if(null===s)return l(e),o(e,a+1),2;a=s.pos,t++}return o(e,t),1},offset:function(e){var t=b(e,1),r=A(e,2),n=r>=0?1:t.length+1;if(n=N(k(e,3,n),t.length),d(e,1<=n&&--n<=t.length,3,"position out of range"),0===r)for(;n>0&&y(t[n]);)n--;else if(y(t[n])&&T(e,"initial position is a continuation byte"),r<0)for(;r<0&&n>0;){do{n--}while(n>0&&y(t[n]));r++}else for(r--;r>0&&n<t.length;){do{n++}while(y(t[n]));r--}return 0===r?o(e,n+1):l(e),1}},C=m(91,0,45,127,194,45,244,93,91,128,45,191,93,42);e.exports.luaopen_utf8=function(e){return x(e,P),i(e,C),f(e,-2,U("charpattern",!0)),1}},function(e,t,r){"use strict";var n,a=r(2),u=a.LUA_OPLT,s=a.LUA_TNUMBER,o=a.lua_compare,l=a.lua_gettop,i=a.lua_isinteger,c=a.lua_isnoneornil,f=a.lua_pushboolean,_=a.lua_pushinteger,p=a.lua_pushliteral,v=a.lua_pushnil,h=a.lua_pushnumber,d=a.lua_pushvalue,L=a.lua_setfield,A=a.lua_settop,g=a.lua_tointeger,b=a.lua_tointegerx,T=a.lua_type,x=r(7),k=x.luaL_argcheck,O=x.luaL_argerror,E=x.luaL_checkany,m=x.luaL_checkinteger,U=x.luaL_checknumber,y=x.luaL_error,N=x.luaL_newlib,R=x.luaL_optnumber,w=r(3),S=w.LUA_MAXINTEGER,I=w.LUA_MININTEGER,M=w.lua_numbertointeger,P=r(5).to_luastring,C=function(){return n=1103515245*n+12345&2147483647},D=function(e,t){var r=M(t);!1!==r?_(e,r):h(e,t)},V={abs:function(e){if(i(e,1)){var t=g(e,1);t<0&&(t=0|-t),_(e,t)}else h(e,Math.abs(U(e,1)));return 1},acos:function(e){return h(e,Math.acos(U(e,1))),1},asin:function(e){return h(e,Math.asin(U(e,1))),1},atan:function(e){var t=U(e,1),r=R(e,2,1);return h(e,Math.atan2(t,r)),1},ceil:function(e){return i(e,1)?A(e,1):D(e,Math.ceil(U(e,1))),1},cos:function(e){return h(e,Math.cos(U(e,1))),1},deg:function(e){return h(e,U(e,1)*(180/Math.PI)),1},exp:function(e){return h(e,Math.exp(U(e,1))),1},floor:function(e){return i(e,1)?A(e,1):D(e,Math.floor(U(e,1))),1},fmod:function(e){if(i(e,1)&&i(e,2)){var t=g(e,2);0===t?O(e,2,"zero"):_(e,g(e,1)%t|0)}else{var r=U(e,1),n=U(e,2);h(e,r%n)}return 1},log:function(e){var t,r=U(e,1);if(c(e,2))t=Math.log(r);else{var n=U(e,2);t=2===n?Math.log2(r):10===n?Math.log10(r):Math.log(r)/Math.log(n)}return h(e,t),1},max:function(e){var t=l(e),r=1;k(e,t>=1,1,"value expected");for(var n=2;n<=t;n++)o(e,r,n,u)&&(r=n);return d(e,r),1},min:function(e){var t=l(e),r=1;k(e,t>=1,1,"value expected");for(var n=2;n<=t;n++)o(e,n,r,u)&&(r=n);return d(e,r),1},modf:function(e){if(i(e,1))A(e,1),h(e,0);else{var t=U(e,1),r=t<0?Math.ceil(t):Math.floor(t);D(e,r),h(e,t===r?0:t-r)}return 2},rad:function(e){return h(e,U(e,1)*(Math.PI/180)),1},random:function(e){var t,r,a=void 0===n?Math.random():C()/2147483648;switch(l(e)){case 0:return h(e,a),1;case 1:t=1,r=m(e,1);break;case 2:t=m(e,1),r=m(e,2);break;default:return y(e,"wrong number of arguments")}return k(e,t<=r,1,"interval is empty"),k(e,t>=0||r<=S+t,1,"interval too large"),a*=r-t+1,_(e,Math.floor(a)+t),1},randomseed:function(e){var t;return t=U(e,1),0==(n=0|t)&&(n=1),C(),0},sin:function(e){return h(e,Math.sin(U(e,1))),1},sqrt:function(e){return h(e,Math.sqrt(U(e,1))),1},tan:function(e){return h(e,Math.tan(U(e,1))),1},tointeger:function(e){var t=b(e,1);return!1!==t?_(e,t):(E(e,1),v(e)),1},type:function(e){return T(e,1)===s?i(e,1)?p(e,"integer"):p(e,"float"):(E(e,1),v(e)),1},ult:function(e){var t=m(e,1),r=m(e,2);return f(e,t>=0?r<0||t<r:r<0&&t<r),1}};e.exports.luaopen_math=function(e){return N(e,V),h(e,Math.PI),L(e,-2,P("pi",!0)),h(e,1/0),L(e,-2,P("huge",!0)),_(e,S),L(e,-2,P("maxinteger",!0)),_(e,I),L(e,-2,P("mininteger",!0)),1}},function(e,t,r){"use strict";var n,a=r(2),u=a.LUA_MASKCALL,s=a.LUA_MASKCOUNT,o=a.LUA_MASKLINE,l=a.LUA_MASKRET,i=a.LUA_REGISTRYINDEX,c=a.LUA_TFUNCTION,f=a.LUA_TNIL,_=a.LUA_TTABLE,p=a.LUA_TUSERDATA,v=a.lua_Debug,h=a.lua_call,d=a.lua_checkstack,L=a.lua_gethook,A=a.lua_gethookcount,g=a.lua_gethookmask,b=a.lua_getinfo,T=a.lua_getlocal,x=a.lua_getmetatable,k=a.lua_getstack,O=a.lua_getupvalue,E=a.lua_getuservalue,m=a.lua_insert,U=a.lua_iscfunction,y=a.lua_isfunction,N=a.lua_isnoneornil,R=a.lua_isthread,w=a.lua_newtable,S=a.lua_pcall,I=a.lua_pop,M=a.lua_pushboolean,P=a.lua_pushfstring,C=a.lua_pushinteger,D=a.lua_pushlightuserdata,V=a.lua_pushliteral,B=a.lua_pushnil,G=a.lua_pushstring,K=a.lua_pushvalue,F=a.lua_rawgetp,j=a.lua_rawsetp,H=a.lua_rotate,X=a.lua_setfield,z=a.lua_sethook,Y=a.lua_setlocal,J=a.lua_setmetatable,Z=a.lua_settop,q=a.lua_setupvalue,W=a.lua_setuservalue,Q=a.lua_tojsstring,$=a.lua_toproxy,ee=a.lua_tostring,te=a.lua_tothread,re=a.lua_touserdata,ne=a.lua_type,ae=a.lua_upvalueid,ue=a.lua_upvaluejoin,se=a.lua_xmove,oe=r(7),le=oe.luaL_argcheck,ie=oe.luaL_argerror,ce=oe.luaL_checkany,fe=oe.luaL_checkinteger,_e=oe.luaL_checkstring,pe=oe.luaL_checktype,ve=oe.luaL_error,he=oe.luaL_loadbuffer,de=oe.luaL_newlib,Le=oe.luaL_optinteger,Ae=oe.luaL_optstring,ge=oe.luaL_traceback,be=oe.lua_writestringerror,Te=r(17),xe=r(5),ke=xe.luastring_indexOf,Oe=xe.to_luastring,Ee=function(e,t,r){e===t||d(t,r)||ve(e,Oe("stack overflow",!0))},me=function(e){return R(e,1)?{arg:1,thread:te(e,1)}:{arg:0,thread:e}},Ue=function(e,t,r){G(e,r),X(e,-2,t)},ye=function(e,t,r){C(e,r),X(e,-2,t)},Ne=function(e,t,r){M(e,r),X(e,-2,t)},Re=function(e,t,r){e==t?H(e,-2,1):se(t,e,1),X(e,-2,r)},we=function(e,t){var r=fe(e,2);pe(e,1,c);var n=t?O(e,1,r):q(e,1,r);return null===n?0:(G(e,n),m(e,-(t+1)),t+1)},Se=function(e,t,r){var n=fe(e,r);return pe(e,t,c),le(e,null!==O(e,t,n),r,"invalid upvalue index"),n},Ie=Oe("__hooks__",!0),Me=["call","return","line","count","tail call"].map((function(e){return Oe(e)})),Pe=function(e,t){F(e,i,Ie);var r=re(e,-1).get(e);r&&(r(e),G(e,Me[t.event]),t.currentline>=0?C(e,t.currentline):B(e),Te.lua_assert(b(e,Oe("lS"),t)),h(e,2,0))},Ce={gethook:function(e){var t=me(e).thread,r=new Uint8Array(5),n=g(t),a=L(t);if(null===a)B(e);else if(a!==Pe)V(e,"external hook");else{F(e,i,Ie),re(e,-1).get(t)(e)}return G(e,function(e,t){var r=0;return e&u&&(t[r++]=99),e&l&&(t[r++]=114),e&o&&(t[r++]=108),t.subarray(0,r)}(n,r)),C(e,A(t)),3},getinfo:function(e){var t=new v,r=me(e),n=r.arg,a=r.thread,u=Ae(e,n+2,"flnStu");if(Ee(e,a,3),y(e,n+1))u=P(e,Oe(">%s"),u),K(e,n+1),se(e,a,1);else if(!k(a,fe(e,n+1),t))return B(e),1;return b(a,u,t)||ie(e,n+2,"invalid option"),w(e),ke(u,83)>-1&&(Ue(e,Oe("source",!0),t.source),Ue(e,Oe("short_src",!0),t.short_src),ye(e,Oe("linedefined",!0),t.linedefined),ye(e,Oe("lastlinedefined",!0),t.lastlinedefined),Ue(e,Oe("what",!0),t.what)),ke(u,108)>-1&&ye(e,Oe("currentline",!0),t.currentline),ke(u,117)>-1&&(ye(e,Oe("nups",!0),t.nups),ye(e,Oe("nparams",!0),t.nparams),Ne(e,Oe("isvararg",!0),t.isvararg)),ke(u,110)>-1&&(Ue(e,Oe("name",!0),t.name),Ue(e,Oe("namewhat",!0),t.namewhat)),ke(u,116)>-1&&Ne(e,Oe("istailcall",!0),t.istailcall),ke(u,76)>-1&&Re(e,a,Oe("activelines",!0)),ke(u,102)>-1&&Re(e,a,Oe("func",!0)),1},getlocal:function(e){var t=me(e),r=t.thread,n=t.arg,a=new v,u=fe(e,n+2);if(y(e,n+1))return K(e,n+1),G(e,T(e,null,u)),1;var s=fe(e,n+1);if(!k(r,s,a))return ie(e,n+1,"level out of range");Ee(e,r,1);var o=T(r,a,u);return o?(se(r,e,1),G(e,o),H(e,-2,1),2):(B(e),1)},getmetatable:function(e){return ce(e,1),x(e,1)||B(e),1},getregistry:function(e){return K(e,i),1},getupvalue:function(e){return we(e,1)},getuservalue:function(e){return ne(e,1)!==p?B(e):E(e,1),1},sethook:function(e){var t,r,n,a,_=me(e),p=_.thread,v=_.arg;if(N(e,v+1))Z(e,v+1),n=null,t=0,r=0;else{var h=_e(e,v+2);pe(e,v+1,c),r=Le(e,v+3,0),n=Pe,t=function(e,t){var r=0;return ke(e,99)>-1&&(r|=u),ke(e,114)>-1&&(r|=l),ke(e,108)>-1&&(r|=o),t>0&&(r|=s),r}(h,r)}F(e,i,Ie)===f?(a=new WeakMap,D(e,a),j(e,i,Ie)):a=re(e,-1);var d=$(e,v+1);return a.set(p,d),z(p,n,t,r),0},setlocal:function(e){var t=me(e),r=t.thread,n=t.arg,a=new v,u=fe(e,n+1),s=fe(e,n+2);if(!k(r,u,a))return ie(e,n+1,"level out of range");ce(e,n+3),Z(e,n+3),Ee(e,r,1),se(e,r,1);var o=Y(r,a,s);return null===o&&I(r,1),G(e,o),1},setmetatable:function(e){var t=ne(e,2);return le(e,t==f||t==_,2,"nil or table expected"),Z(e,2),J(e,1),1},setupvalue:function(e){return ce(e,3),we(e,0)},setuservalue:function(e){return pe(e,1,p),ce(e,2),Z(e,2),W(e,1),1},traceback:function(e){var t=me(e),r=t.thread,n=t.arg,a=ee(e,n+1);if(null!==a||N(e,n+1)){var u=Le(e,n+2,e===r?1:0);ge(e,r,a,u)}else K(e,n+1);return 1},upvalueid:function(e){var t=Se(e,1,2);return D(e,ae(e,1,t)),1},upvaluejoin:function(e){var t=Se(e,1,2),r=Se(e,3,4);return le(e,!U(e,1),1,"Lua function expected"),le(e,!U(e,3),3,"Lua function expected"),ue(e,1,t,3,r),0}};"undefined"!=typeof window&&(n=function(){var e=prompt("lua_debug>","");return null!==e?e:""}),n&&(Ce.debug=function(e){for(;;){var t=n();if("cont"===t)return 0;if(0!==t.length){var r=Oe(t);(he(e,r,r.length,Oe("=(debug command)",!0))||S(e,0,0,0))&&be(Q(e,-1),"\n"),Z(e,0)}}});e.exports.luaopen_debug=function(e){return de(e,Ce),1}},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a,u=r(3),s=u.LUA_DIRSEP,o=u.LUA_EXEC_DIR,l=u.LUA_JSPATH_DEFAULT,i=u.LUA_PATH_DEFAULT,c=u.LUA_PATH_MARK,f=u.LUA_PATH_SEP,_=r(2),p=_.LUA_OK,v=_.LUA_REGISTRYINDEX,h=_.LUA_TNIL,d=_.LUA_TTABLE,L=_.lua_callk,A=_.lua_createtable,g=_.lua_getfield,b=_.lua_insert,T=_.lua_isfunction,x=_.lua_isnil,k=_.lua_isstring,O=_.lua_newtable,E=_.lua_pop,m=_.lua_pushboolean,U=_.lua_pushcclosure,y=_.lua_pushcfunction,N=_.lua_pushfstring,R=_.lua_pushglobaltable,w=_.lua_pushlightuserdata,S=_.lua_pushliteral,I=_.lua_pushlstring,M=_.lua_pushnil,P=_.lua_pushstring,C=_.lua_pushvalue,D=_.lua_rawgeti,V=_.lua_rawgetp,B=_.lua_rawseti,G=_.lua_rawsetp,K=_.lua_remove,F=_.lua_setfield,j=_.lua_setmetatable,H=_.lua_settop,X=_.lua_toboolean,z=_.lua_tostring,Y=_.lua_touserdata,J=_.lua_upvalueindex,Z=r(7),q=Z.LUA_LOADED_TABLE,W=Z.LUA_PRELOAD_TABLE,Q=Z.luaL_Buffer,$=Z.luaL_addvalue,ee=Z.luaL_buffinit,te=Z.luaL_checkstring,re=Z.luaL_error,ne=Z.luaL_getsubtable,ae=Z.luaL_gsub,ue=Z.luaL_len,se=Z.luaL_loadfile,oe=Z.luaL_newlib,le=Z.luaL_optstring,ie=Z.luaL_pushresult,ce=Z.luaL_setfuncs,fe=r(17),_e=r(5),pe=_e.luastring_indexOf,ve=_e.to_jsstring,he=_e.to_luastring,de=_e.to_uristring,Le=r(0),Ae="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:(0,eval)("this"),ge=he("__JSLIBS__"),be=s,Te=s,xe=he("luaopen_"),ke=he("_"),Oe=he("");a=function(e,t,r){t=de(t);var a=new XMLHttpRequest;if(a.open("GET",t,!1),a.send(),a.status<200||a.status>=300)return P(e,he("".concat(a.status,": ").concat(a.statusText))),null;var u,s=a.response;/\/\/[#@] sourceURL=/.test(s)||(s+=" //# sourceURL="+t);try{u=Function("fengari",s)}catch(t){return P(e,he("".concat(t.name,": ").concat(t.message))),null}var o=u(Le);return"function"==typeof o||"object"===n(o)&&null!==o?o:void 0===o?Ae:(P(e,he("library returned unexpected type (".concat(n(o),")"))),null)};var Ee;Ee=function(e){e=de(e);var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t.status>=200&&t.status<=299};var me=function(e,t,r){var n=Ne(e,t);if(null===n){if(null===(n=a(e,t,r[0]==="*".charCodeAt(0))))return 1;Re(e,t,n)}if(r[0]==="*".charCodeAt(0))return m(e,1),0;var u=function(e,t,r){var n=t[ve(r)];return n&&"function"==typeof n?n:(N(e,he("undefined symbol: %s"),r),null)}(e,n,r);return null===u?2:(y(e,u),0)},Ue=Ae,ye=function(e,t,r,n){var a="".concat(r).concat(fe.LUA_VERSUFFIX);P(e,he(a));var u=Ue[a];void 0===u&&(u=Ue[r]),void 0===u||function(e){g(e,v,he("LUA_NOENV"));var t=X(e,-1);return E(e,1),t}(e)?P(e,n):(u=ae(e,he(u),he(f+f,!0),he(f+ve(Oe)+f,!0)),ae(e,u,Oe,n),K(e,-2)),F(e,-3,t),E(e,1)},Ne=function(e,t){V(e,v,ge),g(e,-1,t);var r=Y(e,-1);return E(e,2),r},Re=function(e,t,r){V(e,v,ge),w(e,r),C(e,-1),F(e,-3,t),B(e,-2,ue(e,-2)+1),E(e,1)},we=function(e,t){for(;t[0]===f.charCodeAt(0);)t=t.subarray(1);if(0===t.length)return null;var r=pe(t,f.charCodeAt(0));return r<0&&(r=t.length),I(e,t,r),t.subarray(r)},Se=function(e,t,r,n,a){var u=new Q;for(ee(e,u),0!==n[0]&&(t=ae(e,t,n,a));null!==(r=we(e,r));){var s=ae(e,z(e,-1),he(c,!0),t);if(K(e,-2),Ee(s))return s;N(e,he("\n\tno file '%s'"),s),K(e,-2),$(u)}return ie(u),null},Ie=function(e,t,r,n){g(e,J(1),r);var a=z(e,-1);return null===a&&re(e,he("'package.%s' must be a string"),r),Se(e,t,a,he("."),n)},Me=function(e,t,r){return t?(P(e,r),2):re(e,he("error loading module '%s' from file '%s':\n\t%s"),z(e,1),r,z(e,-1))},Pe=function(e){var t=te(e,1),r=Ie(e,t,he("path",!0),he(Te,!0));return null===r?1:Me(e,se(e,r)===p,r)},Ce=function(e,t,r){var n;r=ae(e,r,he("."),ke);var a=pe(r,"-".charCodeAt(0));if(a>=0){n=I(e,r,a),n=N(e,he("%s%s"),xe,n);var u=me(e,t,n);if(2!==u)return u;r=a+1}return n=N(e,he("%s%s"),xe,r),me(e,t,n)},De=function(e){var t=te(e,1),r=Ie(e,t,he("jspath",!0),he(be,!0));return null===r?1:Me(e,0===Ce(e,r,t),r)},Ve=function(e){var t,r=te(e,1),n=pe(r,".".charCodeAt(0));if(n<0)return 0;I(e,r,n);var a=Ie(e,z(e,-1),he("jspath",!0),he(be,!0));return null===a?1:0!==(t=Ce(e,a,r))?2!=t?Me(e,0,a):(P(e,he("\n\tno module '%s' in file '%s'"),r,a),1):(P(e,a),2)},Be=function(e){var t=te(e,1);return g(e,v,W),g(e,-1,t)===h&&N(e,he("\n\tno field package.preload['%s']"),t),1},Ge=function e(t,r,n){for(;r===p?(D(t,3,n.i)===h&&(E(t,1),ie(n.msg),re(t,he("module '%s' not found:%s"),n.name,z(t,-1))),P(t,n.name),L(t,1,2,n,e)):r=p,!T(t,-2);n.i++)k(t,-2)?(E(t,1),$(n.msg)):E(t,2);return n.k(t,p,n.ctx)},Ke=function(e,t,r){return P(e,r),b(e,-2),L(e,2,1,r,Fe),Fe(e,p,r)},Fe=function(e,t,r){var n=r;return x(e,-1)||F(e,2,n),g(e,2,n)==h&&(m(e,1),C(e,-1),F(e,2,n)),1},je={loadlib:function(e){var t=te(e,1),r=te(e,2),n=me(e,t,r);return 0===n?1:(M(e),b(e,-2),S(e,1===n?"open":"init"),3)},searchpath:function(e){return null!==Se(e,te(e,1),te(e,2),le(e,3,"."),le(e,4,s))?1:(M(e),b(e,-2),2)}},He={require:function(e){var t=te(e,1);return H(e,1),g(e,v,q),g(e,2,t),X(e,-1)?1:(E(e,1),function(e,t,r,n){var a=new Q;return ee(e,a),g(e,J(1),he("searchers",!0))!==d&&re(e,he("'package.searchers' must be a table")),Ge(e,p,{name:t,i:1,msg:a,ctx:r,k:n})}(e,t,t,Ke))}};e.exports.luaopen_package=function(e){return function(e){O(e),A(e,0,1),j(e,-2),G(e,v,ge)}(e),oe(e,je),function(e){var t=[Be,Pe,De,Ve,null];A(e);for(var r=0;t[r];r++)C(e,-2),U(e,t[r],1),B(e,-2,r+1);F(e,-2,he("searchers",!0))}(e),ye(e,he("path",!0),"LUA_PATH",i),ye(e,he("jspath",!0),"LUA_JSPATH",l),S(e,s+"\n"+f+"\n"+c+"\n"+o+"\n-\n"),F(e,-2,he("config",!0)),ne(e,v,q),F(e,-2,he("loaded",!0)),ne(e,v,W),F(e,-2,he("preload",!0)),R(e),C(e,-2),ce(e,He,1),E(e,1),1}},function(e,t,r){var n=r(2),a=n.lua_pushinteger,u=n.lua_pushliteral,s=n.lua_setfield,o=r(7).luaL_newlib,l=r(5),i=l.FENGARI_AUTHORS,c=l.FENGARI_COPYRIGHT,f=l.FENGARI_RELEASE,_=l.FENGARI_VERSION,p=l.FENGARI_VERSION_MAJOR,v=l.FENGARI_VERSION_MINOR,h=l.FENGARI_VERSION_NUM,d=l.FENGARI_VERSION_RELEASE,L=l.to_luastring;e.exports.luaopen_fengari=function(e){return o(e,{}),u(e,i),s(e,-2,L("AUTHORS")),u(e,c),s(e,-2,L("COPYRIGHT")),u(e,f),s(e,-2,L("RELEASE")),u(e,_),s(e,-2,L("VERSION")),u(e,p),s(e,-2,L("VERSION_MAJOR")),u(e,v),s(e,-2,L("VERSION_MINOR")),a(e,h),s(e,-2,L("VERSION_NUM")),u(e,d),s(e,-2,L("VERSION_RELEASE")),1}},function(e,t,r){"use strict";r.r(t),r.d(t,"L",(function(){return N})),r.d(t,"load",(function(){return R}));var n=r(0);r.d(t,"FENGARI_AUTHORS",(function(){return n.FENGARI_AUTHORS})),r.d(t,"FENGARI_COPYRIGHT",(function(){return n.FENGARI_COPYRIGHT})),r.d(t,"FENGARI_RELEASE",(function(){return n.FENGARI_RELEASE})),r.d(t,"FENGARI_VERSION",(function(){return n.FENGARI_VERSION})),r.d(t,"FENGARI_VERSION_MAJOR",(function(){return n.FENGARI_VERSION_MAJOR})),r.d(t,"FENGARI_VERSION_MINOR",(function(){return n.FENGARI_VERSION_MINOR})),r.d(t,"FENGARI_VERSION_NUM",(function(){return n.FENGARI_VERSION_NUM})),r.d(t,"FENGARI_VERSION_RELEASE",(function(){return n.FENGARI_VERSION_RELEASE})),r.d(t,"luastring_eq",(function(){return n.luastring_eq})),r.d(t,"luastring_indexOf",(function(){return n.luastring_indexOf})),r.d(t,"luastring_of",(function(){return n.luastring_of})),r.d(t,"to_jsstring",(function(){return n.to_jsstring})),r.d(t,"to_luastring",(function(){return n.to_luastring})),r.d(t,"to_uristring",(function(){return n.to_uristring})),r.d(t,"lua",(function(){return n.lua})),r.d(t,"lauxlib",(function(){return n.lauxlib})),r.d(t,"lualib",(function(){return n.lualib}));var a=r(18);r.d(t,"interop",(function(){return a}));var u=n.lua.LUA_ERRRUN,s=n.lua.LUA_ERRSYNTAX,o=n.lua.LUA_OK,l=n.lua.LUA_VERSION_MAJOR,i=n.lua.LUA_VERSION_MINOR,c=n.lua.lua_Debug,f=n.lua.lua_getinfo,_=n.lua.lua_getstack,p=n.lua.lua_gettop,v=n.lua.lua_insert,h=n.lua.lua_pcall,d=n.lua.lua_pop,L=n.lua.lua_pushcfunction,A=n.lua.lua_pushstring,g=n.lua.lua_remove,b=n.lua.lua_setglobal,T=n.lua.lua_tojsstring,x=n.lauxlib.luaL_loadbuffer,k=n.lauxlib.luaL_newstate,O=n.lauxlib.luaL_requiref,E=a.checkjs,m=a.luaopen_js,U=a.push,y=a.tojs,N=k();function R(e,t){if("string"==typeof e)e=Object(n.to_luastring)(e);else if(!(e instanceof Uint8Array))throw new TypeError("expects an array of bytes or javascript string");t=t?Object(n.to_luastring)(t):null;var r,a=x(N,e,null,t);if(r=a===s?new SyntaxError(T(N,-1)):y(N,-1),d(N,1),a!==o)throw r;return r}if(n.lualib.luaL_openlibs(N),O(N,Object(n.to_luastring)("js"),m,1),d(N,1),A(N,Object(n.to_luastring)(n.FENGARI_COPYRIGHT)),b(N,Object(n.to_luastring)("_COPYRIGHT")),"undefined"!=typeof document&&document instanceof HTMLDocument){var w=function(e){switch(e){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}},S=function(e){var t=new c;return _(e,2,t)&&f(e,Object(n.to_luastring)("Sl"),t),U(e,new ErrorEvent("error",{bubbles:!0,cancelable:!0,message:T(e,1),error:y(e,1),filename:t.short_src?Object(n.to_jsstring)(t.short_src):void 0,lineno:t.currentline>0?t.currentline:void 0})),1},I=function(e,t,r){var n,a=x(N,t,null,r);if(a===s){var l=T(N,-1),i=e.src?e.src:document.location,c=new SyntaxError(l,i,void 0);n=new ErrorEvent("error",{message:l,error:c,filename:i,lineno:void 0})}else if(a===o){var f=p(N);L(N,S),v(N,f),Object.defineProperty(document,"currentScript",{value:e,configurable:!0}),a=h(N,0,0,f),delete document.currentScript,g(N,f),a===u&&(n=E(N,-1))}a!==o&&(void 0===n&&(n=new ErrorEvent("error",{message:T(N,-1),error:y(N,-1)})),d(N,1),window.dispatchEvent(n)&&console.error("uncaught exception",n.error))},M=function(e,t,r){if(e.status>=200&&e.status<300){var a=e.response;a="string"==typeof a?Object(n.to_luastring)(e.response):new Uint8Array(a),I(t,a,r)}else t.dispatchEvent(new Event("error"))},P=/^(.*?\/.*?)([\t ]*;.*)?$/,C=/^(\d+)\.(\d+)$/,D=function(e){if("SCRIPT"===e.tagName){var t=P.exec(e.type);if(t){var r=t[1];if("application/lua"===r||"text/lua"===r){if(e.hasAttribute("lua-version")){var a=C.exec(e.getAttribute("lua-version"));if(!a||a[1]!==l||a[2]!==i)return}!function(e){if(e.src){var t=Object(n.to_luastring)("@"+e.src);if("complete"===document.readyState||e.async)if("function"==typeof fetch)fetch(e.src,{method:"GET",credentials:w(e.crossorigin),redirect:"follow",integrity:e.integrity}).then((function(e){if(e.ok)return e.arrayBuffer();throw new Error("unable to fetch")})).then((function(r){var n=new Uint8Array(r);I(e,n,t)})).catch((function(t){e.dispatchEvent(new Event("error"))}));else{var r=new XMLHttpRequest;r.open("GET",e.src,!0),r.responseType="arraybuffer",r.onreadystatechange=function(){4===r.readyState&&M(r,e,t)},r.send()}else{var a=new XMLHttpRequest;a.open("GET",e.src,!1),a.send(),M(a,e,t)}}else{var u=Object(n.to_luastring)(e.innerHTML),s=e.id?Object(n.to_luastring)("="+e.id):u;I(e,u,s)}}(e)}}}};"undefined"!=typeof MutationObserver?new MutationObserver((function(e,t){for(var r=0;r<e.length;r++)for(var n=e[r],a=0;a<n.addedNodes.length;a++)D(n.addedNodes[a])})).observe(document,{childList:!0,subtree:!0}):console.warn&&console.warn("fengari-web: MutationObserver not found; lua script tags will not be run when inserted");Array.prototype.forEach.call(document.querySelectorAll('script[type^="application/lua"], script[type^="text/lua"]'),D)}},function(e,t,r){"use strict";var n=r(1),a=n.LUA_MULTRET,u=n.LUA_OPADD,s=n.LUA_OPBAND,o=n.LUA_OPBNOT,l=n.LUA_OPBOR,i=n.LUA_OPBXOR,c=n.LUA_OPDIV,f=n.LUA_OPIDIV,_=n.LUA_OPMOD,p=n.LUA_OPSHL,v=n.LUA_OPSHR,h=n.LUA_OPUNM,d=n.constant_types,L=d.LUA_TBOOLEAN,A=d.LUA_TLIGHTUSERDATA,g=d.LUA_TLNGSTR,b=d.LUA_TNIL,T=d.LUA_TNUMFLT,x=d.LUA_TNUMINT,k=d.LUA_TTABLE,O=n.to_luastring,E=r(4).lua_assert,m=r(21),U=r(6),y=r(16),N=r(23),R=r(9),w=r(15),S=y.OpCodesI,I=U.TValue,M={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},P={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},C=function(e){return e.t!==e.f},D=function(e,t){var r=N.expkind;if(C(e))return!1;switch(e.k){case r.VKINT:return!t||new I(x,e.u.ival);case r.VKFLT:return!t||new I(T,e.u.nval);default:return!1}},V=function(e,t,r){var n,a=t+r-1;if(e.pc>e.lasttarget&&(n=e.f.code[e.pc-1]).opcode===S.OP_LOADNIL){var u=n.A,s=u+n.B;if(u<=t&&t<=s+1||t<=u&&u<=a+1)return u<t&&(t=u),s>a&&(a=s),y.SETARG_A(n,t),void y.SETARG_B(n,a-t)}ee(e,S.OP_LOADNIL,t,r-1,0)},B=function(e,t){return e.f.code[t.u.info]},G=function(e,t){var r=e.f.code[t].sBx;return-1===r?-1:t+1+r},K=function(e,t,r){var n=e.f.code[t],a=r-(t+1);E(-1!==r),Math.abs(a)>y.MAXARG_sBx&&m.luaX_syntaxerror(e.ls,O("control structure too long",!0)),y.SETARG_sBx(n,a)},F=function(e,t,r){if(-1===r)return t;if(-1===t)t=r;else{for(var n=t,a=G(e,n);-1!==a;)a=G(e,n=a);K(e,n,r)}return t},j=function(e){var t=e.jpc;e.jpc=-1;var r=re(e,S.OP_JMP,0,-1);return r=F(e,r,t)},H=function(e,t,r,n,a){return ee(e,t,r,n,a),j(e)},X=function(e){return e.lasttarget=e.pc,e.pc},z=function(e,t){return t>=1&&y.testTMode(e.f.code[t-1].opcode)?t-1:t},Y=function(e,t){return e.f.code[z(e,t)]},J=function(e,t,r){var n=z(e,t),a=e.f.code[n];return a.opcode===S.OP_TESTSET&&(r!==y.NO_REG&&r!==a.B?y.SETARG_A(a,r):e.f.code[n]=y.CREATE_ABC(S.OP_TEST,a.B,0,a.C),!0)},Z=function(e,t){for(;-1!==t;t=G(e,t))J(e,t,y.NO_REG)},q=function(e,t,r,n,a){for(;-1!==t;){var u=G(e,t);J(e,t,n)?K(e,t,r):K(e,t,a),t=u}},W=function(e,t){X(e),e.jpc=F(e,e.jpc,t)},Q=function(e,t,r){r===e.pc?W(e,t):(E(r<e.pc),q(e,t,r,y.NO_REG,r))},$=function(e,t){var r=e.f;return function(e){q(e,e.jpc,e.pc,y.NO_REG,e.pc),e.jpc=-1}(e),r.code[e.pc]=t,r.lineinfo[e.pc]=e.ls.lastline,e.pc++},ee=function(e,t,r,n,a){return E(y.getOpMode(t)===y.iABC),E(y.getBMode(t)!==y.OpArgN||0===n),E(y.getCMode(t)!==y.OpArgN||0===a),E(r<=y.MAXARG_A&&n<=y.MAXARG_B&&a<=y.MAXARG_C),$(e,y.CREATE_ABC(t,r,n,a))},te=function(e,t,r,n){return E(y.getOpMode(t)===y.iABx||y.getOpMode(t)===y.iAsBx),E(y.getCMode(t)===y.OpArgN),E(r<=y.MAXARG_A&&n<=y.MAXARG_Bx),$(e,y.CREATE_ABx(t,r,n))},re=function(e,t,r,n){return te(e,t,r,n+y.MAXARG_sBx)},ne=function(e,t){return E(t<=y.MAXARG_Ax),$(e,y.CREATE_Ax(S.OP_EXTRAARG,t))},ae=function(e,t,r){if(r<=y.MAXARG_Bx)return te(e,S.OP_LOADK,t,r);var n=te(e,S.OP_LOADKX,t,0);return ne(e,r),n},ue=function(e,t){var r=e.freereg+t;r>e.f.maxstacksize&&(r>=255&&m.luaX_syntaxerror(e.ls,O("function or expression needs too many registers",!0)),e.f.maxstacksize=r)},se=function(e,t){ue(e,t),e.freereg+=t},oe=function(e,t){!y.ISK(t)&&t>=e.nactvar&&(e.freereg--,E(t===e.freereg))},le=function(e,t){t.k===N.expkind.VNONRELOC&&oe(e,t.u.info)},ie=function(e,t,r){var n=t.k===N.expkind.VNONRELOC?t.u.info:-1,a=r.k===N.expkind.VNONRELOC?r.u.info:-1;n>a?(oe(e,n),oe(e,a)):(oe(e,a),oe(e,n))},ce=function(e,t,r){var n=e.f,a=R.luaH_get(e.L,e.ls.h,t);if(a.ttisinteger()){var u=a.value;if(u<e.nk&&n.k[u].ttype()===r.ttype()&&n.k[u].value===r.value)return u}var s=e.nk;return R.luaH_setfrom(e.L,e.ls.h,t,new U.TValue(x,s)),n.k[s]=r,e.nk++,s},fe=function(e,t){var r=new I(A,t),n=new I(x,t);return ce(e,r,n)},_e=function(e,t){var r=new I(T,t);return ce(e,r,r)},pe=function(e,t){var r=new I(L,t);return ce(e,r,r)},ve=function(e,t,r){var n=N.expkind;if(t.k===n.VCALL)y.SETARG_C(B(e,t),r+1);else if(t.k===n.VVARARG){var u=B(e,t);y.SETARG_B(u,r+1),y.SETARG_A(u,e.freereg),se(e,1)}else E(r===a)},he=function(e,t){var r=N.expkind;t.k===r.VCALL?(E(2===B(e,t).C),t.k=r.VNONRELOC,t.u.info=B(e,t).A):t.k===r.VVARARG&&(y.SETARG_B(B(e,t),2),t.k=r.VRELOCABLE)},de=function(e,t){var r=N.expkind;switch(t.k){case r.VLOCAL:t.k=r.VNONRELOC;break;case r.VUPVAL:t.u.info=ee(e,S.OP_GETUPVAL,0,t.u.info,0),t.k=r.VRELOCABLE;break;case r.VINDEXED:var n;oe(e,t.u.ind.idx),t.u.ind.vt===r.VLOCAL?(oe(e,t.u.ind.t),n=S.OP_GETTABLE):(E(t.u.ind.vt===r.VUPVAL),n=S.OP_GETTABUP),t.u.info=ee(e,n,0,t.u.ind.t,t.u.ind.idx),t.k=r.VRELOCABLE;break;case r.VVARARG:case r.VCALL:he(e,t)}},Le=function(e,t,r,n){return X(e),ee(e,S.OP_LOADBOOL,t,r,n)},Ae=function(e,t,r){var n=N.expkind;switch(de(e,t),t.k){case n.VNIL:V(e,r,1);break;case n.VFALSE:case n.VTRUE:ee(e,S.OP_LOADBOOL,r,t.k===n.VTRUE,0);break;case n.VK:ae(e,r,t.u.info);break;case n.VKFLT:ae(e,r,_e(e,t.u.nval));break;case n.VKINT:ae(e,r,fe(e,t.u.ival));break;case n.VRELOCABLE:var a=B(e,t);y.SETARG_A(a,r);break;case n.VNONRELOC:r!==t.u.info&&ee(e,S.OP_MOVE,r,t.u.info,0);break;default:return void E(t.k===n.VJMP)}t.u.info=r,t.k=n.VNONRELOC},ge=function(e,t){t.k!==N.expkind.VNONRELOC&&(se(e,1),Ae(e,t,e.freereg-1))},be=function(e,t){for(;-1!==t;t=G(e,t)){if(Y(e,t).opcode!==S.OP_TESTSET)return!0}return!1},Te=function(e,t,r){var n=N.expkind;if(Ae(e,t,r),t.k===n.VJMP&&(t.t=F(e,t.t,t.u.info)),C(t)){var a,u=-1,s=-1;if(be(e,t.t)||be(e,t.f)){var o=t.k===n.VJMP?-1:j(e);u=Le(e,r,0,1),s=Le(e,r,1,0),W(e,o)}a=X(e),q(e,t.f,a,r,u),q(e,t.t,a,r,s)}t.f=t.t=-1,t.u.info=r,t.k=n.VNONRELOC},xe=function(e,t){de(e,t),le(e,t),se(e,1),Te(e,t,e.freereg-1)},ke=function(e,t){if(de(e,t),t.k===N.expkind.VNONRELOC){if(!C(t))return t.u.info;if(t.u.info>=e.nactvar)return Te(e,t,t.u.info),t.u.info}return xe(e,t),t.u.info},Oe=function(e,t){C(t)?ke(e,t):de(e,t)},Ee=function(e,t){var r=N.expkind,n=!1;switch(Oe(e,t),t.k){case r.VTRUE:t.u.info=pe(e,!0),n=!0;break;case r.VFALSE:t.u.info=pe(e,!1),n=!0;break;case r.VNIL:t.u.info=function(e){var t=new I(b,null),r=new I(k,e.ls.h);return ce(e,r,t)}(e),n=!0;break;case r.VKINT:t.u.info=fe(e,t.u.ival),n=!0;break;case r.VKFLT:t.u.info=_e(e,t.u.nval),n=!0;break;case r.VK:n=!0}return n&&(t.k=r.VK,t.u.info<=y.MAXINDEXRK)?y.RKASK(t.u.info):ke(e,t)},me=function(e,t){var r=Y(e,t.u.info);E(y.testTMode(r.opcode)&&r.opcode!==S.OP_TESTSET&&r.opcode!==S.OP_TEST),y.SETARG_A(r,!r.A)},Ue=function(e,t,r){if(t.k===N.expkind.VRELOCABLE){var n=B(e,t);if(n.opcode===S.OP_NOT)return e.pc--,H(e,S.OP_TEST,n.B,0,!r)}return ge(e,t),le(e,t),H(e,S.OP_TESTSET,y.NO_REG,t.u.info,r)},ye=function(e,t){var r,n=N.expkind;switch(de(e,t),t.k){case n.VJMP:me(e,t),r=t.u.info;break;case n.VK:case n.VKFLT:case n.VKINT:case n.VTRUE:r=-1;break;default:r=Ue(e,t,0)}t.f=F(e,t.f,r),W(e,t.t),t.t=-1},Ne=function(e,t){var r,n=N.expkind;switch(de(e,t),t.k){case n.VJMP:r=t.u.info;break;case n.VNIL:case n.VFALSE:r=-1;break;default:r=Ue(e,t,1)}t.t=F(e,t.t,r),W(e,t.f),t.f=-1},Re=function(e,t,r){var n,a,u=N.expkind;if(!(n=D(t,!0))||!(a=D(r,!0))||!function(e,t,r){switch(e){case s:case l:case i:case p:case v:case o:return!1!==w.tointeger(t)&&!1!==w.tointeger(r);case c:case f:case _:return 0!==r.value;default:return 1}}(e,n,a))return 0;var h=new I;if(U.luaO_arith(null,e,n,a,h),h.ttisinteger())t.k=u.VKINT,t.u.ival=h.value;else{var d=h.value;if(isNaN(d)||0===d)return!1;t.k=u.VKFLT,t.u.nval=d}return!0},we=function(e,t,r,n,a){var u=Ee(e,n),s=Ee(e,r);ie(e,r,n),r.u.info=ee(e,t,0,s,u),r.k=N.expkind.VRELOCABLE,Se(e,a)},Se=function(e,t){e.f.lineinfo[e.pc-1]=t};e.exports.BinOpr=M,e.exports.NO_JUMP=-1,e.exports.UnOpr=P,e.exports.getinstruction=B,e.exports.luaK_checkstack=ue,e.exports.luaK_code=$,e.exports.luaK_codeABC=ee,e.exports.luaK_codeABx=te,e.exports.luaK_codeAsBx=re,e.exports.luaK_codek=ae,e.exports.luaK_concat=F,e.exports.luaK_dischargevars=de,e.exports.luaK_exp2RK=Ee,e.exports.luaK_exp2anyreg=ke,e.exports.luaK_exp2anyregup=function(e,t){(t.k!==N.expkind.VUPVAL||C(t))&&ke(e,t)},e.exports.luaK_exp2nextreg=xe,e.exports.luaK_exp2val=Oe,e.exports.luaK_fixline=Se,e.exports.luaK_getlabel=X,e.exports.luaK_goiffalse=Ne,e.exports.luaK_goiftrue=ye,e.exports.luaK_indexed=function(e,t,r){var n=N.expkind;E(!C(t)&&(N.vkisinreg(t.k)||t.k===n.VUPVAL)),t.u.ind.t=t.u.info,t.u.ind.idx=Ee(e,r),t.u.ind.vt=t.k===n.VUPVAL?n.VUPVAL:n.VLOCAL,t.k=n.VINDEXED},e.exports.luaK_infix=function(e,t,r){switch(t){case M.OPR_AND:ye(e,r);break;case M.OPR_OR:Ne(e,r);break;case M.OPR_CONCAT:xe(e,r);break;case M.OPR_ADD:case M.OPR_SUB:case M.OPR_MUL:case M.OPR_DIV:case M.OPR_IDIV:case M.OPR_MOD:case M.OPR_POW:case M.OPR_BAND:case M.OPR_BOR:case M.OPR_BXOR:case M.OPR_SHL:case M.OPR_SHR:D(r,!1)||Ee(e,r);break;default:Ee(e,r)}},e.exports.luaK_intK=fe,e.exports.luaK_jump=j,e.exports.luaK_jumpto=function(e,t){return Q(e,j(e),t)},e.exports.luaK_nil=V,e.exports.luaK_numberK=_e,e.exports.luaK_patchclose=function(e,t,r){for(r++;-1!==t;t=G(e,t)){var n=e.f.code[t];E(n.opcode===S.OP_JMP&&(0===n.A||n.A>=r)),y.SETARG_A(n,r)}},e.exports.luaK_patchlist=Q,e.exports.luaK_patchtohere=W,e.exports.luaK_posfix=function(e,t,r,n,a){var s=N.expkind;switch(t){case M.OPR_AND:E(-1===r.t),de(e,n),n.f=F(e,n.f,r.f),r.to(n);break;case M.OPR_OR:E(-1===r.f),de(e,n),n.t=F(e,n.t,r.t),r.to(n);break;case M.OPR_CONCAT:Oe(e,n);var o=B(e,n);n.k===s.VRELOCABLE&&o.opcode===S.OP_CONCAT?(E(r.u.info===o.B-1),le(e,r),y.SETARG_B(o,r.u.info),r.k=s.VRELOCABLE,r.u.info=n.u.info):(xe(e,n),we(e,S.OP_CONCAT,r,n,a));break;case M.OPR_ADD:case M.OPR_SUB:case M.OPR_MUL:case M.OPR_DIV:case M.OPR_IDIV:case M.OPR_MOD:case M.OPR_POW:case M.OPR_BAND:case M.OPR_BOR:case M.OPR_BXOR:case M.OPR_SHL:case M.OPR_SHR:Re(t+u,r,n)||we(e,t+S.OP_ADD,r,n,a);break;case M.OPR_EQ:case M.OPR_LT:case M.OPR_LE:case M.OPR_NE:case M.OPR_GT:case M.OPR_GE:!function(e,t,r,n){var a,u=N.expkind;r.k===u.VK?a=y.RKASK(r.u.info):(E(r.k===u.VNONRELOC),a=r.u.info);var s=Ee(e,n);switch(ie(e,r,n),t){case M.OPR_NE:r.u.info=H(e,S.OP_EQ,0,a,s);break;case M.OPR_GT:case M.OPR_GE:var o=t-M.OPR_NE+S.OP_EQ;r.u.info=H(e,o,1,s,a);break;default:var l=t-M.OPR_EQ+S.OP_EQ;r.u.info=H(e,l,1,a,s)}r.k=u.VJMP}(e,t,r,n)}return r},e.exports.luaK_prefix=function(e,t,r,n){var a=new N.expdesc;switch(a.k=N.expkind.VKINT,a.u.ival=a.u.nval=a.u.info=0,a.t=-1,a.f=-1,t){case P.OPR_MINUS:case P.OPR_BNOT:if(Re(t+h,r,a))break;case P.OPR_LEN:!function(e,t,r,n){var a=ke(e,r);le(e,r),r.u.info=ee(e,t,0,a,0),r.k=N.expkind.VRELOCABLE,Se(e,n)}(e,t+S.OP_UNM,r,n);break;case P.OPR_NOT:!function(e,t){var r=N.expkind;switch(de(e,t),t.k){case r.VNIL:case r.VFALSE:t.k=r.VTRUE;break;case r.VK:case r.VKFLT:case r.VKINT:case r.VTRUE:t.k=r.VFALSE;break;case r.VJMP:me(e,t);break;case r.VRELOCABLE:case r.VNONRELOC:ge(e,t),le(e,t),t.u.info=ee(e,S.OP_NOT,0,t.u.info,0),t.k=r.VRELOCABLE}var n=t.f;t.f=t.t,t.t=n,Z(e,t.f),Z(e,t.t)}(e,r)}},e.exports.luaK_reserveregs=se,e.exports.luaK_ret=function(e,t,r){ee(e,S.OP_RETURN,t,r+1,0)},e.exports.luaK_self=function(e,t,r){ke(e,t);var n=t.u.info;le(e,t),t.u.info=e.freereg,t.k=N.expkind.VNONRELOC,se(e,2),ee(e,S.OP_SELF,t.u.info,n,Ee(e,r)),le(e,r)},e.exports.luaK_setlist=function(e,t,r,n){var u=(r-1)/y.LFIELDS_PER_FLUSH+1,s=n===a?0:n;E(0!==n&&n<=y.LFIELDS_PER_FLUSH),u<=y.MAXARG_C?ee(e,S.OP_SETLIST,t,s,u):u<=y.MAXARG_Ax?(ee(e,S.OP_SETLIST,t,s,0),ne(e,u)):m.luaX_syntaxerror(e.ls,O("constructor too long",!0)),e.freereg=t+1},e.exports.luaK_setmultret=function(e,t){ve(e,t,a)},e.exports.luaK_setoneret=he,e.exports.luaK_setreturns=ve,e.exports.luaK_storevar=function(e,t,r){var n=N.expkind;switch(t.k){case n.VLOCAL:return le(e,r),void Te(e,r,t.u.info);case n.VUPVAL:var a=ke(e,r);ee(e,S.OP_SETUPVAL,a,t.u.info,0);break;case n.VINDEXED:var u=t.u.ind.vt===n.VLOCAL?S.OP_SETTABLE:S.OP_SETTABUP,s=Ee(e,r);ee(e,u,t.u.ind.t,t.u.ind.idx,s)}le(e,r)},e.exports.luaK_stringK=function(e,t){var r=new I(g,t);return ce(e,r,r)}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(1),u=a.LUA_SIGNATURE,s=a.constant_types,o=s.LUA_TBOOLEAN,l=s.LUA_TLNGSTR,i=s.LUA_TNIL,c=s.LUA_TNUMFLT,f=s.LUA_TNUMINT,_=s.LUA_TSHRSTR,p=a.thread_status.LUA_ERRSYNTAX,v=a.is_luastring,h=a.luastring_eq,d=a.to_luastring,L=r(8),A=r(13),g=r(6),b=r(16),T=b.MAXARG_sBx,x=b.POS_A,k=b.POS_Ax,O=b.POS_B,E=b.POS_Bx,m=b.POS_C,U=b.POS_OP,y=b.SIZE_A,N=b.SIZE_Ax,R=b.SIZE_B,w=b.SIZE_Bx,S=b.SIZE_C,I=b.SIZE_OP,M=r(4).lua_assert,P=r(10).luaS_bless,C=r(20),D=C.luaZ_read,V=C.ZIO,B=[25,147,13,10,26,10],G=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,M(r instanceof V,"BytecodeParser only operates on a ZIO"),M(v(n)),64===n[0]||61===n[0]?this.name=n.subarray(1):n[0]==u[0]?this.name=d("binary string",!0):this.name=n,this.L=t,this.Z=r,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}var t,r,a;return t=e,a=[{key:"MASK1",value:function(e,t){return~(-1<<e)<<t}}],(r=[{key:"read",value:function(e){var t=new Uint8Array(e);return 0!==D(this.Z,t,0,e)&&this.error("truncated"),t}},{key:"LoadByte",value:function(){return 0!==D(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}},{key:"LoadInt",value:function(){return 0!==D(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"LoadNumber",value:function(){return 0!==D(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}},{key:"LoadInteger",value:function(){return 0!==D(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}},{key:"LoadSize_t",value:function(){return this.LoadInteger()}},{key:"LoadString",value:function(){var e=this.LoadByte();return 255===e&&(e=this.LoadSize_t()),0===e?null:P(this.L,this.read(e-1))}},{key:"LoadCode",value:function(t){for(var r=this.LoadInt(),n=e,a=0;a<r;a++){0!==D(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated");var u=this.dv.getUint32(0,!0);t.code[a]={code:u,opcode:u>>U&n.MASK1(I,0),A:u>>x&n.MASK1(y,0),B:u>>O&n.MASK1(R,0),C:u>>m&n.MASK1(S,0),Bx:u>>E&n.MASK1(w,0),Ax:u>>k&n.MASK1(N,0),sBx:(u>>E&n.MASK1(w,0))-T}}}},{key:"LoadConstants",value:function(e){for(var t=this.LoadInt(),r=0;r<t;r++){var n=this.LoadByte();switch(n){case i:e.k.push(new g.TValue(i,null));break;case o:e.k.push(new g.TValue(o,0!==this.LoadByte()));break;case c:e.k.push(new g.TValue(c,this.LoadNumber()));break;case f:e.k.push(new g.TValue(f,this.LoadInteger()));break;case _:case l:e.k.push(new g.TValue(l,this.LoadString()));break;default:this.error("unrecognized constant '".concat(n,"'"))}}}},{key:"LoadProtos",value:function(e){for(var t=this.LoadInt(),r=0;r<t;r++)e.p[r]=new A.Proto(this.L),this.LoadFunction(e.p[r],e.source)}},{key:"LoadUpvalues",value:function(e){for(var t=this.LoadInt(),r=0;r<t;r++)e.upvalues[r]={name:null,instack:this.LoadByte(),idx:this.LoadByte()}}},{key:"LoadDebug",value:function(e){for(var t=this.LoadInt(),r=0;r<t;r++)e.lineinfo[r]=this.LoadInt();t=this.LoadInt();for(var n=0;n<t;n++)e.locvars[n]={varname:this.LoadString(),startpc:this.LoadInt(),endpc:this.LoadInt()};t=this.LoadInt();for(var a=0;a<t;a++)e.upvalues[a].name=this.LoadString()}},{key:"LoadFunction",value:function(e,t){e.source=this.LoadString(),null===e.source&&(e.source=t),e.linedefined=this.LoadInt(),e.lastlinedefined=this.LoadInt(),e.numparams=this.LoadByte(),e.is_vararg=0!==this.LoadByte(),e.maxstacksize=this.LoadByte(),this.LoadCode(e),this.LoadConstants(e),this.LoadUpvalues(e),this.LoadProtos(e),this.LoadDebug(e)}},{key:"checkliteral",value:function(e,t){var r=this.read(e.length);h(r,e)||this.error(t)}},{key:"checkHeader",value:function(){this.checkliteral(u.subarray(1),"not a"),83!==this.LoadByte()&&this.error("version mismatch in"),0!==this.LoadByte()&&this.error("format mismatch in"),this.checkliteral(B,"corrupted"),this.intSize=this.LoadByte(),this.size_tSize=this.LoadByte(),this.instructionSize=this.LoadByte(),this.integerSize=this.LoadByte(),this.numberSize=this.LoadByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.LoadInteger()&&this.error("endianness mismatch in"),370.5!==this.LoadNumber()&&this.error("float format mismatch in")}},{key:"error",value:function(e){g.luaO_pushfstring(this.L,d("%s: %s precompiled chunk"),this.name,d(e)),L.luaD_throw(this.L,p)}},{key:"checksize",value:function(e,t,r){e!==t&&this.error("".concat(r," size mismatch in"))}}])&&n(t.prototype,r),a&&n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports.luaU_undump=function(e,t,r){var n=new G(e,t,r);n.checkHeader();var a=A.luaF_newLclosure(e,n.LoadByte());return L.luaD_inctop(e),e.stack[e.top-1].setclLvalue(a),a.p=new A.Proto(e),n.LoadFunction(a.p,null),M(a.nupvalues===a.p.upvalues.length),a}},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var u=r(1),s=u.LUA_SIGNATURE,o=u.LUA_VERSION_MAJOR,l=u.LUA_VERSION_MINOR,i=u.constant_types,c=i.LUA_TBOOLEAN,f=i.LUA_TLNGSTR,_=i.LUA_TNIL,p=i.LUA_TNUMFLT,v=i.LUA_TNUMINT,h=i.LUA_TSHRSTR,d=u.luastring_of,L=d(25,147,13,10,26,10),A=16*Number(o)+Number(l),g=a((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN})),b=function(e,t,r){0===r.status&&t>0&&(r.status=r.writer(r.L,e,t,r.data))},T=function(e,t){b(d(e),1,t)},x=function(e,t){var r=new ArrayBuffer(4);new DataView(r).setInt32(0,e,!0);var n=new Uint8Array(r);b(n,4,t)},k=function(e,t){var r=new ArrayBuffer(4);new DataView(r).setInt32(0,e,!0);var n=new Uint8Array(r);b(n,4,t)},O=function(e,t){var r=new ArrayBuffer(8);new DataView(r).setFloat64(0,e,!0);var n=new Uint8Array(r);b(n,8,t)},E=function(e,t){if(null===e)T(0,t);else{var r=e.tsslen()+1,n=e.getstr();r<255?T(r,t):(T(255,t),k(r,t)),b(n,r-1,t)}},m=function(e,t){var r=e.p.length;x(r,t);for(var n=0;n<r;n++)U(e.p[n],e.source,t)},U=function(e,t,r){r.strip||e.source===t?E(null,r):E(e.source,r),x(e.linedefined,r),x(e.lastlinedefined,r),T(e.numparams,r),T(e.is_vararg?1:0,r),T(e.maxstacksize,r),function(e,t){var r=e.code.map((function(e){return e.code}));x(r.length,t);for(var n=0;n<r.length;n++)x(r[n],t)}(e,r),function(e,t){var r=e.k.length;x(r,t);for(var n=0;n<r;n++){var a=e.k[n];switch(T(a.ttype(),t),a.ttype()){case _:break;case c:T(a.value?1:0,t);break;case p:O(a.value,t);break;case v:k(a.value,t);break;case h:case f:E(a.tsvalue(),t)}}}(e,r),function(e,t){var r=e.upvalues.length;x(r,t);for(var n=0;n<r;n++)T(e.upvalues[n].instack?1:0,t),T(e.upvalues[n].idx,t)}(e,r),m(e,r),function(e,t){var r=t.strip?0:e.lineinfo.length;x(r,t);for(var n=0;n<r;n++)x(e.lineinfo[n],t);r=t.strip?0:e.locvars.length,x(r,t);for(var a=0;a<r;a++)E(e.locvars[a].varname,t),x(e.locvars[a].startpc,t),x(e.locvars[a].endpc,t);r=t.strip?0:e.upvalues.length,x(r,t);for(var u=0;u<r;u++)E(e.upvalues[u].name,t)}(e,r)};e.exports.luaU_dump=function(e,t,r,n,a){var u=new g;return u.L=e,u.writer=r,u.data=n,u.strip=a,u.status=0,function(e){b(s,s.length,e),T(A,e),T(0,e),b(L,L.length,e),T(4,e),T(4,e),T(4,e),T(4,e),T(8,e),k(22136,e),O(370.5,e)}(u),T(t.upvalues.length,u),U(t,null,u),u.status}},function(e,t,r){var n;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){"use strict";var u={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function s(e){return l(c(e),arguments)}function o(e,t){return s.apply(null,[e].concat(t||[]))}function l(e,t){var r,n,o,l,i,c,f,_,p,v=1,h=e.length,d="";for(n=0;n<h;n++)if("string"==typeof e[n])d+=e[n];else if("object"===a(e[n])){if((l=e[n]).keys)for(r=t[v],o=0;o<l.keys.length;o++){if(null==r)throw new Error(s('[sprintf] Cannot access property "%s" of undefined value "%s"',l.keys[o],l.keys[o-1]));r=r[l.keys[o]]}else r=l.param_no?t[l.param_no]:t[v++];if(u.not_type.test(l.type)&&u.not_primitive.test(l.type)&&r instanceof Function&&(r=r()),u.numeric_arg.test(l.type)&&"number"!=typeof r&&isNaN(r))throw new TypeError(s("[sprintf] expecting number but found %T",r));switch(u.number.test(l.type)&&(_=r>=0),l.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,l.width?parseInt(l.width):0);break;case"e":r=l.precision?parseFloat(r).toExponential(l.precision):parseFloat(r).toExponential();break;case"f":r=l.precision?parseFloat(r).toFixed(l.precision):parseFloat(r);break;case"g":r=l.precision?String(Number(r.toPrecision(l.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=l.precision?r.substring(0,l.precision):r;break;case"t":r=String(!!r),r=l.precision?r.substring(0,l.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=l.precision?r.substring(0,l.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=l.precision?r.substring(0,l.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}u.json.test(l.type)?d+=r:(!u.number.test(l.type)||_&&!l.sign?p="":(p=_?"+":"-",r=r.toString().replace(u.sign,"")),c=l.pad_char?"0"===l.pad_char?"0":l.pad_char.charAt(1):" ",f=l.width-(p+r).length,i=l.width&&f>0?c.repeat(f):"",d+=l.align?p+r+i:"0"===c?p+i+r:i+p+r)}return d}var i=Object.create(null);function c(e){if(i[e])return i[e];for(var t,r=e,n=[],a=0;r;){if(null!==(t=u.text.exec(r)))n.push(t[0]);else if(null!==(t=u.modulo.exec(r)))n.push("%");else{if(null===(t=u.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var s=[],o=t[2],l=[];if(null===(l=u.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(l[1]);""!==(o=o.substring(l[0].length));)if(null!==(l=u.key_access.exec(o)))s.push(l[1]);else{if(null===(l=u.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(l[1])}t[2]=s}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}r=r.substring(t[0].length)}return i[e]=n}t.sprintf=s,t.vsprintf=o,"undefined"!=typeof window&&(window.sprintf=s,window.vsprintf=o,void 0===(n=function(){return{sprintf:s,vsprintf:o}}.call(t,r,t,e))||(e.exports=n))}()},function(e,t,r){"use strict";var n=r(2).lua_pop,a=r(7).luaL_requiref,u=r(5).to_luastring,s={};e.exports.luaL_openlibs=function(e){for(var t in s)a(e,u(t),s[t],1),n(e,1)};var o=r(17),l=r(24).luaopen_base,i=r(25).luaopen_coroutine,c=r(31).luaopen_debug,f=r(30).luaopen_math,_=r(32).luaopen_package,p=r(27).luaopen_os,v=r(28).luaopen_string,h=r(26).luaopen_table,d=r(29).luaopen_utf8;s._G=l,s[o.LUA_LOADLIBNAME]=_,s[o.LUA_COLIBNAME]=i,s[o.LUA_TABLIBNAME]=h,s[o.LUA_OSLIBNAME]=p,s[o.LUA_STRLIBNAME]=v,s[o.LUA_MATHLIBNAME]=f,s[o.LUA_UTF8LIBNAME]=d,s[o.LUA_DBLIBNAME]=c;var L=r(33).luaopen_fengari;s[o.LUA_FENGARILIBNAME]=L}])}));