(self.webpackChunklinkspace=self.webpackChunklinkspace||[]).push([[48],{96855:function(e,t,i){var n,r,o;r=[i(19755),i(81491)],n=function(e){"use strict";var t=function(i,n){(i[0].queryBuilder=this).$el=i,this.settings=e.extendext(!0,"replace",{},t.DEFAULTS,n),this.model=new s,this.status={id:null,generated_id:!1,group_id:0,rule_id:0,has_optgroup:!1,has_operator_optgroup:!1},this.filters=this.settings.filters,this.icons=this.settings.icons,this.operators=this.settings.operators,this.templates=this.settings.templates,this.plugins=this.settings.plugins,this.lang=null,void 0===t.regional.en&&o.error("Config",'"i18n/en.js" not loaded.'),this.lang=e.extendext(!0,"replace",{},t.regional.en,t.regional[this.settings.lang_code],this.settings.lang),!1===this.settings.allow_groups?this.settings.allow_groups=0:!0===this.settings.allow_groups&&(this.settings.allow_groups=-1),Object.keys(this.templates).forEach((function(e){this.templates[e]||(this.templates[e]=t.templates[e]),"string"==typeof this.templates[e]&&console.error("Pre-compile your templates, strings are no longer supported.")}),this),this.$el.attr("id")||(this.$el.attr("id","qb_"+Math.floor(99999*Math.random())),this.status.generated_id=!0),this.status.id=this.$el.attr("id"),this.$el.addClass("query-builder form-inline"),this.filters=this.checkFilters(this.filters),this.operators=this.checkOperators(this.operators),this.bindEvents(),this.initPlugins()};function i(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,l=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return l=e.done,e},e:function(e){a=!0,s=e},f:function(){try{l||null==i.return||i.return()}finally{if(a)throw s}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}e.extend(t.prototype,{trigger:function(t){var i=new e.Event(this._tojQueryEvent(t),{builder:this});return this.$el.triggerHandler(i,Array.prototype.slice.call(arguments,1)),i},change:function(t,i){var n=new e.Event(this._tojQueryEvent(t,!0),{builder:this,value:i});return this.$el.triggerHandler(n,Array.prototype.slice.call(arguments,2)),n.value},on:function(e,t){return this.$el.on(this._tojQueryEvent(e),t),this},off:function(e,t){return this.$el.off(this._tojQueryEvent(e),t),this},once:function(e,t){return this.$el.one(this._tojQueryEvent(e),t),this},_tojQueryEvent:function(e,t){return e.split(" ").map((function(e){return e+".queryBuilder"+(t?".filter":"")})).join(" ")}}),t.types={string:"string",integer:"number",double:"number",date:"datetime",time:"datetime",datetime:"datetime",boolean:"boolean"},t.inputs=["text","number","textarea","radio","checkbox","select"],t.modifiable_options=["display_errors","allow_groups","allow_empty","default_condition","default_filter"],t.selectors={group_container:".rules-group-container",rule_container:".rule-container",filter_container:".rule-filter-container",operator_container:".rule-operator-container",value_container:".rule-value-container",error_container:".error-container",condition_container:".rules-group-header .group-conditions",rule_header:".rule-header",group_header:".rules-group-header",group_actions:".group-actions",rule_actions:".rule-actions",rules_list:".rules-group-body>.rules-list",group_condition:".rules-group-header [name$=_cond]",rule_filter:".rule-filter-container [name$=_filter]",rule_operator:".rule-operator-container [name$=_operator]",rule_value:".rule-value-container [name*=_value_]",add_rule:"[data-add=rule]",delete_rule:"[data-delete=rule]",add_group:"[data-add=group]",delete_group:"[data-delete=group]"},t.templates={},t.regional={},t.OPERATORS={equal:{type:"equal",nb_inputs:1,multiple:!1,apply_to:["string","number","datetime","boolean"]},not_equal:{type:"not_equal",nb_inputs:1,multiple:!1,apply_to:["string","number","datetime","boolean"]},in:{type:"in",nb_inputs:1,multiple:!0,apply_to:["string","number","datetime"]},not_in:{type:"not_in",nb_inputs:1,multiple:!0,apply_to:["string","number","datetime"]},less:{type:"less",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},less_or_equal:{type:"less_or_equal",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},greater:{type:"greater",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},greater_or_equal:{type:"greater_or_equal",nb_inputs:1,multiple:!1,apply_to:["number","datetime"]},between:{type:"between",nb_inputs:2,multiple:!1,apply_to:["number","datetime"]},not_between:{type:"not_between",nb_inputs:2,multiple:!1,apply_to:["number","datetime"]},begins_with:{type:"begins_with",nb_inputs:1,multiple:!1,apply_to:["string"]},not_begins_with:{type:"not_begins_with",nb_inputs:1,multiple:!1,apply_to:["string"]},contains:{type:"contains",nb_inputs:1,multiple:!1,apply_to:["string"]},not_contains:{type:"not_contains",nb_inputs:1,multiple:!1,apply_to:["string"]},ends_with:{type:"ends_with",nb_inputs:1,multiple:!1,apply_to:["string"]},not_ends_with:{type:"not_ends_with",nb_inputs:1,multiple:!1,apply_to:["string"]},is_empty:{type:"is_empty",nb_inputs:0,multiple:!1,apply_to:["string"]},is_not_empty:{type:"is_not_empty",nb_inputs:0,multiple:!1,apply_to:["string"]},is_null:{type:"is_null",nb_inputs:0,multiple:!1,apply_to:["string","number","datetime","boolean"]},is_not_null:{type:"is_not_null",nb_inputs:0,multiple:!1,apply_to:["string","number","datetime","boolean"]}},t.DEFAULTS={filters:[],plugins:[],sort_filters:!1,display_errors:!0,allow_groups:-1,allow_empty:!1,conditions:["AND","OR"],default_condition:"AND",inputs_separator:" , ",select_placeholder:"------",display_empty_filter:!0,default_filter:null,optgroups:{},default_rule_flags:{filter_readonly:!1,operator_readonly:!1,value_readonly:!1,no_delete:!1},default_group_flags:{condition_readonly:!1,no_add_rule:!1,no_add_group:!1,no_delete:!1},templates:{group:null,rule:null,filterSelect:null,operatorSelect:null,ruleValueSelect:null},lang_code:"en",lang:{},operators:["equal","not_equal","in","not_in","less","less_or_equal","greater","greater_or_equal","between","not_between","begins_with","not_begins_with","contains","not_contains","ends_with","not_ends_with","is_empty","is_not_empty","is_null","is_not_null"],icons:{add_group:"glyphicon glyphicon-plus-sign",add_rule:"glyphicon glyphicon-plus",remove_group:"glyphicon glyphicon-remove",remove_rule:"glyphicon glyphicon-remove",error:"glyphicon glyphicon-warning-sign"}},t.plugins={},t.defaults=function(i){if("object"!=typeof i)return"string"==typeof i?"object"==typeof t.DEFAULTS[i]?e.extend(!0,{},t.DEFAULTS[i]):t.DEFAULTS[i]:e.extend(!0,{},t.DEFAULTS);e.extendext(!0,"replace",t.DEFAULTS,i)},t.define=function(e,i,n){t.plugins[e]={fct:i,def:n||{}}},t.extend=function(i){e.extend(t.prototype,i)},t.prototype.initPlugins=function(){if(this.plugins){if(e.isArray(this.plugins)){var i={};this.plugins.forEach((function(e){i[e]=null})),this.plugins=i}Object.keys(this.plugins).forEach((function(i){i in t.plugins?(this.plugins[i]=e.extend(!0,{},t.plugins[i].def,this.plugins[i]||{}),t.plugins[i].fct.call(this,this.plugins[i])):o.error("Config",'Unable to find plugin "{0}"',i)}),this)}},t.prototype.getPluginOptions=function(e,i){var n;if(this.plugins&&this.plugins[e]?n=this.plugins[e]:t.plugins[e]&&(n=t.plugins[e].def),n)return i?n[i]:n;o.error("Config",'Unable to find plugin "{0}"',e)},t.prototype.init=function(e){this.trigger("afterInit"),e?(this.setRules(e),delete this.settings.rules):this.setRoot(!0)},t.prototype.checkFilters=function(e){var i=[];if(e&&0!==e.length||o.error("Config","Missing filters list"),e.forEach((function(e,n){switch(e.id||o.error("Config","Missing filter {0} id",n),-1!=i.indexOf(e.id)&&o.error("Config",'Filter "{0}" already defined',e.id),i.push(e.id),e.type?t.types[e.type]||o.error("Config",'Invalid type "{0}"',e.type):e.type="string",e.input?"function"!=typeof e.input&&-1==t.inputs.indexOf(e.input)&&o.error("Config",'Invalid input "{0}"',e.input):e.input="number"===t.types[e.type]?"number":"text",e.operators&&e.operators.forEach((function(e){"string"!=typeof e&&o.error("Config","Filter operators must be global operators types (string)")})),e.field||(e.field=e.id),e.label||(e.label=e.field),e.optgroup?(this.status.has_optgroup=!0,this.settings.optgroups[e.optgroup]||(this.settings.optgroups[e.optgroup]=e.optgroup)):e.optgroup=null,e.input){case"radio":case"checkbox":(!e.values||e.values.length<1)&&o.error("Config",'Missing filter "{0}" values',e.id);break;case"select":var r=[];e.has_optgroup=!1,o.iterateOptions(e.values,function(t,i,n){r.push({value:t,label:i,optgroup:n||null}),n&&(e.has_optgroup=!0,this.settings.optgroups[n]||(this.settings.optgroups[n]=n))}.bind(this)),e.has_optgroup?e.values=o.groupSort(r,"optgroup"):e.values=r,e.placeholder&&(void 0===e.placeholder_value&&(e.placeholder_value=-1),e.values.forEach((function(t){t.value==e.placeholder_value&&o.error("Config",'Placeholder of filter "{0}" overlaps with one of its values',e.id)})))}}),this),this.settings.sort_filters)if("function"==typeof this.settings.sort_filters)e.sort(this.settings.sort_filters);else{var n=this;e.sort((function(e,t){return n.translate(e.label).localeCompare(n.translate(t.label))}))}return this.status.has_optgroup&&(e=o.groupSort(e,"optgroup")),e},t.prototype.checkOperators=function(i){var n=[];return i.forEach((function(r,s){"string"==typeof r?(t.OPERATORS[r]||o.error("Config",'Unknown operator "{0}"',r),i[s]=r=e.extendext(!0,"replace",{},t.OPERATORS[r])):(r.type||o.error("Config",'Missing "type" for operator {0}',s),t.OPERATORS[r.type]&&(i[s]=r=e.extendext(!0,"replace",{},t.OPERATORS[r.type],r)),void 0!==r.nb_inputs&&void 0!==r.apply_to||o.error("Config",'Missing "nb_inputs" and/or "apply_to" for operator "{0}"',r.type)),-1!=n.indexOf(r.type)&&o.error("Config",'Operator "{0}" already defined',r.type),n.push(r.type),r.optgroup?(this.status.has_operator_optgroup=!0,this.settings.optgroups[r.optgroup]||(this.settings.optgroups[r.optgroup]=r.optgroup)):r.optgroup=null}),this),this.status.has_operator_optgroup&&(i=o.groupSort(i,"optgroup")),i},t.prototype.bindEvents=function(){var i=this,n=t.selectors;this.$el.on("change.queryBuilder",n.group_condition,(function(){if(e(this).is(":checked")){var t=e(this).closest(n.group_container);i.getModel(t).condition=e(this).val()}})),this.$el.on("change.queryBuilder",n.rule_filter,(function(){var t=e(this).closest(n.rule_container);i.getModel(t).filter=i.getFilterById(e(this).val())})),this.$el.on("change.queryBuilder",n.rule_operator,(function(){var t=e(this).closest(n.rule_container);i.getModel(t).operator=i.getOperatorByType(e(this).val())})),this.$el.on("click.queryBuilder",n.add_rule,(function(){var t=e(this).closest(n.group_container);i.addRule(i.getModel(t))})),this.$el.on("click.queryBuilder",n.delete_rule,(function(){var t=e(this).closest(n.rule_container);i.deleteRule(i.getModel(t))})),0!==this.settings.allow_groups&&(this.$el.on("click.queryBuilder",n.add_group,(function(){var t=e(this).closest(n.group_container);i.addGroup(i.getModel(t))})),this.$el.on("click.queryBuilder",n.delete_group,(function(){var t=e(this).closest(n.group_container);i.deleteGroup(i.getModel(t))}))),this.model.on({drop:function(e,t){t.$el.remove(),i.refreshGroupsConditions()},add:function(e,n,r,o){0===o?r.$el.prependTo(n.$el.find(">"+t.selectors.rules_list)):r.$el.insertAfter(n.rules[o-1].$el),i.refreshGroupsConditions()},move:function(e,n,r,o){n.$el.detach(),0===o?n.$el.prependTo(r.$el.find(">"+t.selectors.rules_list)):n.$el.insertAfter(r.rules[o-1].$el),i.refreshGroupsConditions()},update:function(e,t,n,r,o){if(t instanceof u)switch(n){case"error":i.updateError(t);break;case"flags":i.applyRuleFlags(t);break;case"filter":i.updateRuleFilter(t,o);break;case"operator":i.updateRuleOperator(t,o);break;case"value":i.updateRuleValue(t,o)}else switch(n){case"error":i.updateError(t);break;case"flags":i.applyGroupFlags(t);break;case"condition":i.updateGroupCondition(t,o)}}})},t.prototype.setRoot=function(t,i,n){t=void 0===t||!0===t;var r=this.nextGroupId(),o=e(this.getGroupTemplate(r,1));return this.$el.append(o),this.model.root=new a(null,o),this.model.root.model=this.model,this.model.root.data=i,this.model.root.flags=e.extend({},this.settings.default_group_flags,n),this.model.root.condition=this.settings.default_condition,this.trigger("afterAddGroup",this.model.root),t&&this.addRule(this.model.root),this.model.root},t.prototype.addGroup=function(t,i,n,r){i=void 0===i||!0===i;var o=t.level+1;if(this.trigger("beforeAddGroup",t,i,o).isDefaultPrevented())return null;var s=this.nextGroupId(),l=e(this.getGroupTemplate(s,o)),a=t.addGroup(l);return a.data=n,a.flags=e.extend({},this.settings.default_group_flags,r),a.condition=this.settings.default_condition,this.trigger("afterAddGroup",a),this.trigger("rulesChanged"),i&&this.addRule(a),a},t.prototype.deleteGroup=function(e){if(e.isRoot())return!1;if(this.trigger("beforeDeleteGroup",e).isDefaultPrevented())return!1;var t=!0;return e.each("reverse",(function(e){t&=this.deleteRule(e)}),(function(e){t&=this.deleteGroup(e)}),this),t&&(e.drop(),this.trigger("afterDeleteGroup"),this.trigger("rulesChanged")),t},t.prototype.updateGroupCondition=function(i,n){i.$el.find(">"+t.selectors.group_condition).each((function(){var t=e(this);t.prop("checked",t.val()===i.condition),t.parent().toggleClass("active",t.val()===i.condition)})),this.trigger("afterUpdateGroupCondition",i,n),this.trigger("rulesChanged")},t.prototype.refreshGroupsConditions=function(){!function e(i){(!i.flags||i.flags&&!i.flags.condition_readonly)&&i.$el.find(">"+t.selectors.group_condition).prop("disabled",i.rules.length<=1).parent().toggleClass("disabled",i.rules.length<=1),i.each(null,(function(t){e(t)}),this)}(this.model.root)},t.prototype.addRule=function(t,i,n){if(this.trigger("beforeAddRule",t).isDefaultPrevented())return null;var r=this.nextRuleId(),o=e(this.getRuleTemplate(r)),s=t.addRule(o);return s.data=i,s.flags=e.extend({},this.settings.default_rule_flags,n),this.trigger("afterAddRule",s),this.trigger("rulesChanged"),this.createRuleFilters(s),!this.settings.default_filter&&this.settings.display_empty_filter||(s.filter=this.change("getDefaultFilter",this.getFilterById(this.settings.default_filter||this.filters[0].id),s)),s},t.prototype.deleteRule=function(e){return!e.flags.no_delete&&!this.trigger("beforeDeleteRule",e).isDefaultPrevented()&&(e.drop(),this.trigger("afterDeleteRule"),this.trigger("rulesChanged"),!0)},t.prototype.createRuleFilters=function(i){var n=this.change("getRuleFilters",this.filters,i),r=e(this.getRuleFilterSelect(i,n));i.$el.find(t.selectors.filter_container).html(r),this.trigger("afterCreateRuleFilters",i),this.applyRuleFlags(i)},t.prototype.createRuleOperators=function(i){var n=i.$el.find(t.selectors.operator_container).empty();if(i.filter){var r=this.getOperators(i.filter),o=e(this.getRuleOperatorSelect(i,r));n.html(o),i.filter.default_operator?i.__.operator=this.getOperatorByType(i.filter.default_operator):i.__.operator=r[0],i.$el.find(t.selectors.rule_operator).val(i.operator.type),this.trigger("afterCreateRuleOperators",i,r),this.applyRuleFlags(i)}},t.prototype.createRuleInput=function(i){var n=i.$el.find(t.selectors.value_container).empty();if(i.__.value=void 0,i.filter&&i.operator&&0!==i.operator.nb_inputs){for(var r=this,o=e(),s=i.filter,l=0;l<i.operator.nb_inputs;l++){var a=e(this.getRuleInput(i,l));0<l&&n.append(this.settings.inputs_separator),n.append(a),o=o.add(a)}n.css("display",""),o.on("change "+(s.input_event||""),(function(){i._updating_input||(i._updating_value=!0,i.value=r.getRuleInputValue(i),i._updating_value=!1)})),s.plugin&&o[s.plugin](s.plugin_config||{}),this.trigger("afterCreateRuleInput",i),void 0!==s.default_value?i.value=s.default_value:(i._updating_value=!0,i.value=r.getRuleInputValue(i),i._updating_value=!1),this.applyRuleFlags(i)}},t.prototype.updateRuleFilter=function(e,i){this.createRuleOperators(e),this.createRuleInput(e),e.$el.find(t.selectors.rule_filter).val(e.filter?e.filter.id:"-1"),i&&e.filter&&i.id!==e.filter.id&&(e.data=void 0),this.trigger("afterUpdateRuleFilter",e,i),this.trigger("rulesChanged")},t.prototype.updateRuleOperator=function(e,i){var n=e.$el.find(t.selectors.value_container);e.operator&&0!==e.operator.nb_inputs?(n.css("display",""),!n.is(":empty")&&i&&e.operator.nb_inputs===i.nb_inputs&&e.operator.optgroup===i.optgroup||this.createRuleInput(e)):(n.hide(),e.__.value=void 0),e.operator&&(e.$el.find(t.selectors.rule_operator).val(e.operator.type),e.__.value=this.getRuleInputValue(e)),this.trigger("afterUpdateRuleOperator",e,i),this.trigger("rulesChanged")},t.prototype.updateRuleValue=function(e,t){e._updating_value||this.setRuleInputValue(e,e.value),this.trigger("afterUpdateRuleValue",e,t),this.trigger("rulesChanged")},t.prototype.applyRuleFlags=function(e){var i=e.flags,n=t.selectors;e.$el.find(n.rule_filter).prop("disabled",i.filter_readonly),e.$el.find(n.rule_operator).prop("disabled",i.operator_readonly),e.$el.find(n.rule_value).prop("disabled",i.value_readonly),i.no_delete&&e.$el.find(n.delete_rule).remove(),this.trigger("afterApplyRuleFlags",e)},t.prototype.applyGroupFlags=function(e){var i=e.flags,n=t.selectors;e.$el.find(">"+n.group_condition).prop("disabled",i.condition_readonly).parent().toggleClass("readonly",i.condition_readonly),i.no_add_rule&&e.$el.find(n.add_rule).remove(),i.no_add_group&&e.$el.find(n.add_group).remove(),i.no_delete&&e.$el.find(n.delete_group).remove(),this.trigger("afterApplyGroupFlags",e)},t.prototype.clearErrors=function(e){(e=e||this.model.root)&&(e.error=null,e instanceof a&&e.each((function(e){e.error=null}),(function(e){this.clearErrors(e)}),this))},t.prototype.updateError=function(e){if(this.settings.display_errors)if(null===e.error)e.$el.removeClass("has-error");else{var i=this.translate("errors",e.error[0]);i=o.fmt(i,e.error.slice(1)),i=this.change("displayError",i,e.error,e),e.$el.addClass("has-error").find(t.selectors.error_container).eq(0).attr("title",i)}},t.prototype.triggerValidationError=function(t,i,n){e.isArray(i)||(i=[i]),this.trigger("validationError",t,i,n).isDefaultPrevented()||(t.error=i)},t.prototype.destroy=function(){this.trigger("beforeDestroy"),this.status.generated_id&&this.$el.removeAttr("id"),this.clear(),this.model=null,this.$el.off(".queryBuilder").removeClass("query-builder").removeData("queryBuilder"),delete this.$el[0].queryBuilder},t.prototype.reset=function(){this.trigger("beforeReset").isDefaultPrevented()||(this.status.group_id=1,this.status.rule_id=0,this.model.root.empty(),this.model.root.data=void 0,this.model.root.flags=e.extend({},this.settings.default_group_flags),this.model.root.condition=this.settings.default_condition,this.addRule(this.model.root),this.trigger("afterReset"),this.trigger("rulesChanged"))},t.prototype.clear=function(){this.trigger("beforeClear").isDefaultPrevented()||(this.status.group_id=0,this.status.rule_id=0,this.model.root&&(this.model.root.drop(),this.model.root=null),this.trigger("afterClear"),this.trigger("rulesChanged"))},t.prototype.setOptions=function(i){e.each(i,function(e,i){-1!==t.modifiable_options.indexOf(e)&&(this.settings[e]=i)}.bind(this))},t.prototype.getModel=function(t){return t?t instanceof l?t:e(t).data("queryBuilderModel"):this.model.root},t.prototype.validate=function(t){t=e.extend({skip_empty:!1},t),this.clearErrors();var i=this,n=function e(n){var r=0,o=0;return n.each((function(e){if(e.filter||!t.skip_empty){if(!e.filter)return i.triggerValidationError(e,"no_filter",null),void o++;if(!e.operator)return i.triggerValidationError(e,"no_operator",null),void o++;if(0!==e.operator.nb_inputs){var n=i.validateValue(e,e.value);if(!0!==n)return i.triggerValidationError(e,n,e.value),void o++}r++}}),(function(t){var i=e(t);!0===i?r++:!1===i&&o++})),!(0<o)&&(0===r&&!n.isRoot()&&t.skip_empty?null:!!(0!==r||i.settings.allow_empty&&n.isRoot())||(i.triggerValidationError(n,"empty_group",null),!1))}(this.model.root);return this.change("validate",n)},t.prototype.getRules=function(t){t=e.extend({get_flags:!1,allow_invalid:!1,skip_empty:!1},t);var i=this.validate(t);if(!i&&!t.allow_invalid)return null;var n=this,r=function i(r){var o={condition:r.condition,rules:[]};if(r.data&&(o.data=e.extendext(!0,"replace",{},r.data)),t.get_flags){var s=n.getGroupFlags(r.flags,"all"===t.get_flags);e.isEmptyObject(s)||(o.flags=s)}return r.each((function(i){if(i.filter||!t.skip_empty){var r=null;i.operator&&0===i.operator.nb_inputs||(r=i.value);var s={id:i.filter?i.filter.id:null,field:i.filter?i.filter.field:null,type:i.filter?i.filter.type:null,input:i.filter?i.filter.input:null,operator:i.operator?i.operator.type:null,value:r};if((i.filter&&i.filter.data||i.data)&&(s.data=e.extendext(!0,"replace",{},i.filter.data,i.data)),t.get_flags){var l=n.getRuleFlags(i.flags,"all"===t.get_flags);e.isEmptyObject(l)||(s.flags=l)}o.rules.push(n.change("ruleToJson",s,i))}}),(function(e){var n=i(e);0===n.rules.length&&t.skip_empty||o.rules.push(n)}),this),n.change("groupToJson",o,r)}(this.model.root);return r.valid=i,this.change("getRules",r)},t.prototype.setRules=function(t,i){i=e.extend({allow_invalid:!1},i),e.isArray(t)&&(t={condition:this.settings.default_condition,rules:t}),t&&t.rules&&(0!==t.rules.length||this.settings.allow_empty)||o.error("RulesParse","Incorrect data object passed"),this.clear(),this.setRoot(!1,t.data,this.parseGroupFlags(t)),t=this.change("setRules",t,i);var n=this;!function e(t,r){null!==r&&(void 0===t.condition?t.condition=n.settings.default_condition:-1==n.settings.conditions.indexOf(t.condition)&&(o.error(!i.allow_invalid,"UndefinedCondition",'Invalid condition "{0}"',t.condition),t.condition=n.settings.default_condition),r.condition=t.condition,t.rules.forEach((function(t){var s;if(void 0!==t.rules)if(-1!==n.settings.allow_groups&&n.settings.allow_groups<r.level)o.error(!i.allow_invalid,"RulesParse","No more than {0} groups are allowed",n.settings.allow_groups),n.reset();else{if(null===(s=n.addGroup(r,!1,t.data,n.parseGroupFlags(t))))return;e(t,s)}else{if(t.empty||(void 0===t.id&&(o.error(!i.allow_invalid,"RulesParse","Missing rule field id"),t.empty=!0),void 0===t.operator&&(t.operator="equal")),null===(s=n.addRule(r,t.data,n.parseRuleFlags(t))))return;t.empty||(s.filter=n.getFilterById(t.id,!i.allow_invalid)),s.filter&&(s.operator=n.getOperatorByType(t.operator,!i.allow_invalid),s.operator||(s.operator=n.getOperators(s.filter)[0])),s.operator&&0!==s.operator.nb_inputs&&(void 0!==t.value?s.value=t.value:void 0!==s.filter.default_value&&(s.value=s.filter.default_value)),n.change("jsonToRule",s,t)!=s&&o.error("RulesParse","Plugin tried to change rule reference")}})),n.change("jsonToGroup",r,t)!=r&&o.error("RulesParse","Plugin tried to change group reference"))}(t,this.model.root),this.trigger("afterSetRules")},t.prototype.validateValue=function(e,t){var i=e.filter.validation||{},n=!0;return n=i.callback?i.callback.call(this,t,e):this._validateValue(e,t),this.change("validateValue",n,t,e)},t.prototype._validateValue=function(i,n){var r,s,l=i.filter,a=i.operator,u=l.validation||{},c=!0;1===i.operator.nb_inputs&&(n=[n]);for(var p=0;p<a.nb_inputs;p++){if(!a.multiple&&e.isArray(n[p])&&1<n[p].length){c=["operator_not_multiple",a.type,this.translate("operators",a.type)];break}switch(l.input){case"radio":if(void 0!==n[p]&&0!==n[p].length)break;u.allow_empty_value||(c=["radio_empty"]);break;case"checkbox":if(void 0!==n[p]&&0!==n[p].length)break;u.allow_empty_value||(c=["checkbox_empty"]);break;case"select":if(void 0===n[p]||0===n[p].length||l.placeholder&&n[p]==l.placeholder_value){u.allow_empty_value||(c=["select_empty"]);break}break;default:s=e.isArray(n[p])?n[p]:[n[p]];for(var d=0;d<s.length;d++){switch(t.types[l.type]){case"string":if(void 0===s[d]||0===s[d].length){u.allow_empty_value||(c=["string_empty"]);break}if(void 0!==u.min&&s[d].length<parseInt(u.min)){c=[this.getValidationMessage(u,"min","string_exceed_min_length"),u.min];break}if(void 0!==u.max&&s[d].length>parseInt(u.max)){c=[this.getValidationMessage(u,"max","string_exceed_max_length"),u.max];break}if(!u.format||("string"==typeof u.format&&(u.format=new RegExp(u.format)),u.format.test(s[d])))break;c=[this.getValidationMessage(u,"format","string_invalid_format"),u.format];break;case"number":if(void 0===s[d]||0===s[d].length){u.allow_empty_value||(c=["number_nan"]);break}if(isNaN(s[d])){c=["number_nan"];break}if("integer"==l.type){if(parseInt(s[d])!=s[d]){c=["number_not_integer"];break}}else if(parseFloat(s[d])!=s[d]){c=["number_not_double"];break}if(void 0!==u.min&&s[d]<parseFloat(u.min)){c=[this.getValidationMessage(u,"min","number_exceed_min"),u.min];break}if(void 0!==u.max&&s[d]>parseFloat(u.max)){c=[this.getValidationMessage(u,"max","number_exceed_max"),u.max];break}if(void 0!==u.step&&"any"!==u.step){var h=(s[d]/u.step).toPrecision(14);if(parseInt(h)!=h){c=[this.getValidationMessage(u,"step","number_wrong_step"),u.step];break}}break;case"datetime":if(void 0===s[d]||0===s[d].length){u.allow_empty_value||(c=["datetime_empty"]);break}if(u.format){"moment"in window||o.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com");var f=moment(s[d],u.format);if(!f.isValid()){c=[this.getValidationMessage(u,"format","datetime_invalid"),u.format];break}if(u.min&&f<moment(u.min,u.format)){c=[this.getValidationMessage(u,"min","datetime_exceed_min"),u.min];break}if(u.max&&f>moment(u.max,u.format)){c=[this.getValidationMessage(u,"max","datetime_exceed_max"),u.max];break}}break;case"boolean":if(void 0===s[d]||0===s[d].length){u.allow_empty_value||(c=["boolean_not_valid"]);break}if("true"!==(r=(""+s[d]).trim().toLowerCase())&&"false"!==r&&"1"!==r&&"0"!==r&&1!==s[d]&&0!==s[d]){c=["boolean_not_valid"];break}}if(!0!==c)break}}if(!0!==c)break}if(("between"===i.operator.type||"not_between"===i.operator.type)&&2===n.length)switch(t.types[l.type]){case"number":n[0]>n[1]&&(c=["number_between_invalid",n[0],n[1]]);break;case"datetime":u.format&&("moment"in window||o.error("MissingLibrary","MomentJS is required for Date/Time validation. Get it here http://momentjs.com"),moment(n[0],u.format).isAfter(moment(n[1],u.format))&&(c=["datetime_between_invalid",n[0],n[1]]))}return c},t.prototype.nextGroupId=function(){return this.status.id+"_group_"+this.status.group_id++},t.prototype.nextRuleId=function(){return this.status.id+"_rule_"+this.status.rule_id++},t.prototype.getOperators=function(e){"string"==typeof e&&(e=this.getFilterById(e));for(var i=[],n=0,r=this.operators.length;n<r;n++){if(e.operators){if(-1==e.operators.indexOf(this.operators[n].type))continue}else if(-1==this.operators[n].apply_to.indexOf(t.types[e.type]))continue;i.push(this.operators[n])}return e.operators&&i.sort((function(t,i){return e.operators.indexOf(t.type)-e.operators.indexOf(i.type)})),this.change("getOperators",i,e)},t.prototype.getFilterById=function(e,t){if("-1"==e)return null;for(var i=0,n=this.filters.length;i<n;i++)if(this.filters[i].id==e)return this.filters[i];return o.error(!1!==t,"UndefinedFilter",'Undefined filter "{0}"',e),null},t.prototype.getOperatorByType=function(e,t){if("-1"==e)return null;for(var i=0,n=this.operators.length;i<n;i++)if(this.operators[i].type==e)return this.operators[i];return o.error(!1!==t,"UndefinedOperator",'Undefined operator "{0}"',e),null},t.prototype.getRuleInputValue=function(i){var n=i.filter,r=i.operator,s=[];if(n.valueGetter)s=n.valueGetter.call(this,i);else{for(var l=i.$el.find(t.selectors.value_container),a=0;a<r.nb_inputs;a++){var u,c=o.escapeElementId(i.id+"_value_"+a);switch(n.input){case"radio":s.push(l.find("[name="+c+"]:checked").val());break;case"checkbox":u=[],l.find("[name="+c+"]:checked").each((function(){u.push(e(this).val())})),s.push(u);break;case"select":n.multiple?(u=[],l.find("[name="+c+"] option:selected").each((function(){u.push(e(this).val())})),s.push(u)):s.push(l.find("[name="+c+"] option:selected").val());break;default:s.push(l.find("[name="+c+"]").val())}}s=s.map((function(t){return r.multiple&&n.value_separator&&"string"==typeof t&&(t=t.split(n.value_separator)),e.isArray(t)?t.map((function(e){return o.changeType(e,n.type)})):o.changeType(t,n.type)})),1===r.nb_inputs&&(s=s[0]),n.valueParser&&(s=n.valueParser.call(this,i,s))}return this.change("getRuleValue",s,i)},t.prototype.setRuleInputValue=function(i,n){var r=i.filter,s=i.operator;if(r&&s){if(i._updating_input=!0,r.valueSetter)r.valueSetter.call(this,i,n);else{var l=i.$el.find(t.selectors.value_container);1==s.nb_inputs&&(n=[n]);for(var a=0;a<s.nb_inputs;a++){var u=o.escapeElementId(i.id+"_value_"+a);switch(r.input){case"radio":l.find("[name="+u+'][value="'+n[a]+'"]').prop("checked",!0).trigger("change");break;case"checkbox":e.isArray(n[a])||(n[a]=[n[a]]),n[a].forEach((function(e){l.find("[name="+u+'][value="'+e+'"]').prop("checked",!0).trigger("change")}));break;default:s.multiple&&r.value_separator&&e.isArray(n[a])&&(n[a]=n[a].join(r.value_separator)),l.find("[name="+u+"]").val(n[a]).trigger("change")}}}i._updating_input=!1}},t.prototype.parseRuleFlags=function(t){var i=e.extend({},this.settings.default_rule_flags);return t.readonly&&e.extend(i,{filter_readonly:!0,operator_readonly:!0,value_readonly:!0,no_delete:!0}),t.flags&&e.extend(i,t.flags),this.change("parseRuleFlags",i,t)},t.prototype.getRuleFlags=function(t,i){if(i)return e.extend({},t);var n={};return e.each(this.settings.default_rule_flags,(function(e,i){t[e]!==i&&(n[e]=t[e])})),n},t.prototype.parseGroupFlags=function(t){var i=e.extend({},this.settings.default_group_flags);return t.readonly&&e.extend(i,{condition_readonly:!0,no_add_rule:!0,no_add_group:!0,no_delete:!0}),t.flags&&e.extend(i,t.flags),this.change("parseGroupFlags",i,t)},t.prototype.getGroupFlags=function(t,i){if(i)return e.extend({},t);var n={};return e.each(this.settings.default_group_flags,(function(e,i){t[e]!==i&&(n[e]=t[e])})),n},t.prototype.translate=function(e,t){var i;return t||(t=e,e=void 0),i="object"==typeof t?t[this.settings.lang_code]||t.en:(e?this.lang[e]:this.lang)[t]||t,this.change("translate",i,t,e)},t.prototype.getValidationMessage=function(e,t,i){return e.messages&&e.messages[t]||i};var r={group:function(e){var t='<div id="'+e.group_id+'" class="rules-group-container">   <div class="rules-group-header">     <div class="btn-group pull-right group-actions">       <button type="button" class="btn btn-xs btn-success" data-add="rule">         <i class="'+e.icons.add_rule+'"></i> '+e.translate("add_rule")+"       </button>       ";(-1===e.settings.allow_groups||e.settings.allow_groups>=e.level)&&(t+='         <button type="button" class="btn btn-xs btn-success" data-add="group">           <i class="'+e.icons.add_group+'"></i> '+e.translate("add_group")+"         </button>       "),t+="       ",1<e.level&&(t+='         <button type="button" class="btn btn-xs btn-danger" data-delete="group">           <i class="'+e.icons.remove_group+'"></i> '+e.translate("delete_group")+"         </button>       "),t+='     </div>     <div class="btn-group group-conditions">       ';var n=e.conditions;if(n){var r,o=i(n);try{for(o.s();!(r=o.n()).done;){var s=r.value;t+='         <label class="btn btn-xs btn-primary">           <input type="radio" name="'+e.group_id+'_cond" value="'+s+'"> '+e.translate("conditions",s)+"         </label>       "}}catch(e){o.e(e)}finally{o.f()}}return t+="     </div>     ",e.settings.display_errors&&(t+='       <div class="error-container"><i class="'+e.icons.error+'"></i></div>     '),t+"   </div>   <div class=rules-group-body>     <div class=rules-list></div>   </div> </div>"},rule:function(e){var t='<div id="'+e.rule_id+'" class="rule-container">   <div class="rule-header">     <div class="btn-group pull-right rule-actions">       <button type="button" class="btn btn-xs btn-danger" data-delete="rule">         <i class="'+e.icons.remove_rule+'"></i> '+e.translate("delete_rule")+"       </button>     </div>   </div>   ";return e.settings.display_errors&&(t+='     <div class="error-container"><i class="'+e.icons.error+'"></i></div>   '),t+'   <div class="rule-filter-container"></div>   <div class="rule-operator-container"></div>   <div class="rule-value-container"></div> </div>'},filterSelect:function(e){var t="",n=null;t+=' <select class="form-control" name="'+e.rule.id+'_filter">   ',e.settings.display_empty_filter&&(t+='     <option value="-1">'+e.settings.select_placeholder+"</option>   "),t+="   ";var r=e.filters;if(r){var o,s=i(r);try{for(s.s();!(o=s.n()).done;){var l=o.value;t+="     ",n!==l.optgroup&&(t+="       ",null!==n&&(t+="</optgroup>"),t+="       ",null!==(n=l.optgroup)&&(t+='         <optgroup label="'+e.translate(e.settings.optgroups[n])+'">       '),t+="     "),t+='     <option value="'+l.id+'" ',l.icon&&(t+='data-icon="'+l.icon+'"'),t+=">"+e.translate(l.label)+"</option>   "}}catch(e){s.e(e)}finally{s.f()}}return t+="   ",null!==n&&(t+="</optgroup>"),t+" </select>"},operatorSelect:function(e){var t="";1===e.operators.length&&(t+=" <span> "+e.translate("operators",e.operators[0].type)+" </span> "),t+=" ";var n=null;t+=' <select class="form-control ',1===e.operators.length&&(t+="hide"),t+='" name="'+e.rule.id+'_operator">   ';var r=e.operators;if(r){var o,s=i(r);try{for(s.s();!(o=s.n()).done;){var l=o.value;t+="     ",n!==l.optgroup&&(t+="       ",null!==n&&(t+="</optgroup>"),t+="       ",null!==(n=l.optgroup)&&(t+='         <optgroup label="'+e.translate(e.settings.optgroups[n])+'">       '),t+="     "),t+='     <option value="'+l.type+'" ',l.icon&&(t+='data-icon="'+l.icon+'"'),t+=">"+e.translate("operators",l.type)+"</option>   "}}catch(e){s.e(e)}finally{s.f()}}return t+="   ",null!==n&&(t+="</optgroup>"),t+" </select>"},ruleValueSelect:function(e){var t="",n=null;t+=' <select class="form-control" name="'+e.name+'" ',e.rule.filter.multiple&&(t+="multiple"),t+=">   ",e.rule.filter.placeholder&&(t+='     <option value="'+e.rule.filter.placeholder_value+'" disabled selected>'+e.rule.filter.placeholder+"</option>   "),t+="   ";var r=e.rule.filter.values;if(r){var o,s=i(r);try{for(s.s();!(o=s.n()).done;){var l=o.value;t+="     ",n!==l.optgroup&&(t+="       ",null!==n&&(t+="</optgroup>"),t+="       ",null!==(n=l.optgroup)&&(t+='         <optgroup label="'+e.translate(e.settings.optgroups[n])+'">       '),t+="     "),t+='     <option value="'+l.value+'">'+l.label+"</option>   "}}catch(e){s.e(e)}finally{s.f()}}return t+="   ",null!==n&&(t+="</optgroup>"),t+" </select>"}};t.templates=r,t.prototype.getGroupTemplate=function(e,t){var i=this.templates.group({builder:this,group_id:e,level:t,conditions:this.settings.conditions,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getGroupTemplate",i,t)},t.prototype.getRuleTemplate=function(e){var t=this.templates.rule({builder:this,rule_id:e,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleTemplate",t)},t.prototype.getRuleFilterSelect=function(e,t){var i=this.templates.filterSelect({builder:this,rule:e,filters:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleFilterSelect",i,e,t)},t.prototype.getRuleOperatorSelect=function(e,t){var i=this.templates.operatorSelect({builder:this,rule:e,operators:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleOperatorSelect",i,e,t)},t.prototype.getRuleValueSelect=function(e,t){var i=this.templates.ruleValueSelect({builder:this,name:e,rule:t,icons:this.icons,settings:this.settings,translate:this.translate.bind(this)});return this.change("getRuleValueSelect",i,e,t)},t.prototype.getRuleInput=function(e,t){var i=e.filter,n=e.filter.validation||{},r=e.id+"_value_"+t,s=i.vertical?" class=block":"",l="",a=Array.isArray(i.placeholder)?i.placeholder[t]:i.placeholder;if("function"==typeof i.input)l=i.input.call(this,e,r);else switch(i.input){case"radio":case"checkbox":o.iterateOptions(i.values,(function(e,t){l+="<label"+s+'><input type="'+i.input+'" name="'+r+'" value="'+e+'"> '+t+"</label> "}));break;case"select":l=this.getRuleValueSelect(r,e);break;case"textarea":l+='<textarea class="form-control" name="'+r+'"',i.size&&(l+=' cols="'+i.size+'"'),i.rows&&(l+=' rows="'+i.rows+'"'),void 0!==n.min&&(l+=' minlength="'+n.min+'"'),void 0!==n.max&&(l+=' maxlength="'+n.max+'"'),a&&(l+=' placeholder="'+a+'"'),l+="></textarea>";break;case"number":l+='<input class="form-control" type="number" name="'+r+'"',void 0!==n.step&&(l+=' step="'+n.step+'"'),void 0!==n.min&&(l+=' min="'+n.min+'"'),void 0!==n.max&&(l+=' max="'+n.max+'"'),a&&(l+=' placeholder="'+a+'"'),i.size&&(l+=' size="'+i.size+'"'),l+=">";break;default:l+='<input class="form-control" type="text" name="'+r+'"',a&&(l+=' placeholder="'+a+'"'),"string"===i.type&&void 0!==n.min&&(l+=' minlength="'+n.min+'"'),"string"===i.type&&void 0!==n.max&&(l+=' maxlength="'+n.max+'"'),i.size&&(l+=' size="'+i.size+'"'),l+=">"}return this.change("getRuleInput",l,e,r)};var o={};function s(){this.root=null,this.$=e(this)}(t.utils=o).iterateOptions=function(t,i){t&&(e.isArray(t)?t.forEach((function(t){e.isPlainObject(t)?"value"in t?i(t.value,t.label||t.value,t.optgroup):e.each(t,(function(e,t){return i(e,t),!1})):i(t,t)})):e.each(t,(function(e,t){i(e,t)})))},o.fmt=function(e,t){return Array.isArray(t)||(t=Array.prototype.slice.call(arguments,1)),e.replace(/{([0-9]+)}/g,(function(e,i){return t[parseInt(i)]}))},o.error=function(){var e=0,t="boolean"!=typeof arguments[e]||arguments[e++],i=arguments[e++],n=arguments[e++],r=Array.isArray(arguments[e])?arguments[e]:Array.prototype.slice.call(arguments,e);if(t){var s=new Error(o.fmt(n,r));throw s.name=i+"Error",s.args=r,s}console.error(i+"Error: "+o.fmt(n,r))},o.changeType=function(e,t){if(""!==e&&void 0!==e)switch(t){case"integer":return"string"!=typeof e||/^-?\d+$/.test(e)?parseInt(e):e;case"double":return"string"!=typeof e||/^-?\d+\.?\d*$/.test(e)?parseFloat(e):e;case"boolean":return"string"!=typeof e||/^(0|1|true|false){1}$/i.test(e)?!0===e||1===e||"true"===e.toLowerCase()||"1"===e:e;default:return e}},o.escapeString=function(e){return"string"!=typeof e?e:e.replace(/[\0\n\r\b\\\'\"]/g,(function(e){switch(e){case"\0":return"\\0";case"\n":return"\\n";case"\r":return"\\r";case"\b":return"\\b";default:return"\\"+e}})).replace(/\t/g,"\\t").replace(/\x1a/g,"\\Z")},o.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},o.escapeElementId=function(e){return e?e.replace(/(\\)?([:.\[\],])/g,(function(e,t,i){return t?e:"\\"+i})):e},o.groupSort=function(e,t){var i=[],n=[];return e.forEach((function(e){var r;e[t]?-1==(r=i.lastIndexOf(e[t]))?r=i.length:r++:r=i.length,i.splice(r,0,e[t]),n.splice(r,0,e)})),n},o.defineModelProperties=function(t,i){i.forEach((function(i){Object.defineProperty(t.prototype,i,{enumerable:!0,get:function(){return this.__[i]},set:function(t){var n=null!==this.__[i]&&"object"==typeof this.__[i]?e.extend({},this.__[i]):this.__[i];this.__[i]=t,null!==this.model&&this.model.trigger("update",this,i,t,n)}})}))},e.extend(s.prototype,{trigger:function(t){var i=new e.Event(t);return this.$.triggerHandler(i,Array.prototype.slice.call(arguments,1)),i},on:function(){return this.$.on.apply(this.$,Array.prototype.slice.call(arguments)),this},off:function(){return this.$.off.apply(this.$,Array.prototype.slice.call(arguments)),this},once:function(){return this.$.one.apply(this.$,Array.prototype.slice.call(arguments)),this}});var l=function(e,t){if(!(this instanceof l))return new l(e,t);Object.defineProperty(this,"__",{value:{}}),t.data("queryBuilderModel",this),this.__.level=1,this.__.error=null,this.__.flags={},this.__.data=void 0,this.$el=t,this.id=t[0].id,this.model=null,this.parent=e};o.defineModelProperties(l,["level","error","data","flags"]),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){return this.__.parent},set:function(e){this.__.parent=e,this.level=null===e?1:e.level+1,this.model=null===e?null:e.model}}),l.prototype.isRoot=function(){return 1===this.level},l.prototype.getPos=function(){return this.isRoot()?-1:this.parent.getNodePos(this)},l.prototype.drop=function(){var e=this.model;this.parent&&this.parent.removeNode(this),this.$el.removeData("queryBuilderModel"),null!==e&&e.trigger("drop",this)},l.prototype.moveAfter=function(e){this.isRoot()||this.move(e.parent,e.getPos()+1)},l.prototype.moveAtBegin=function(e){this.isRoot()||(void 0===e&&(e=this.parent),this.move(e,0))},l.prototype.moveAtEnd=function(e){this.isRoot()||(void 0===e&&(e=this.parent),this.move(e,0===e.length()?0:e.length()-1))},l.prototype.move=function(e,t){this.isRoot()||("number"==typeof e&&(t=e,e=this.parent),this.parent.removeNode(this),e.insertNode(this,t,!1),null!==this.model&&this.model.trigger("move",this,e,t))};var a=function(e,t){if(!(this instanceof a))return new a(e,t);l.call(this,e,t),this.rules=[],this.__.condition=null};a.prototype=Object.create(l.prototype),a.prototype.constructor=a,o.defineModelProperties(a,["condition"]),a.prototype.empty=function(){this.each("reverse",(function(e){e.drop()}),(function(e){e.drop()}))},a.prototype.drop=function(){this.empty(),l.prototype.drop.call(this)},a.prototype.length=function(){return this.rules.length},a.prototype.insertNode=function(e,t,i){return void 0===t&&(t=this.length()),this.rules.splice(t,0,e),e.parent=this,i&&null!==this.model&&this.model.trigger("add",this,e,t),e},a.prototype.addGroup=function(e,t){return this.insertNode(new a(this,e),t,!0)},a.prototype.addRule=function(e,t){return this.insertNode(new u(this,e),t,!0)},a.prototype.removeNode=function(e){var t=this.getNodePos(e);-1!==t&&(e.parent=null,this.rules.splice(t,1))},a.prototype.getNodePos=function(e){return this.rules.indexOf(e)},a.prototype.each=function(e,t,i,n){"boolean"!=typeof e&&"string"!=typeof e&&(n=i,i=t,t=e,e=!1),n=void 0===n?null:n;for(var r=e?this.rules.length-1:0,o=e?0:this.rules.length-1,s=e?-1:1,l=!1;(e?o<=r:r<=o)&&(this.rules[r]instanceof a?i&&(l=!1===i.call(n,this.rules[r])):t&&(l=!1===t.call(n,this.rules[r])),!l);r+=s);return!l},a.prototype.contains=function(e,t){return-1!==this.getNodePos(e)||!!t&&!this.each((function(){return!0}),(function(t){return!t.contains(e,!0)}))};var u=function(e,t){if(!(this instanceof u))return new u(e,t);l.call(this,e,t),this._updating_value=!1,this._updating_input=!1,this.__.filter=null,this.__.operator=null,this.__.value=void 0};function c(e,i,n){var r,o,s=t.selectors;(r=i.closest(s.rule_container)).length&&(o="moveAfter"),o||(r=i.closest(s.group_header)).length&&(r=i.closest(s.group_container),o="moveAtBegin"),o||(r=i.closest(s.group_container)).length&&(o="moveAtEnd"),o&&(e[o](n.getModel(r)),n&&e instanceof u&&n.setRuleInputValue(e,e.value))}function p(e){var t=e.match(/(question_mark|numbered|named)(?:\((.)\))?/);return t||(t=[null,"question_mark",void 0]),t}return u.prototype=Object.create(l.prototype),u.prototype.constructor=u,o.defineModelProperties(u,["filter","operator","value"]),u.prototype.isRoot=function(){return!1},t.Group=a,t.Rule=u,e.fn.queryBuilder=function(e){0===this.length&&o.error("Config","No target defined"),1<this.length&&o.error("Config","Unable to initialize on multiple target");var i=this.data("queryBuilder"),n="object"==typeof e&&e||{};if(!i&&"destroy"==e)return this;if(!i){var r=new t(this,n);this.data("queryBuilder",r),r.init(n.rules)}return"string"==typeof e?i[e].apply(i,Array.prototype.slice.call(arguments,1)):this},e.fn.queryBuilder.constructor=t,e.fn.queryBuilder.defaults=t.defaults,e.fn.queryBuilder.extend=t.extend,e.fn.queryBuilder.define=t.define,e.fn.queryBuilder.regional=t.regional,t.define("bt-checkbox",(function(e){"glyphicons"==e.font&&this.$el.addClass("bt-checkbox-glyphicons"),this.on("getRuleInput.filter",(function(t,i,n){var r=i.filter;if(("radio"===r.input||"checkbox"===r.input)&&!r.plugin){t.value="",r.colors||(r.colors={}),r.color&&(r.colors._def_=r.color);var s=r.vertical?' style="display:block"':"",l=0;o.iterateOptions(r.values,(function(i,o){var a=r.colors[i]||r.colors._def_||e.color,u=n+"_"+l++;t.value+="<div"+s+' class="'+r.input+" "+r.input+"-"+a+'">   <input type="'+r.input+'" name="'+n+'" id="'+u+'" value="'+i+'">   <label for="'+u+'">'+o+"</label> </div>"}))}}))}),{font:"glyphicons",color:"default"}),t.define("bt-selectpicker",(function(i){e.fn.selectpicker&&e.fn.selectpicker.Constructor||o.error("MissingLibrary",'Bootstrap Select is required to use "bt-selectpicker" plugin. Get it here: http://silviomoreto.github.io/bootstrap-select');var n=t.selectors;this.on("afterCreateRuleFilters",(function(e,t){t.$el.find(n.rule_filter).removeClass("form-control").selectpicker(i)})),this.on("afterCreateRuleOperators",(function(e,t){t.$el.find(n.rule_operator).removeClass("form-control").selectpicker(i)})),this.on("afterUpdateRuleFilter",(function(e,t){t.$el.find(n.rule_filter).selectpicker("render")})),this.on("afterUpdateRuleOperator",(function(e,t){t.$el.find(n.rule_operator).selectpicker("render")})),this.on("beforeDeleteRule",(function(e,t){t.$el.find(n.rule_filter).selectpicker("destroy"),t.$el.find(n.rule_operator).selectpicker("destroy")}))}),{container:"body",style:"btn-inverse btn-xs",width:"auto",showIcon:!1}),t.define("bt-tooltip-errors",(function(i){e.fn.tooltip&&e.fn.tooltip.Constructor&&e.fn.tooltip.Constructor.prototype.fixTitle||o.error("MissingLibrary",'Bootstrap Tooltip is required to use "bt-tooltip-errors" plugin. Get it here: http://getbootstrap.com');var n=this;this.on("getRuleTemplate.filter getGroupTemplate.filter",(function(i){var n=e(i.value);n.find(t.selectors.error_container).attr("data-toggle","tooltip"),i.value=n.prop("outerHTML")})),this.model.on("update",(function(e,r,o){"error"==o&&n.settings.display_errors&&r.$el.find(t.selectors.error_container).eq(0).tooltip(i).tooltip("hide").tooltip("fixTitle")}))}),{placement:"right"}),t.extend({setFilters:function(e,i){var n=this;void 0===i&&(i=e,e=!1),i=this.checkFilters(i);var r=(i=this.change("setFilters",i)).map((function(e){return e.id}));if(e||function e(t){t.each((function(e){e.filter&&-1===r.indexOf(e.filter.id)&&o.error("ChangeFilter",'A rule is using filter "{0}"',e.filter.id)}),e)}(this.model.root),this.filters=i,function e(i){i.each(!0,(function(e){e.filter&&-1===r.indexOf(e.filter.id)?(e.drop(),n.trigger("rulesChanged")):(n.createRuleFilters(e),e.$el.find(t.selectors.rule_filter).val(e.filter?e.filter.id:"-1"),n.trigger("afterUpdateRuleFilter",e))}),e)}(this.model.root),this.settings.plugins&&(this.settings.plugins["unique-filter"]&&this.updateDisabledFilters(),this.settings.plugins["bt-selectpicker"]&&this.$el.find(t.selectors.rule_filter).selectpicker("render")),this.settings.default_filter)try{this.getFilterById(this.settings.default_filter)}catch(e){this.settings.default_filter=null}this.trigger("afterSetFilters",i)},addFilter:function(t,i){void 0===i||"#end"==i?i=this.filters.length:"#start"==i&&(i=0),e.isArray(t)||(t=[t]);var n=e.extend(!0,[],this.filters);parseInt(i)==i||this.filters.some((function(e,t){if(e.id==i)return i=t+1,!0}))?Array.prototype.splice.apply(n,[i,0].concat(t)):Array.prototype.push.apply(n,t),this.setFilters(n)},removeFilter:function(t,i){var n=e.extend(!0,[],this.filters);"string"==typeof t&&(t=[t]),n=n.filter((function(e){return-1===t.indexOf(e.id)})),this.setFilters(i,n)}}),t.define("chosen-selectpicker",(function(i){e.fn.chosen||o.error("MissingLibrary",'chosen is required to use "chosen-selectpicker" plugin. Get it here: https://github.com/harvesthq/chosen'),this.settings.plugins["bt-selectpicker"]&&o.error("Conflict","bt-selectpicker is already selected as the dropdown plugin. Please remove chosen-selectpicker from the plugin list");var n=t.selectors;this.on("afterCreateRuleFilters",(function(e,t){t.$el.find(n.rule_filter).removeClass("form-control").chosen(i)})),this.on("afterCreateRuleOperators",(function(e,t){1<e.builder.getOperators(t.filter).length&&t.$el.find(n.rule_operator).removeClass("form-control").chosen(i)})),this.on("afterUpdateRuleFilter",(function(e,t){t.$el.find(n.rule_filter).trigger("chosen:updated")})),this.on("afterUpdateRuleOperator",(function(e,t){t.$el.find(n.rule_operator).trigger("chosen:updated")})),this.on("beforeDeleteRule",(function(e,t){t.$el.find(n.rule_filter).chosen("destroy"),t.$el.find(n.rule_operator).chosen("destroy")}))})),t.define("filter-description",(function(i){"inline"===i.mode?this.on("afterUpdateRuleFilter afterUpdateRuleOperator",(function(t,n){var r=n.$el.find("p.filter-description"),o=t.builder.getFilterDescription(n.filter,n);o?(0===r.length?(r=e('<p class="filter-description"></p>')).appendTo(n.$el):r.css("display",""),r.html('<i class="'+i.icon+'"></i> '+o)):r.hide()})):"popover"===i.mode?(e.fn.popover&&e.fn.popover.Constructor&&e.fn.popover.Constructor.prototype.fixTitle||o.error("MissingLibrary",'Bootstrap Popover is required to use "filter-description" plugin. Get it here: http://getbootstrap.com'),this.on("afterUpdateRuleFilter afterUpdateRuleOperator",(function(n,r){var o=r.$el.find("button.filter-description"),s=n.builder.getFilterDescription(r.filter,r);s?(0===o.length?((o=e('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="popover"><i class="'+i.icon+'"></i></button>')).prependTo(r.$el.find(t.selectors.rule_actions)),o.popover({placement:"left",container:"body",html:!0}),o.on("mouseout",(function(){o.popover("hide")}))):o.css("display",""),o.data("bs.popover").options.content=s,o.attr("aria-describedby")&&o.popover("show")):(o.hide(),o.data("bs.popover")&&o.popover("hide"))}))):"bootbox"===i.mode&&("bootbox"in window||o.error("MissingLibrary",'Bootbox is required to use "filter-description" plugin. Get it here: http://bootboxjs.com'),this.on("afterUpdateRuleFilter afterUpdateRuleOperator",(function(n,r){var o=r.$el.find("button.filter-description"),s=n.builder.getFilterDescription(r.filter,r);s?(0===o.length?((o=e('<button type="button" class="btn btn-xs btn-info filter-description" data-toggle="bootbox"><i class="'+i.icon+'"></i></button>')).prependTo(r.$el.find(t.selectors.rule_actions)),o.on("click",(function(){bootbox.alert(o.data("description"))}))):o.css("display",""),o.data("description",s)):o.hide()})))}),{icon:"glyphicon glyphicon-info-sign",mode:"popover"}),t.extend({getFilterDescription:function(e,t){return e?"function"==typeof e.description?e.description.call(this,t):e.description:void 0}}),t.define("invert",(function(i){var n=this,r=t.selectors;this.on("afterInit",(function(){n.$el.on("click.queryBuilder","[data-invert=group]",(function(){var t=e(this).closest(r.group_container);n.invert(n.getModel(t),i)})),i.display_rules_button&&i.invert_rules&&n.$el.on("click.queryBuilder","[data-invert=rule]",(function(){var t=e(this).closest(r.rule_container);n.invert(n.getModel(t),i)}))})),i.disable_template||(this.on("getGroupTemplate.filter",(function(t){var o=e(t.value);o.find(r.condition_container).after('<button type="button" class="btn btn-xs btn-default" data-invert="group"><i class="'+i.icon+'"></i> '+n.translate("invert")+"</button>"),t.value=o.prop("outerHTML")})),i.display_rules_button&&i.invert_rules&&this.on("getRuleTemplate.filter",(function(t){var o=e(t.value);o.find(r.rule_actions).prepend('<button type="button" class="btn btn-xs btn-default" data-invert="rule"><i class="'+i.icon+'"></i> '+n.translate("invert")+"</button>"),t.value=o.prop("outerHTML")})))}),{icon:"glyphicon glyphicon-random",recursive:!0,invert_rules:!0,display_rules_button:!1,silent_fail:!1,disable_template:!1}),t.defaults({operatorOpposites:{equal:"not_equal",not_equal:"equal",in:"not_in",not_in:"in",less:"greater_or_equal",less_or_equal:"greater",greater:"less_or_equal",greater_or_equal:"less",between:"not_between",not_between:"between",begins_with:"not_begins_with",not_begins_with:"begins_with",contains:"not_contains",not_contains:"contains",ends_with:"not_ends_with",not_ends_with:"ends_with",is_empty:"is_not_empty",is_not_empty:"is_empty",is_null:"is_not_null",is_not_null:"is_null"},conditionOpposites:{AND:"OR",OR:"AND"}}),t.extend({invert:function(t,i){if(!(t instanceof l)){if(!this.model.root)return;i=t,t=this.model.root}if("object"!=typeof i&&(i={}),void 0===i.recursive&&(i.recursive=!0),void 0===i.invert_rules&&(i.invert_rules=!0),void 0===i.silent_fail&&(i.silent_fail=!1),void 0===i.trigger&&(i.trigger=!0),t instanceof a){if(this.settings.conditionOpposites[t.condition]?t.condition=this.settings.conditionOpposites[t.condition]:i.silent_fail||o.error("InvertCondition",'Unknown inverse of condition "{0}"',t.condition),i.recursive){var n=e.extend({},i,{trigger:!1});t.each((function(e){i.invert_rules&&this.invert(e,n)}),(function(e){this.invert(e,n)}),this)}}else if(t instanceof u&&t.operator&&!t.filter.no_invert)if(this.settings.operatorOpposites[t.operator.type]){var r=this.settings.operatorOpposites[t.operator.type];t.filter.operators&&-1==t.filter.operators.indexOf(r)||(t.operator=this.getOperatorByType(r))}else i.silent_fail||o.error("InvertOperator",'Unknown inverse of operator "{0}"',t.operator.type);i.trigger&&(this.trigger("afterInvert",t,i),this.trigger("rulesChanged"))}}),t.defaults({mongoOperators:{equal:function(e){return e[0]},not_equal:function(e){return{$ne:e[0]}},in:function(e){return{$in:e}},not_in:function(e){return{$nin:e}},less:function(e){return{$lt:e[0]}},less_or_equal:function(e){return{$lte:e[0]}},greater:function(e){return{$gt:e[0]}},greater_or_equal:function(e){return{$gte:e[0]}},between:function(e){return{$gte:e[0],$lte:e[1]}},not_between:function(e){return{$lt:e[0],$gt:e[1]}},begins_with:function(e){return{$regex:"^"+o.escapeRegExp(e[0])}},not_begins_with:function(e){return{$regex:"^(?!"+o.escapeRegExp(e[0])+")"}},contains:function(e){return{$regex:o.escapeRegExp(e[0])}},not_contains:function(e){return{$regex:"^((?!"+o.escapeRegExp(e[0])+").)*$",$options:"s"}},ends_with:function(e){return{$regex:o.escapeRegExp(e[0])+"$"}},not_ends_with:function(e){return{$regex:"(?<!"+o.escapeRegExp(e[0])+")$"}},is_empty:function(e){return""},is_not_empty:function(e){return{$ne:""}},is_null:function(e){return null},is_not_null:function(e){return{$ne:null}}},mongoRuleOperators:{$eq:function(e){return{val:e,op:null===e?"is_null":""===e?"is_empty":"equal"}},$ne:function(e){return{val:e=e.$ne,op:null===e?"is_not_null":""===e?"is_not_empty":"not_equal"}},$regex:function(e){return"^(?!"==(e=e.$regex).slice(0,4)&&")"==e.slice(-1)?{val:e.slice(4,-1),op:"not_begins_with"}:"^((?!"==e.slice(0,5)&&").)*$"==e.slice(-5)?{val:e.slice(5,-5),op:"not_contains"}:"(?<!"==e.slice(0,4)&&")$"==e.slice(-2)?{val:e.slice(4,-2),op:"not_ends_with"}:"$"==e.slice(-1)?{val:e.slice(0,-1),op:"ends_with"}:"^"==e.slice(0,1)?{val:e.slice(1),op:"begins_with"}:{val:e,op:"contains"}},between:function(e){return{val:[e.$gte,e.$lte],op:"between"}},not_between:function(e){return{val:[e.$lt,e.$gt],op:"not_between"}},$in:function(e){return{val:e.$in,op:"in"}},$nin:function(e){return{val:e.$nin,op:"not_in"}},$lt:function(e){return{val:e.$lt,op:"less"}},$lte:function(e){return{val:e.$lte,op:"less_or_equal"}},$gt:function(e){return{val:e.$gt,op:"greater"}},$gte:function(e){return{val:e.$gte,op:"greater_or_equal"}}}}),t.extend({getMongo:function(e){if(!(e=void 0===e?this.getRules():e))return null;var t=this;return function e(i){if(i.condition||(i.condition=t.settings.default_condition),-1===["AND","OR"].indexOf(i.condition.toUpperCase())&&o.error("UndefinedMongoCondition",'Unable to build MongoDB query with condition "{0}"',i.condition),!i.rules)return{};var n=[];i.rules.forEach((function(i){if(i.rules&&0<i.rules.length)n.push(e(i));else{var r=t.settings.mongoOperators[i.operator],s=t.getOperatorByType(i.operator);void 0===r&&o.error("UndefinedMongoOperator",'Unknown MongoDB operation for operator "{0}"',i.operator),0!==s.nb_inputs&&(i.value instanceof Array||(i.value=[i.value]));var l={};l[t.change("getMongoDBField",i.field,i)]=r.call(t,i.value),n.push(t.change("ruleToMongo",l,i,i.value,r))}}));var r={};return r["$"+i.condition.toLowerCase()]=n,t.change("groupToMongo",r,i)}(e)},getRulesFromMongo:function(e){if(null==e)return null;var t=this;if("rules"in(e=t.change("parseMongoNode",e))&&"condition"in e)return e;if("id"in e&&"operator"in e&&"value"in e)return{condition:this.settings.default_condition,rules:[e]};var i=t.getMongoCondition(e);return i||o.error("MongoParse","Invalid MongoDB query format"),function e(i,n){var r=i[n],s=[];return r.forEach((function(i){if("rules"in(i=t.change("parseMongoNode",i))&&"condition"in i)s.push(i);else if("id"in i&&"operator"in i&&"value"in i)s.push(i);else{var n=t.getMongoCondition(i);if(n)s.push(e(i,n));else{var r=Object.keys(i)[0],l=i[r],a=t.getMongoOperator(l);void 0===a&&o.error("MongoParse","Invalid MongoDB query format");var u=t.settings.mongoRuleOperators[a];void 0===u&&o.error("UndefinedMongoOperator",'JSON Rule operation unknown for operator "{0}"',a);var c=u.call(t,l),p=t.getMongoDBFieldID(r,l),d=t.change("mongoToRule",{id:p,field:r,operator:c.op,value:c.val},i);s.push(d)}}})),t.change("mongoToGroup",{condition:n.replace("$","").toUpperCase(),rules:s},i)}(e,i)},setRulesFromMongo:function(e){this.setRules(this.getRulesFromMongo(e))},getMongoDBFieldID:function(e,t){var i=this.filters.filter((function(t){return t.field===e}));return 1===i.length?i[0].id:this.change("getMongoDBFieldID",e,t)},getMongoOperator:function(e){if(null===e||"object"!=typeof e)return"$eq";if(void 0!==e.$gte&&void 0!==e.$lte)return"between";if(void 0!==e.$lt&&void 0!==e.$gt)return"not_between";var t=Object.keys(e).filter(function(e){return!!this.settings.mongoRuleOperators[e]}.bind(this));return 1===t.length?t[0]:void 0},getMongoCondition:function(e){for(var t=Object.keys(e),i=0,n=t.length;i<n;i++)if("$or"===t[i].toLowerCase()||"$and"===t[i].toLowerCase())return t[i]}}),t.define("not-group",(function(i){var n=this;this.on("afterInit",(function(){n.$el.on("click.queryBuilder","[data-not=group]",(function(){var i=e(this).closest(t.selectors.group_container),r=n.getModel(i);r.not=!r.not})),n.model.on("update",(function(e,t,i){t instanceof a&&"not"===i&&n.updateGroupNot(t)}))})),this.on("afterAddGroup",(function(e,t){t.__.not=!1})),i.disable_template||this.on("getGroupTemplate.filter",(function(r){var o=e(r.value);o.find(t.selectors.condition_container).prepend('<button type="button" class="btn btn-xs btn-default" data-not="group"><i class="'+i.icon_unchecked+'"></i> '+n.translate("NOT")+"</button>"),r.value=o.prop("outerHTML")})),this.on("groupToJson.filter",(function(e,t){e.value.not=t.not})),this.on("jsonToGroup.filter",(function(e,t){e.value.not=!!t.not})),this.on("groupToSQL.filter",(function(e,t){t.not&&(e.value="NOT ( "+e.value+" )")})),this.on("parseSQLNode.filter",(function(e){e.value.name&&"NOT"==e.value.name.toUpperCase()&&(e.value=e.value.arguments.value[0],-1===["AND","OR"].indexOf(e.value.operation.toUpperCase())&&(e.value=new SQLParser.nodes.Op(n.settings.default_condition,e.value,null)),e.value.not=!0)})),this.on("sqlGroupsDistinct.filter",(function(e,t,i,n){i.not&&0<n&&(e.value=!0)})),this.on("sqlToGroup.filter",(function(e,t){e.value.not=!!t.not})),this.on("groupToMongo.filter",(function(e,t){var i="$"+t.condition.toLowerCase();t.not&&e.value[i]&&(e.value={$nor:[e.value]})})),this.on("parseMongoNode.filter",(function(e){var t=Object.keys(e.value);"$nor"==t[0]&&(e.value=e.value[t[0]][0],e.value.not=!0)})),this.on("mongoToGroup.filter",(function(e,t){e.value.not=!!t.not}))}),{icon_unchecked:"glyphicon glyphicon-unchecked",icon_checked:"glyphicon glyphicon-check",disable_template:!1}),o.defineModelProperties(a,["not"]),t.selectors.group_not=t.selectors.group_header+" [data-not=group]",t.extend({updateGroupNot:function(e){var i=this.plugins["not-group"];e.$el.find(">"+t.selectors.group_not).toggleClass("active",e.not).find("i").attr("class",e.not?i.icon_checked:i.icon_unchecked),this.trigger("afterUpdateGroupNot",e),this.trigger("rulesChanged")}}),t.define("sortable",(function(i){var n,r,s,l;"interact"in window||o.error("MissingLibrary",'interact.js is required to use "sortable" plugin. Get it here: http://interactjs.io'),void 0!==i.default_no_sortable&&(o.error(!1,"Config",'Sortable plugin : "default_no_sortable" options is deprecated, use standard "default_rule_flags" and "default_group_flags" instead'),this.settings.default_rule_flags.no_sortable=this.settings.default_group_flags.no_sortable=i.default_no_sortable),interact.dynamicDrop(!0),interact.pointerMoveTolerance(10),this.on("afterAddRule afterAddGroup",(function(o,u){if(u!=n){var p=o.builder;i.inherit_no_sortable&&u.parent&&u.parent.flags.no_sortable&&(u.flags.no_sortable=!0),i.inherit_no_drop&&u.parent&&u.parent.flags.no_drop&&(u.flags.no_drop=!0),u.flags.no_sortable||interact(u.$el[0]).draggable({allowFrom:t.selectors.drag_handle,onstart:function(t){l=!1,s=p.getModel(t.target),r=s.$el.clone().appendTo(s.$el.parent()).width(s.$el.outerWidth()).addClass("dragging");var i=e('<div class="rule-placeholder">&nbsp;</div>').height(s.$el.outerHeight());n=s.parent.addRule(i,s.getPos()),s.$el.hide()},onmove:function(e){r[0].style.top=e.clientY-15+"px",r[0].style.left=e.clientX-15+"px"},onend:function(t){t.dropzone&&(c(s,e(t.relatedTarget),p),l=!0),r.remove(),r=void 0,n.drop(),n=void 0,s.$el.css("display",""),p.trigger("afterMove",s),p.trigger("rulesChanged")}}),u.flags.no_drop||(interact(u.$el[0]).dropzone({accept:t.selectors.rule_and_group_containers,ondragenter:function(t){c(n,e(t.target),p)},ondrop:function(t){l||c(s,e(t.target),p)}}),u instanceof a&&interact(u.$el.find(t.selectors.group_header)[0]).dropzone({accept:t.selectors.rule_and_group_containers,ondragenter:function(t){c(n,e(t.target),p)},ondrop:function(t){l||c(s,e(t.target),p)}}))}})),this.on("beforeDeleteRule beforeDeleteGroup",(function(e,i){e.isDefaultPrevented()||(interact(i.$el[0]).unset(),i instanceof a&&interact(i.$el.find(t.selectors.group_header)[0]).unset())})),this.on("afterApplyRuleFlags afterApplyGroupFlags",(function(e,t){t.flags.no_sortable&&t.$el.find(".drag-handle").remove()})),i.disable_template||(this.on("getGroupTemplate.filter",(function(n,r){if(1<r){var o=e(n.value);o.find(t.selectors.condition_container).after('<div class="drag-handle"><i class="'+i.icon+'"></i></div>'),n.value=o.prop("outerHTML")}})),this.on("getRuleTemplate.filter",(function(n){var r=e(n.value);r.find(t.selectors.rule_header).after('<div class="drag-handle"><i class="'+i.icon+'"></i></div>'),n.value=r.prop("outerHTML")})))}),{inherit_no_sortable:!0,inherit_no_drop:!0,icon:"glyphicon glyphicon-sort",disable_template:!1}),t.selectors.rule_and_group_containers=t.selectors.rule_container+", "+t.selectors.group_container,t.selectors.drag_handle=".drag-handle",t.defaults({default_rule_flags:{no_sortable:!1,no_drop:!1},default_group_flags:{no_sortable:!1,no_drop:!1}}),t.define("sql-support",(function(e){}),{boolean_as_integer:!0}),t.defaults({sqlOperators:{equal:{op:"= ?"},not_equal:{op:"!= ?"},in:{op:"IN(?)",sep:", "},not_in:{op:"NOT IN(?)",sep:", "},less:{op:"< ?"},less_or_equal:{op:"<= ?"},greater:{op:"> ?"},greater_or_equal:{op:">= ?"},between:{op:"BETWEEN ?",sep:" AND "},not_between:{op:"NOT BETWEEN ?",sep:" AND "},begins_with:{op:"LIKE(?)",mod:"{0}%"},not_begins_with:{op:"NOT LIKE(?)",mod:"{0}%"},contains:{op:"LIKE(?)",mod:"%{0}%"},not_contains:{op:"NOT LIKE(?)",mod:"%{0}%"},ends_with:{op:"LIKE(?)",mod:"%{0}"},not_ends_with:{op:"NOT LIKE(?)",mod:"%{0}"},is_empty:{op:"= ''"},is_not_empty:{op:"!= ''"},is_null:{op:"IS NULL"},is_not_null:{op:"IS NOT NULL"}},sqlRuleOperator:{"=":function(e){return{val:e,op:""===e?"is_empty":"equal"}},"!=":function(e){return{val:e,op:""===e?"is_not_empty":"not_equal"}},LIKE:function(e){return"%"==e.slice(0,1)&&"%"==e.slice(-1)?{val:e.slice(1,-1),op:"contains"}:"%"==e.slice(0,1)?{val:e.slice(1),op:"ends_with"}:"%"==e.slice(-1)?{val:e.slice(0,-1),op:"begins_with"}:void o.error("SQLParse",'Invalid value for LIKE operator "{0}"',e)},"NOT LIKE":function(e){return"%"==e.slice(0,1)&&"%"==e.slice(-1)?{val:e.slice(1,-1),op:"not_contains"}:"%"==e.slice(0,1)?{val:e.slice(1),op:"not_ends_with"}:"%"==e.slice(-1)?{val:e.slice(0,-1),op:"not_begins_with"}:void o.error("SQLParse",'Invalid value for NOT LIKE operator "{0}"',e)},IN:function(e){return{val:e,op:"in"}},"NOT IN":function(e){return{val:e,op:"not_in"}},"<":function(e){return{val:e,op:"less"}},"<=":function(e){return{val:e,op:"less_or_equal"}},">":function(e){return{val:e,op:"greater"}},">=":function(e){return{val:e,op:"greater_or_equal"}},BETWEEN:function(e){return{val:e,op:"between"}},"NOT BETWEEN":function(e){return{val:e,op:"not_between"}},IS:function(e){return null!==e&&o.error("SQLParse","Invalid value for IS operator"),{val:null,op:"is_null"}},"IS NOT":function(e){return null!==e&&o.error("SQLParse","Invalid value for IS operator"),{val:null,op:"is_not_null"}}},sqlStatements:{question_mark:function(){var e=[];return{add:function(t,i){return e.push(i),"?"},run:function(){return e}}},numbered:function(e){(!e||1<e.length)&&(e="$");var t=0,i=[];return{add:function(n,r){return i.push(r),e+ ++t},run:function(){return i}}},named:function(e){(!e||1<e.length)&&(e=":");var t={},i={};return{add:function(n,r){t[n.field]||(t[n.field]=1);var o=n.field+"_"+t[n.field]++;return i[o]=r,e+o},run:function(){return i}}}},sqlRuleStatement:{question_mark:function(e){var t=0;return{parse:function(i){return"?"==i?e[t++]:i},esc:function(e){return e.replace(/\?/g,"'?'")}}},numbered:function(e,t){(!t||1<t.length)&&(t="$");var i=new RegExp("^\\"+t+"[0-9]+$"),n=new RegExp("\\"+t+"([0-9]+)","g");return{parse:function(t){return i.test(t)?e[t.slice(1)-1]:t},esc:function(e){return e.replace(n,"'"+("$"==t?"$$":t)+"$1'")}}},named:function(e,t){(!t||1<t.length)&&(t=":");var i=new RegExp("^\\"+t),n=new RegExp("\\"+t+"("+Object.keys(e).join("|")+")\\b","g");return{parse:function(t){return i.test(t)?e[t.slice(1)]:t},esc:function(e){return e.replace(n,"'"+("$"==t?"$$":t)+"$1'")}}}}}),t.extend({getSQL:function(e,t,i){if(!(i=void 0===i?this.getRules():i))return null;t=t?"\n":" ";var n=this.getPluginOptions("sql-support","boolean_as_integer");if(!0===e&&(e="question_mark"),"string"==typeof e){var r=p(e);e=this.settings.sqlStatements[r[1]](r[2])}var s=this,l=function i(r){if(r.condition||(r.condition=s.settings.default_condition),-1===["AND","OR"].indexOf(r.condition.toUpperCase())&&o.error("UndefinedSQLCondition",'Unable to build SQL query with condition "{0}"',r.condition),!r.rules)return"";var l=[];r.rules.forEach((function(r){if(r.rules&&0<r.rules.length)l.push("("+t+i(r)+t+")"+t);else{var a=s.settings.sqlOperators[r.operator],u=s.getOperatorByType(r.operator),c="";void 0===a&&o.error("UndefinedSQLOperator",'Unknown SQL operation for operator "{0}"',r.operator),0!==u.nb_inputs&&(r.value instanceof Array||(r.value=[r.value]),r.value.forEach((function(t,i){0<i&&(c+=a.sep),"boolean"==r.type&&n?t=t?1:0:e||"integer"===r.type||"double"===r.type||"boolean"===r.type||(t=o.escapeString(t)),a.mod&&(t=o.fmt(a.mod,t)),e?c+=e.add(r,t):("string"==typeof t&&(t="'"+t+"'"),c+=t)})));var p=function(e){return a.op.replace("?",(function(){return e}))},d=s.change("getSQLField",r.field,r)+" "+p(c);l.push(s.change("ruleToSQL",d,r,c,p))}}));var a=l.join(" "+r.condition+t);return s.change("groupToSQL",a,r)}(i);return e?{sql:l,params:e.run()}:{sql:l}},getRulesFromSQL:function(t,i){"SQLParser"in window||o.error("MissingLibrary","SQLParser is required to parse SQL queries. Get it here https://github.com/mistic100/sql-parser");var n=this;if("string"==typeof t&&(t={sql:t}),!0===i&&(i="question_mark"),"string"==typeof i){var r=p(i);i=this.settings.sqlRuleStatement[r[1]](t.params,r[2])}i&&(t.sql=i.esc(t.sql)),0!==t.sql.toUpperCase().indexOf("SELECT")&&(t.sql="SELECT * FROM table WHERE "+t.sql);var s=SQLParser.parse(t.sql);s.where||o.error("SQLParse","No WHERE clause found");var l=n.change("parseSQLNode",s.where.conditions);if("rules"in l&&"condition"in l)return l;if("id"in l&&"operator"in l&&"value"in l)return{condition:this.settings.default_condition,rules:[l]};var a=n.change("sqlToGroup",{condition:this.settings.default_condition,rules:[]},l),u=a;return function t(r,s){if(null!==r)if("rules"in(r=n.change("parseSQLNode",r))&&"condition"in r)u.rules.push(r);else if("id"in r&&"operator"in r&&"value"in r)u.rules.push(r);else if("left"in r&&"right"in r&&"operation"in r||o.error("SQLParse","Unable to parse WHERE clause"),-1!==["AND","OR"].indexOf(r.operation.toUpperCase())){if(n.change("sqlGroupsDistinct",0<s&&u.condition!=r.operation.toUpperCase(),u,r,s)){var l=n.change("sqlToGroup",{condition:n.settings.default_condition,rules:[]},r);u.rules.push(l),u=l}u.condition=r.operation.toUpperCase(),s++;var a=u;t(r.left,s),u=a,t(r.right,s)}else{var c;e.isPlainObject(r.right.value)&&o.error("SQLParse","Value format not supported for {0}.",r.left.value),c=e.isArray(r.right.value)?r.right.value.map((function(e){return e.value})):r.right.value,i&&(c=e.isArray(c)?c.map(i.parse):i.parse(c));var p=r.operation.toUpperCase();"<>"==p&&(p="!=");var d=n.settings.sqlRuleOperator[p];void 0===d&&o.error("UndefinedSQLOperator",'Invalid SQL operation "{0}".',r.operation);var h,f=d.call(this,c,r.operation);"values"in r.left?h=r.left.values.join("."):"value"in r.left?h=r.left.value:o.error("SQLParse","Cannot find field name in {0}",JSON.stringify(r.left));var g=n.getSQLFieldID(h,c),v=n.change("sqlToRule",{id:g,field:h,operator:f.op,value:f.val},r);u.rules.push(v)}}(l,0),a},setRulesFromSQL:function(e,t){this.setRules(this.getRulesFromSQL(e,t))},getSQLFieldID:function(e,t){var i=this.filters.filter((function(t){return t.field.toLowerCase()===e.toLowerCase()}));return 1===i.length?i[0].id:this.change("getSQLFieldID",e,t)}}),t.define("unique-filter",(function(){this.status.used_filters={},this.on("afterUpdateRuleFilter",this.updateDisabledFilters),this.on("afterDeleteRule",this.updateDisabledFilters),this.on("afterCreateRuleFilters",this.applyDisabledFilters),this.on("afterReset",this.clearDisabledFilters),this.on("afterClear",this.clearDisabledFilters),this.on("getDefaultFilter.filter",(function(e,t){var i=e.builder;i.updateDisabledFilters(),e.value.id in i.status.used_filters&&(i.filters.some((function(n){if(!(n.id in i.status.used_filters)||0<i.status.used_filters[n.id].length&&-1===i.status.used_filters[n.id].indexOf(t.parent))return e.value=n,!0}))||(o.error(!1,"UniqueFilter","No more non-unique filters available"),e.value=void 0))}))})),t.extend({updateDisabledFilters:function(e){var t=e?e.builder:this;t.status.used_filters={},t.model&&(function e(i){i.each((function(e){e.filter&&e.filter.unique&&(t.status.used_filters[e.filter.id]||(t.status.used_filters[e.filter.id]=[]),"group"==e.filter.unique&&t.status.used_filters[e.filter.id].push(e.parent))}),(function(t){e(t)}))}(t.model.root),t.applyDisabledFilters(e))},clearDisabledFilters:function(e){var t=e?e.builder:this;t.status.used_filters={},t.applyDisabledFilters(e)},applyDisabledFilters:function(i){var n=i?i.builder:this;n.$el.find(t.selectors.filter_container+" option").prop("disabled",!1),e.each(n.status.used_filters,(function(e,i){0===i.length?n.$el.find(t.selectors.filter_container+' option[value="'+e+'"]:not(:selected)').prop("disabled",!0):i.forEach((function(i){i.each((function(i){i.$el.find(t.selectors.filter_container+' option[value="'+e+'"]:not(:selected)').prop("disabled",!0)}))}))})),n.settings.plugins&&n.settings.plugins["bt-selectpicker"]&&n.$el.find(t.selectors.rule_filter).selectpicker("render")}}),t.regional.en={__locale:"English (en)",__author:'Damien "Mistic" Sorel, http://www.strangeplanet.fr',add_rule:"Add rule",add_group:"Add group",delete_rule:"Delete",delete_group:"Delete",conditions:{AND:"AND",OR:"OR"},operators:{equal:"equal",not_equal:"not equal",in:"in",not_in:"not in",less:"less",less_or_equal:"less or equal",greater:"greater",greater_or_equal:"greater or equal",between:"between",not_between:"not between",begins_with:"begins with",not_begins_with:"doesn't begin with",contains:"contains",not_contains:"doesn't contain",ends_with:"ends with",not_ends_with:"doesn't end with",is_empty:"is empty",is_not_empty:"is not empty",is_null:"is null",is_not_null:"is not null"},errors:{no_filter:"No filter selected",empty_group:"The group is empty",radio_empty:"No value selected",checkbox_empty:"No value selected",select_empty:"No value selected",string_empty:"Empty value",string_exceed_min_length:"Must contain at least {0} characters",string_exceed_max_length:"Must not contain more than {0} characters",string_invalid_format:"Invalid format ({0})",number_nan:"Not a number",number_not_integer:"Not an integer",number_not_double:"Not a real number",number_exceed_min:"Must be greater than {0}",number_exceed_max:"Must be lower than {0}",number_wrong_step:"Must be a multiple of {0}",number_between_invalid:"Invalid values, {0} is greater than {1}",datetime_empty:"Empty value",datetime_invalid:"Invalid date format ({0})",datetime_exceed_min:"Must be after {0}",datetime_exceed_max:"Must be before {0}",datetime_between_invalid:"Invalid values, {0} is greater than {1}",boolean_not_valid:"Not a boolean",operator_not_multiple:'Operator "{1}" cannot accept multiple values'},invert:"Invert",NOT:"NOT"},t.defaults({lang_code:"en"}),t},void 0===(o="function"==typeof n?n.apply(t,r):n)||(e.exports=o)},70300:function(e,t,i){var n,r;void 0===this&&void 0!==window&&window,n=[i(19755)],r=function(e){!function(e){"use strict";var t=["sanitize","whiteList","sanitizeFn"],i=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],n={"*":["class","dir","id","lang","role","tabindex","style",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},r=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,o=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function s(t,n){var s=t.nodeName.toLowerCase();if(-1!==e.inArray(s,n))return-1===e.inArray(s,i)||Boolean(t.nodeValue.match(r)||t.nodeValue.match(o));for(var l=e(n).filter((function(e,t){return t instanceof RegExp})),a=0,u=l.length;a<u;a++)if(s.match(l[a]))return!0;return!1}function l(e,t,i){if(i&&"function"==typeof i)return i(e);for(var n=Object.keys(t),r=0,o=e.length;r<o;r++)for(var l=e[r].querySelectorAll("*"),a=0,u=l.length;a<u;a++){var c=l[a],p=c.nodeName.toLowerCase();if(-1!==n.indexOf(p))for(var d=[].slice.call(c.attributes),h=[].concat(t["*"]||[],t[p]||[]),f=0,g=d.length;f<g;f++){var v=d[f];s(v,h)||c.removeAttribute(v.nodeName)}else c.parentNode.removeChild(c)}}"classList"in document.createElement("_")||function(t){if("Element"in t){var i="classList",n="prototype",r=t.Element[n],o=Object,s=function(){var t=e(this);return{add:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.addClass(e)},remove:function(e){return e=Array.prototype.slice.call(arguments).join(" "),t.removeClass(e)},toggle:function(e,i){return t.toggleClass(e,i)},contains:function(e){return t.hasClass(e)}}};if(o.defineProperty){var l={get:s,enumerable:!0,configurable:!0};try{o.defineProperty(r,i,l)}catch(e){void 0!==e.number&&-2146823252!==e.number||(l.enumerable=!1,o.defineProperty(r,i,l))}}else o[n].__defineGetter__&&r.__defineGetter__(i,s)}}(window);var a,u,c,p=document.createElement("_");if(p.classList.add("c1","c2"),!p.classList.contains("c2")){var d=DOMTokenList.prototype.add,h=DOMTokenList.prototype.remove;DOMTokenList.prototype.add=function(){Array.prototype.forEach.call(arguments,d.bind(this))},DOMTokenList.prototype.remove=function(){Array.prototype.forEach.call(arguments,h.bind(this))}}if(p.classList.toggle("c3",!1),p.classList.contains("c3")){var f=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:f.call(this,e)}}function g(e,t){return e.length===t.length&&e.every((function(e,i){return e===t[i]}))}function v(e,t){var i,n=e.selectedOptions,r=[];if(t){for(var o=0,s=n.length;o<s;o++)(i=n[o]).disabled||"OPTGROUP"===i.parentNode.tagName&&i.parentNode.disabled||r.push(i);return r}return n}function m(e,t){for(var i,n=[],r=t||e.selectedOptions,o=0,s=r.length;o<s;o++)(i=r[o]).disabled||"OPTGROUP"===i.parentNode.tagName&&i.parentNode.disabled||n.push(i.value);return e.multiple?n:n.length?n[0]:null}p=null,String.prototype.startsWith||(a=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),u={}.toString,c=function(e){if(null==this)throw new TypeError;var t=String(this);if(e&&"[object RegExp]"==u.call(e))throw new TypeError;var i=t.length,n=String(e),r=n.length,o=arguments.length>1?arguments[1]:void 0,s=o?Number(o):0;s!=s&&(s=0);var l=Math.min(Math.max(s,0),i);if(r+l>i)return!1;for(var a=-1;++a<r;)if(t.charCodeAt(l+a)!=n.charCodeAt(a))return!1;return!0},a?a(String.prototype,"startsWith",{value:c,configurable:!0,writable:!0}):String.prototype.startsWith=c),Object.keys||(Object.keys=function(e,t,i){for(t in i=[],e)i.hasOwnProperty.call(e,t)&&i.push(t);return i}),HTMLSelectElement&&!HTMLSelectElement.prototype.hasOwnProperty("selectedOptions")&&Object.defineProperty(HTMLSelectElement.prototype,"selectedOptions",{get:function(){return this.querySelectorAll(":checked")}});var _={useDefault:!1,_set:e.valHooks.select.set};e.valHooks.select.set=function(t,i){return i&&!_.useDefault&&e(t).data("selected",!0),_._set.apply(this,arguments)};var b=null,y=function(){try{return new Event("change"),!0}catch(e){return!1}}();function w(e,t,i,n){for(var r=["display","subtext","tokens"],o=!1,s=0;s<r.length;s++){var l=r[s],a=e[l];if(a&&(a=a.toString(),"display"===l&&(a=a.replace(/<[^>]+>/g,"")),n&&(a=E(a)),a=a.toUpperCase(),o="contains"===i?a.indexOf(t)>=0:a.startsWith(t)))break}return o}function x(e){return parseInt(e,10)||0}e.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent?(y?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),i.dispatchEvent(t)):i.fireEvent?((t=document.createEventObject()).eventType=e,i.fireEvent("on"+e,t)):this.trigger(e)};var k={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},I=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]","g");function O(e){return k[e]}function E(e){return(e=e.toString())&&e.replace(I,O).replace($,"")}var S,C,R,T,A,N=(S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},C=function(e){return S[e]},R="(?:"+Object.keys(S).join("|")+")",T=RegExp(R),A=RegExp(R,"g"),function(e){return e=null==e?"":""+e,T.test(e)?e.replace(A,C):e}),L={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},D={ESCAPE:27,ENTER:13,SPACE:32,TAB:9,ARROW_UP:38,ARROW_DOWN:40},M={success:!1,major:"3"};try{M.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split("."),M.major=M.full[0],M.success=!0}catch(e){}var z=0,P=".bs.select",q={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title",ICONBASE:"glyphicon",TICKICON:"glyphicon-ok"},F={MENU:"."+q.MENU},B={div:document.createElement("div"),span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode(""),fragment:document.createDocumentFragment()};B.noResults=B.li.cloneNode(!1),B.noResults.className="no-results",B.a.setAttribute("role","option"),B.a.className="dropdown-item",B.subtext.className="text-muted",B.text=B.span.cloneNode(!1),B.text.className="text",B.checkMark=B.span.cloneNode(!1);var H=new RegExp(D.ARROW_UP+"|"+D.ARROW_DOWN),U=new RegExp("^"+D.TAB+"$|"+D.ESCAPE),W={li:function(e,t,i){var n=B.li.cloneNode(!1);return e&&(1===e.nodeType||11===e.nodeType?n.appendChild(e):n.innerHTML=e),void 0!==t&&""!==t&&(n.className=t),null!=i&&n.classList.add("optgroup-"+i),n},a:function(e,t,i){var n=B.a.cloneNode(!0);return e&&(11===e.nodeType?n.appendChild(e):n.insertAdjacentHTML("beforeend",e)),void 0!==t&&""!==t&&n.classList.add.apply(n.classList,t.split(/\s+/)),i&&n.setAttribute("style",i),n},text:function(e,t){var i,n,r=B.text.cloneNode(!1);if(e.content)r.innerHTML=e.content;else{if(r.textContent=e.text,e.icon){var o=B.whitespace.cloneNode(!1);(n=(!0===t?B.i:B.span).cloneNode(!1)).className=this.options.iconBase+" "+e.icon,B.fragment.appendChild(n),B.fragment.appendChild(o)}e.subtext&&((i=B.subtext.cloneNode(!1)).textContent=e.subtext,r.appendChild(i))}if(!0===t)for(;r.childNodes.length>0;)B.fragment.appendChild(r.childNodes[0]);else B.fragment.appendChild(r);return B.fragment},label:function(e){var t,i,n=B.text.cloneNode(!1);if(n.innerHTML=e.display,e.icon){var r=B.whitespace.cloneNode(!1);(i=B.span.cloneNode(!1)).className=this.options.iconBase+" "+e.icon,B.fragment.appendChild(i),B.fragment.appendChild(r)}return e.subtext&&((t=B.subtext.cloneNode(!1)).textContent=e.subtext,n.appendChild(t)),B.fragment.appendChild(n),B.fragment}};function j(e,t){e.length||(B.noResults.innerHTML=this.options.noneResultsText.replace("{0}",'"'+N(t)+'"'),this.$menuInner[0].firstChild.appendChild(B.noResults))}var G=function(t,i){var n=this;_.useDefault||(e.valHooks.select.set=_._set,_.useDefault=!0),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.options=i,this.selectpicker={main:{},search:{},current:{},view:{},isSearching:!1,keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout((function(){n.selectpicker.keydown.keyHistory=""}),800)}}}},this.sizeInfo={},null===this.options.title&&(this.options.title=this.$element.attr("title"));var r=this.options.windowPadding;"number"==typeof r&&(this.options.windowPadding=[r,r,r,r]),this.val=G.prototype.val,this.render=G.prototype.render,this.refresh=G.prototype.refresh,this.setStyle=G.prototype.setStyle,this.selectAll=G.prototype.selectAll,this.deselectAll=G.prototype.deselectAll,this.destroy=G.prototype.destroy,this.remove=G.prototype.remove,this.show=G.prototype.show,this.hide=G.prototype.hide,this.init()};function V(i){var n,r=arguments,o=i;if([].shift.apply(r),!M.success){try{M.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".")}catch(e){G.BootstrapVersion?M.full=G.BootstrapVersion.split(" ")[0].split("."):(M.full=[M.major,"0","0"],console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",e))}M.major=M.full[0],M.success=!0}if("4"===M.major){var s=[];G.DEFAULTS.style===q.BUTTONCLASS&&s.push({name:"style",className:"BUTTONCLASS"}),G.DEFAULTS.iconBase===q.ICONBASE&&s.push({name:"iconBase",className:"ICONBASE"}),G.DEFAULTS.tickIcon===q.TICKICON&&s.push({name:"tickIcon",className:"TICKICON"}),q.DIVIDER="dropdown-divider",q.SHOW="show",q.BUTTONCLASS="btn-light",q.POPOVERHEADER="popover-header",q.ICONBASE="",q.TICKICON="bs-ok-default";for(var l=0;l<s.length;l++)i=s[l],G.DEFAULTS[i.name]=q[i.className]}var a=this.each((function(){var i=e(this);if(i.is("select")){var s=i.data("selectpicker"),l="object"==typeof o&&o;if(s){if(l)for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(s.options[a]=l[a])}else{var u=i.data();for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&-1!==e.inArray(c,t)&&delete u[c];var p=e.extend({},G.DEFAULTS,e.fn.selectpicker.defaults||{},u,l);p.template=e.extend({},G.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},u.template,l.template),i.data("selectpicker",s=new G(this,p))}"string"==typeof o&&(n=s[o]instanceof Function?s[o].apply(s,r):s.options[o])}}));return void 0!==n?n:a}G.VERSION="1.13.18",G.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:q.BUTTONCLASS,size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:q.ICONBASE,tickIcon:q.TICKICON,showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1,sanitize:!0,sanitizeFn:null,whiteList:n},G.prototype={constructor:G,init:function(){var e=this,t=this.$element.attr("id"),i=this.$element[0],n=i.form;z++,this.selectId="bs-select-"+z,i.classList.add("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),i.classList.contains("show-tick")&&(this.options.showTick=!0),this.$newElement=this.createDropdown(),this.buildData(),this.$element.after(this.$newElement).prependTo(this.$newElement),n&&null===i.form&&(n.id||(n.id="form-"+this.selectId),i.setAttribute("form",n.id)),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(F.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),i.classList.remove("bs-select-hidden"),!0===this.options.dropdownAlignRight&&this.$menu[0].classList.add(q.MENURIGHT),void 0!==t&&this.$button.attr("data-id",t),this.checkDisabled(),this.clickListener(),this.options.liveSearch?(this.liveSearchListener(),this.focusedParent=this.$searchbox[0]):this.focusedParent=this.$menuInner[0],this.setStyle(),this.render(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide"+P,(function(){if(e.isVirtual()){var t=e.$menuInner[0],i=t.firstChild.cloneNode(!1);t.replaceChild(i,t.firstChild),t.scrollTop=0}})),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(t){e.$element.trigger("hide"+P,t)},"hidden.bs.dropdown":function(t){e.$element.trigger("hidden"+P,t)},"show.bs.dropdown":function(t){e.$element.trigger("show"+P,t)},"shown.bs.dropdown":function(t){e.$element.trigger("shown"+P,t)}}),i.hasAttribute("required")&&this.$element.on("invalid"+P,(function(){e.$button[0].classList.add("bs-invalid"),e.$element.on("shown"+P+".invalid",(function(){e.$element.val(e.$element.val()).off("shown"+P+".invalid")})).on("rendered"+P,(function(){this.validity.valid&&e.$button[0].classList.remove("bs-invalid"),e.$element.off("rendered"+P)})),e.$button.on("blur"+P,(function(){e.$element.trigger("focus").trigger("blur"),e.$button.off("blur"+P)}))})),setTimeout((function(){e.buildList(),e.$element.trigger("loaded"+P)}))},createDropdown:function(){var t=this.multiple||this.options.showTick?" show-tick":"",i=this.multiple?' aria-multiselectable="true"':"",n="",r=this.autofocus?" autofocus":"";M.major<4&&this.$element.parent().hasClass("input-group")&&(n=" input-group-btn");var o,s="",l="",a="",u="";return this.options.header&&(s='<div class="'+q.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(l='<div class="bs-searchbox"><input type="search" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+N(this.options.liveSearchPlaceholder)+'"')+' role="combobox" aria-label="Search" aria-controls="'+this.selectId+'" aria-autocomplete="list"></div>'),this.multiple&&this.options.actionsBox&&(a='<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn '+q.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+q.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(u='<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm '+q.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),o='<div class="dropdown bootstrap-select'+t+n+'"><button type="button" tabindex="-1" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+'data-toggle="dropdown"'+r+' role="combobox" aria-owns="'+this.selectId+'" aria-haspopup="listbox" aria-expanded="false"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner"></div></div> </div>'+("4"===M.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+q.MENU+" "+("4"===M.major?"":q.SHOW)+'">'+s+l+a+'<div class="inner '+q.SHOW+'" role="listbox" id="'+this.selectId+'" tabindex="-1" '+i+'><ul class="'+q.MENU+" inner "+("4"===M.major?q.SHOW:"")+'" role="presentation"></ul></div>'+u+"</div></div>",e(o)},setPositionData:function(){this.selectpicker.view.canHighlight=[],this.selectpicker.view.size=0,this.selectpicker.view.firstHighlightIndex=!1;for(var e=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],i=!0;"divider"===t.type?(i=!1,t.height=this.sizeInfo.dividerHeight):"optgroup-label"===t.type?(i=!1,t.height=this.sizeInfo.dropdownHeaderHeight):t.height=this.sizeInfo.liHeight,t.disabled&&(i=!1),this.selectpicker.view.canHighlight.push(i),i&&(this.selectpicker.view.size++,t.posinset=this.selectpicker.view.size,!1===this.selectpicker.view.firstHighlightIndex&&(this.selectpicker.view.firstHighlightIndex=e)),t.position=(0===e?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.elements.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(t,i,n){var r,o,s=this,a=0,u=[];if(this.selectpicker.isSearching=t,this.selectpicker.current=t?this.selectpicker.search:this.selectpicker.main,this.setPositionData(),i)if(n)a=this.$menuInner[0].scrollTop;else if(!s.multiple){var c=s.$element[0],p=(c.options[c.selectedIndex]||{}).liIndex;if("number"==typeof p&&!1!==s.options.size){var d=s.selectpicker.main.data[p],h=d&&d.position;h&&(a=h-(s.sizeInfo.menuInnerHeight+s.sizeInfo.liHeight)/2)}}function f(e,i){var n,a,c,p,d,h,f,v,m=s.selectpicker.current.elements.length,_=[],b=!0,y=s.isVirtual();s.selectpicker.view.scrollTop=e,n=Math.ceil(s.sizeInfo.menuInnerHeight/s.sizeInfo.liHeight*1.5),a=Math.round(m/n)||1;for(var w=0;w<a;w++){var x=(w+1)*n;if(w===a-1&&(x=m),_[w]=[w*n+(w?1:0),x],!m)break;void 0===d&&e-1<=s.selectpicker.current.data[x-1].position-s.sizeInfo.menuInnerHeight&&(d=w)}if(void 0===d&&(d=0),h=[s.selectpicker.view.position0,s.selectpicker.view.position1],c=Math.max(0,d-1),p=Math.min(a-1,d+1),s.selectpicker.view.position0=!1===y?0:Math.max(0,_[c][0])||0,s.selectpicker.view.position1=!1===y?m:Math.min(m,_[p][1])||0,f=h[0]!==s.selectpicker.view.position0||h[1]!==s.selectpicker.view.position1,void 0!==s.activeIndex&&(o=s.selectpicker.main.elements[s.prevActiveIndex],u=s.selectpicker.main.elements[s.activeIndex],r=s.selectpicker.main.elements[s.selectedIndex],i&&(s.activeIndex!==s.selectedIndex&&s.defocusItem(u),s.activeIndex=void 0),s.activeIndex&&s.activeIndex!==s.selectedIndex&&s.defocusItem(r)),void 0!==s.prevActiveIndex&&s.prevActiveIndex!==s.activeIndex&&s.prevActiveIndex!==s.selectedIndex&&s.defocusItem(o),(i||f)&&(v=s.selectpicker.view.visibleElements?s.selectpicker.view.visibleElements.slice():[],s.selectpicker.view.visibleElements=!1===y?s.selectpicker.current.elements:s.selectpicker.current.elements.slice(s.selectpicker.view.position0,s.selectpicker.view.position1),s.setOptionStatus(),(t||!1===y&&i)&&(b=!g(v,s.selectpicker.view.visibleElements)),(i||!0===y)&&b)){var k,I,$=s.$menuInner[0],O=document.createDocumentFragment(),E=$.firstChild.cloneNode(!1),S=s.selectpicker.view.visibleElements,C=[];$.replaceChild(E,$.firstChild),w=0;for(var R=S.length;w<R;w++){var T,A,N=S[w];s.options.sanitize&&(T=N.lastChild)&&(A=s.selectpicker.current.data[w+s.selectpicker.view.position0])&&A.content&&!A.sanitized&&(C.push(T),A.sanitized=!0),O.appendChild(N)}if(s.options.sanitize&&C.length&&l(C,s.options.whiteList,s.options.sanitizeFn),!0===y?(k=0===s.selectpicker.view.position0?0:s.selectpicker.current.data[s.selectpicker.view.position0-1].position,I=s.selectpicker.view.position1>m-1?0:s.selectpicker.current.data[m-1].position-s.selectpicker.current.data[s.selectpicker.view.position1-1].position,$.firstChild.style.marginTop=k+"px",$.firstChild.style.marginBottom=I+"px"):($.firstChild.style.marginTop=0,$.firstChild.style.marginBottom=0),$.firstChild.appendChild(O),!0===y&&s.sizeInfo.hasScrollBar){var L=$.firstChild.offsetWidth;if(i&&L<s.sizeInfo.menuInnerInnerWidth&&s.sizeInfo.totalMenuWidth>s.sizeInfo.selectWidth)$.firstChild.style.minWidth=s.sizeInfo.menuInnerInnerWidth+"px";else if(L>s.sizeInfo.menuInnerInnerWidth){s.$menu[0].style.minWidth=0;var D=$.firstChild.offsetWidth;D>s.sizeInfo.menuInnerInnerWidth&&(s.sizeInfo.menuInnerInnerWidth=D,$.firstChild.style.minWidth=s.sizeInfo.menuInnerInnerWidth+"px"),s.$menu[0].style.minWidth=""}}}if(s.prevActiveIndex=s.activeIndex,s.options.liveSearch){if(t&&i){var M,z=0;s.selectpicker.view.canHighlight[z]||(z=1+s.selectpicker.view.canHighlight.slice(1).indexOf(!0)),M=s.selectpicker.view.visibleElements[z],s.defocusItem(s.selectpicker.view.currentActive),s.activeIndex=(s.selectpicker.current.data[z]||{}).index,s.focusItem(M)}}else s.$menuInner.trigger("focus")}f(a,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",(function(e,t){s.noScroll||f(this.scrollTop,t),s.noScroll=!1})),e(window).off("resize"+P+"."+this.selectId+".createView").on("resize"+P+"."+this.selectId+".createView",(function(){s.$newElement.hasClass(q.SHOW)&&f(s.$menuInner[0].scrollTop)}))},focusItem:function(e,t,i){if(e){t=t||this.selectpicker.main.data[this.activeIndex];var n=e.firstChild;n&&(n.setAttribute("aria-setsize",this.selectpicker.view.size),n.setAttribute("aria-posinset",t.posinset),!0!==i&&(this.focusedParent.setAttribute("aria-activedescendant",n.id),e.classList.add("active"),n.classList.add("active")))}},defocusItem:function(e){e&&(e.classList.remove("active"),e.firstChild&&e.firstChild.classList.remove("active"))},setPlaceholder:function(){var e=this,t=!1;if(this.options.title&&!this.multiple){this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option")),t=!0;var i=this.$element[0],n=!1,r=!this.selectpicker.view.titleOption.parentNode,o=i.selectedIndex,s=i.options[o],l=window.performance&&window.performance.getEntriesByType("navigation"),a=l&&l.length?"back_forward"!==l[0].type:2!==window.performance.navigation.type;r&&(this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",n=!s||0===o&&!1===s.defaultSelected&&void 0===this.$element.data("selected")),(r||0!==this.selectpicker.view.titleOption.index)&&i.insertBefore(this.selectpicker.view.titleOption,i.firstChild),n&&a?i.selectedIndex=0:"complete"!==document.readyState&&window.addEventListener("pageshow",(function(){e.selectpicker.view.displayedValue!==i.value&&e.render()}))}return t},buildData:function(){var e=':not([hidden]):not([data-hidden="true"])',t=[],i=0,n=this.setPlaceholder()?1:0;this.options.hideDisabled&&(e+=":not(:disabled)");var r=this.$element[0].querySelectorAll("select > *"+e);function o(e){var i=t[t.length-1];i&&"divider"===i.type&&(i.optID||e.optID)||((e=e||{}).type="divider",t.push(e))}function s(e,i){if((i=i||{}).divider="true"===e.getAttribute("data-divider"),i.divider)o({optID:i.optID});else{var n=t.length,r=e.style.cssText,s=r?N(r):"",l=(e.className||"")+(i.optgroupClass||"");i.optID&&(l="opt "+l),i.optionClass=l.trim(),i.inlineStyle=s,i.text=e.textContent,i.content=e.getAttribute("data-content"),i.tokens=e.getAttribute("data-tokens"),i.subtext=e.getAttribute("data-subtext"),i.icon=e.getAttribute("data-icon"),e.liIndex=n,i.display=i.content||i.text,i.type="option",i.index=n,i.option=e,i.selected=!!e.selected,i.disabled=i.disabled||!!e.disabled,t.push(i)}}function l(r,l){var a=l[r],u=!(r-1<n)&&l[r-1],c=l[r+1],p=a.querySelectorAll("option"+e);if(p.length){var d,h,f={display:N(a.label),subtext:a.getAttribute("data-subtext"),icon:a.getAttribute("data-icon"),type:"optgroup-label",optgroupClass:" "+(a.className||"")};i++,u&&o({optID:i}),f.optID=i,t.push(f);for(var g=0,v=p.length;g<v;g++){var m=p[g];0===g&&(h=(d=t.length-1)+v),s(m,{headerIndex:d,lastIndex:h,optID:f.optID,optgroupClass:f.optgroupClass,disabled:a.disabled})}c&&o({optID:i})}}for(var a=r.length,u=n;u<a;u++){var c=r[u];"OPTGROUP"!==c.tagName?s(c,{}):l(u,r)}this.selectpicker.main.data=this.selectpicker.current.data=t},buildList:function(){var e=this,t=this.selectpicker.main.data,i=[],n=0;function r(t){var r,o=0;switch(t.type){case"divider":r=W.li(!1,q.DIVIDER,t.optID?t.optID+"div":void 0);break;case"option":(r=W.li(W.a(W.text.call(e,t),t.optionClass,t.inlineStyle),"",t.optID)).firstChild&&(r.firstChild.id=e.selectId+"-"+t.index);break;case"optgroup-label":r=W.li(W.label.call(e,t),"dropdown-header"+t.optgroupClass,t.optID)}t.element=r,i.push(r),t.display&&(o+=t.display.length),t.subtext&&(o+=t.subtext.length),t.icon&&(o+=1),o>n&&(n=o,e.selectpicker.view.widestOption=i[i.length-1])}!e.options.showTick&&!e.multiple||B.checkMark.parentNode||(B.checkMark.className=this.options.iconBase+" "+e.options.tickIcon+" check-mark",B.a.appendChild(B.checkMark));for(var o=t.length,s=0;s<o;s++)r(t[s]);this.selectpicker.main.elements=this.selectpicker.current.elements=i},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){var e,t,i=this,n=this.$element[0],r=this.setPlaceholder()&&0===n.selectedIndex,o=v(n,this.options.hideDisabled),s=o.length,a=this.$button[0],u=a.querySelector(".filter-option-inner-inner"),c=document.createTextNode(this.options.multipleSeparator),p=B.fragment.cloneNode(!1),d=!1;if(a.classList.toggle("bs-placeholder",i.multiple?!s:!m(n,o)),i.multiple||1!==o.length||(i.selectpicker.view.displayedValue=m(n,o)),"static"===this.options.selectedTextFormat)p=W.text.call(this,{text:this.options.title},!0);else if((e=this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")&&s>1)&&(e=(t=this.options.selectedTextFormat.split(">")).length>1&&s>t[1]||1===t.length&&s>=2),!1===e){if(!r){for(var h=0;h<s&&h<50;h++){var f=o[h],g=this.selectpicker.main.data[f.liIndex],_={};this.multiple&&h>0&&p.appendChild(c.cloneNode(!1)),f.title?_.text=f.title:g&&(g.content&&i.options.showContent?(_.content=g.content.toString(),d=!0):(i.options.showIcon&&(_.icon=g.icon),i.options.showSubtext&&!i.multiple&&g.subtext&&(_.subtext=" "+g.subtext),_.text=f.textContent.trim())),p.appendChild(W.text.call(this,_,!0))}s>49&&p.appendChild(document.createTextNode("..."))}}else{var b=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"])';this.options.hideDisabled&&(b+=":not(:disabled)");var y=this.$element[0].querySelectorAll("select > option"+b+", optgroup"+b+" option"+b).length,w="function"==typeof this.options.countSelectedText?this.options.countSelectedText(s,y):this.options.countSelectedText;p=W.text.call(this,{text:w.replace("{0}",s.toString()).replace("{1}",y.toString())},!0)}if(null==this.options.title&&(this.options.title=this.$element.attr("title")),p.childNodes.length||(p=W.text.call(this,{text:void 0!==this.options.title?this.options.title:this.options.noneSelectedText},!0)),a.title=p.textContent.replace(/<[^>]*>?/g,"").trim(),this.options.sanitize&&d&&l([p],i.options.whiteList,i.options.sanitizeFn),u.innerHTML="",u.appendChild(p),M.major<4&&this.$newElement[0].classList.contains("bs3-has-addon")){var x=a.querySelector(".filter-expand"),k=u.cloneNode(!0);k.className="filter-expand",x?a.replaceChild(k,x):a.appendChild(k)}this.$element.trigger("rendered"+P)},setStyle:function(e,t){var i,n=this.$button[0],r=this.$newElement[0],o=this.options.style.trim();this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,"")),M.major<4&&(r.classList.add("bs3"),r.parentNode.classList&&r.parentNode.classList.contains("input-group")&&(r.previousElementSibling||r.nextElementSibling)&&(r.previousElementSibling||r.nextElementSibling).classList.contains("input-group-addon")&&r.classList.add("bs3-has-addon")),i=e?e.trim():o,"add"==t?i&&n.classList.add.apply(n.classList,i.split(" ")):"remove"==t?i&&n.classList.remove.apply(n.classList,i.split(" ")):(o&&n.classList.remove.apply(n.classList,o.split(" ")),i&&n.classList.add.apply(n.classList,i.split(" ")))},liHeight:function(t){if(t||!1!==this.options.size&&!Object.keys(this.sizeInfo).length){var i,n=B.div.cloneNode(!1),r=B.div.cloneNode(!1),o=B.div.cloneNode(!1),s=document.createElement("ul"),l=B.li.cloneNode(!1),a=B.li.cloneNode(!1),u=B.a.cloneNode(!1),c=B.span.cloneNode(!1),p=this.options.header&&this.$menu.find("."+q.POPOVERHEADER).length>0?this.$menu.find("."+q.POPOVERHEADER)[0].cloneNode(!0):null,d=this.options.liveSearch?B.div.cloneNode(!1):null,h=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,f=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,g=this.$element.find("option")[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,c.className="text",u.className="dropdown-item "+(g?g.className:""),n.className=this.$menu[0].parentNode.className+" "+q.SHOW,n.style.width=0,"auto"===this.options.width&&(r.style.minWidth=0),r.className=q.MENU+" "+q.SHOW,o.className="inner "+q.SHOW,s.className=q.MENU+" inner "+("4"===M.major?q.SHOW:""),l.className=q.DIVIDER,a.className="dropdown-header",c.appendChild(document.createTextNode("")),this.selectpicker.current.data.length)for(var v=0;v<this.selectpicker.current.data.length;v++){var m=this.selectpicker.current.data[v];if("option"===m.type){i=m.element;break}}else i=B.li.cloneNode(!1),u.appendChild(c),i.appendChild(u);if(a.appendChild(c.cloneNode(!0)),this.selectpicker.view.widestOption&&s.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),s.appendChild(i),s.appendChild(l),s.appendChild(a),p&&r.appendChild(p),d){var _=document.createElement("input");d.className="bs-searchbox",_.className="form-control",d.appendChild(_),r.appendChild(d)}h&&r.appendChild(h),o.appendChild(s),r.appendChild(o),f&&r.appendChild(f),n.appendChild(r),document.body.appendChild(n);var b,y=i.offsetHeight,w=a?a.offsetHeight:0,k=p?p.offsetHeight:0,I=d?d.offsetHeight:0,$=h?h.offsetHeight:0,O=f?f.offsetHeight:0,E=e(l).outerHeight(!0),S=!!window.getComputedStyle&&window.getComputedStyle(r),C=r.offsetWidth,R=S?null:e(r),T={vert:x(S?S.paddingTop:R.css("paddingTop"))+x(S?S.paddingBottom:R.css("paddingBottom"))+x(S?S.borderTopWidth:R.css("borderTopWidth"))+x(S?S.borderBottomWidth:R.css("borderBottomWidth")),horiz:x(S?S.paddingLeft:R.css("paddingLeft"))+x(S?S.paddingRight:R.css("paddingRight"))+x(S?S.borderLeftWidth:R.css("borderLeftWidth"))+x(S?S.borderRightWidth:R.css("borderRightWidth"))},A={vert:T.vert+x(S?S.marginTop:R.css("marginTop"))+x(S?S.marginBottom:R.css("marginBottom"))+2,horiz:T.horiz+x(S?S.marginLeft:R.css("marginLeft"))+x(S?S.marginRight:R.css("marginRight"))+2};o.style.overflowY="scroll",b=r.offsetWidth-C,document.body.removeChild(n),this.sizeInfo.liHeight=y,this.sizeInfo.dropdownHeaderHeight=w,this.sizeInfo.headerHeight=k,this.sizeInfo.searchHeight=I,this.sizeInfo.actionsHeight=$,this.sizeInfo.doneButtonHeight=O,this.sizeInfo.dividerHeight=E,this.sizeInfo.menuPadding=T,this.sizeInfo.menuExtras=A,this.sizeInfo.menuWidth=C,this.sizeInfo.menuInnerInnerWidth=C-T.horiz,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=b,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var t,i=this,n=e(window),r=i.$newElement.offset(),o=e(i.options.container);i.options.container&&o.length&&!o.is("body")?((t=o.offset()).top+=parseInt(o.css("borderTopWidth")),t.left+=parseInt(o.css("borderLeftWidth"))):t={top:0,left:0};var s=i.options.windowPadding;this.sizeInfo.selectOffsetTop=r.top-t.top-n.scrollTop(),this.sizeInfo.selectOffsetBot=n.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-t.top-s[2],this.sizeInfo.selectOffsetLeft=r.left-t.left-n.scrollLeft(),this.sizeInfo.selectOffsetRight=n.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-t.left-s[1],this.sizeInfo.selectOffsetTop-=s[0],this.sizeInfo.selectOffsetLeft-=s[3]},setMenuSize:function(e){this.getSelectPosition();var t,i,n,r,o,s,l,a,u=this.sizeInfo.selectWidth,c=this.sizeInfo.liHeight,p=this.sizeInfo.headerHeight,d=this.sizeInfo.searchHeight,h=this.sizeInfo.actionsHeight,f=this.sizeInfo.doneButtonHeight,g=this.sizeInfo.dividerHeight,v=this.sizeInfo.menuPadding,m=0;if(this.options.dropupAuto&&(l=c*this.selectpicker.current.elements.length+v.vert,a=this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&l+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot,!0===this.selectpicker.isSearching&&(a=this.selectpicker.dropup),this.$newElement.toggleClass(q.DROPUP,a),this.selectpicker.dropup=a),"auto"===this.options.size)r=this.selectpicker.current.elements.length>3?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,i=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,n=r+p+d+h+f,s=Math.max(r-v.vert,0),this.$newElement.hasClass(q.DROPUP)&&(i=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert),o=i,t=i-p-d-h-f-v.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var _=0;_<this.options.size;_++)"divider"===this.selectpicker.current.data[_].type&&m++;t=(i=c*this.options.size+m*g+v.vert)-v.vert,o=i+p+d+h+f,n=s=""}this.$menu.css({"max-height":o+"px",overflow:"hidden","min-height":n+"px"}),this.$menuInner.css({"max-height":t+"px","overflow-y":"auto","min-height":s+"px"}),this.sizeInfo.menuInnerHeight=Math.max(t,1),this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth),"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(q.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-u),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(t){if(this.liHeight(t),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var i=this,n=e(window);this.setMenuSize(),this.options.liveSearch&&this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",(function(){return i.setMenuSize()})),"auto"===this.options.size?n.off("resize"+P+"."+this.selectId+".setMenuSize scroll"+P+"."+this.selectId+".setMenuSize").on("resize"+P+"."+this.selectId+".setMenuSize scroll"+P+"."+this.selectId+".setMenuSize",(function(){return i.setMenuSize()})):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&n.off("resize"+P+"."+this.selectId+".setMenuSize scroll"+P+"."+this.selectId+".setMenuSize")}this.createView(!1,!0,t)},setWidth:function(){var e=this;"auto"===this.options.width?requestAnimationFrame((function(){e.$menu.css("min-width","0"),e.$element.on("loaded"+P,(function(){e.liHeight(),e.setMenuSize();var t=e.$newElement.clone().appendTo("body"),i=t.css("width","auto").children("button").outerWidth();t.remove(),e.sizeInfo.selectWidth=Math.max(e.sizeInfo.totalMenuWidth,i),e.$newElement.css("width",e.sizeInfo.selectWidth+"px")}))})):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement[0].classList.remove("fit-width")},selectPosition:function(){this.$bsContainer=e('<div class="bs-container" />');var t,i,n,r=this,o=e(this.options.container),s=function(s){var l={},a=r.options.display||!!e.fn.dropdown.Constructor.Default&&e.fn.dropdown.Constructor.Default.display;r.$bsContainer.addClass(s.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(q.DROPUP,s.hasClass(q.DROPUP)),t=s.offset(),o.is("body")?i={top:0,left:0}:((i=o.offset()).top+=parseInt(o.css("borderTopWidth"))-o.scrollTop(),i.left+=parseInt(o.css("borderLeftWidth"))-o.scrollLeft()),n=s.hasClass(q.DROPUP)?0:s[0].offsetHeight,(M.major<4||"static"===a)&&(l.top=t.top-i.top+n,l.left=t.left-i.left),l.width=s[0].offsetWidth,r.$bsContainer.css(l)};this.$button.on("click.bs.dropdown.data-api",(function(){r.isDisabled()||(s(r.$newElement),r.$bsContainer.appendTo(r.options.container).toggleClass(q.SHOW,!r.$button.hasClass(q.SHOW)).append(r.$menu))})),e(window).off("resize"+P+"."+this.selectId+" scroll"+P+"."+this.selectId).on("resize"+P+"."+this.selectId+" scroll"+P+"."+this.selectId,(function(){r.$newElement.hasClass(q.SHOW)&&s(r.$newElement)})),this.$element.on("hide"+P,(function(){r.$menu.data("height",r.$menu.height()),r.$bsContainer.detach()}))},setOptionStatus:function(e){var t=this;if(t.noScroll=!1,t.selectpicker.view.visibleElements&&t.selectpicker.view.visibleElements.length)for(var i=0;i<t.selectpicker.view.visibleElements.length;i++){var n=t.selectpicker.current.data[i+t.selectpicker.view.position0],r=n.option;r&&(!0!==e&&t.setDisabled(n.index,n.disabled),t.setSelected(n.index,r.selected))}},setSelected:function(e,t){var i,n,r=this.selectpicker.main.elements[e],o=this.selectpicker.main.data[e],s=void 0!==this.activeIndex,l=this.activeIndex===e||t&&!this.multiple&&!s;o.selected=t,n=r.firstChild,t&&(this.selectedIndex=e),r.classList.toggle("selected",t),l?(this.focusItem(r,o),this.selectpicker.view.currentActive=r,this.activeIndex=e):this.defocusItem(r),n&&(n.classList.toggle("selected",t),t?n.setAttribute("aria-selected",!0):this.multiple?n.setAttribute("aria-selected",!1):n.removeAttribute("aria-selected")),l||s||!t||void 0===this.prevActiveIndex||(i=this.selectpicker.main.elements[this.prevActiveIndex],this.defocusItem(i))},setDisabled:function(e,t){var i,n=this.selectpicker.main.elements[e];this.selectpicker.main.data[e].disabled=t,i=n.firstChild,n.classList.toggle(q.DISABLED,t),i&&("4"===M.major&&i.classList.toggle(q.DISABLED,t),t?(i.setAttribute("aria-disabled",t),i.setAttribute("tabindex",-1)):(i.removeAttribute("aria-disabled"),i.setAttribute("tabindex",0)))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){this.isDisabled()?(this.$newElement[0].classList.add(q.DISABLED),this.$button.addClass(q.DISABLED).attr("aria-disabled",!0)):this.$button[0].classList.contains(q.DISABLED)&&(this.$newElement[0].classList.remove(q.DISABLED),this.$button.removeClass(q.DISABLED).attr("aria-disabled",!1))},clickListener:function(){var t=this,i=e(document);function n(){t.options.liveSearch?t.$searchbox.trigger("focus"):t.$menuInner.trigger("focus")}function r(){t.dropdown&&t.dropdown._popper&&t.dropdown._popper.state.isCreated?n():requestAnimationFrame(r)}i.data("spaceSelect",!1),this.$button.on("keyup",(function(e){/(32)/.test(e.keyCode.toString(10))&&i.data("spaceSelect")&&(e.preventDefault(),i.data("spaceSelect",!1))})),this.$newElement.on("show.bs.dropdown",(function(){M.major>3&&!t.dropdown&&(t.dropdown=t.$button.data("bs.dropdown"),t.dropdown._menu=t.$menu[0])})),this.$button.on("click.bs.dropdown.data-api",(function(){t.$newElement.hasClass(q.SHOW)||t.setSize()})),this.$element.on("shown"+P,(function(){t.$menuInner[0].scrollTop!==t.selectpicker.view.scrollTop&&(t.$menuInner[0].scrollTop=t.selectpicker.view.scrollTop),M.major>3?requestAnimationFrame(r):n()})),this.$menuInner.on("mouseenter","li a",(function(e){var i=this.parentElement,n=t.isVirtual()?t.selectpicker.view.position0:0,r=Array.prototype.indexOf.call(i.parentElement.children,i),o=t.selectpicker.current.data[r+n];t.focusItem(i,o,!0)})),this.$menuInner.on("click","li a",(function(i,n){var r=e(this),o=t.$element[0],s=t.isVirtual()?t.selectpicker.view.position0:0,l=t.selectpicker.current.data[r.parent().index()+s],a=l.index,u=m(o),c=o.selectedIndex,p=o.options[c],d=!0;if(t.multiple&&1!==t.options.maxOptions&&i.stopPropagation(),i.preventDefault(),!t.isDisabled()&&!r.parent().hasClass(q.DISABLED)){var h=l.option,f=e(h),g=h.selected,_=f.parent("optgroup"),y=_.find("option"),w=t.options.maxOptions,x=_.data("maxOptions")||!1;if(a===t.activeIndex&&(n=!0),n||(t.prevActiveIndex=t.activeIndex,t.activeIndex=void 0),t.multiple){if(h.selected=!g,t.setSelected(a,!g),t.focusedParent.focus(),!1!==w||!1!==x){var k=w<v(o).length,I=x<_.find("option:selected").length;if(w&&k||x&&I)if(w&&1==w)o.selectedIndex=-1,h.selected=!0,t.setOptionStatus(!0);else if(x&&1==x){for(var $=0;$<y.length;$++){var O=y[$];O.selected=!1,t.setSelected(O.liIndex,!1)}h.selected=!0,t.setSelected(a,!0)}else{var E="string"==typeof t.options.maxOptionsText?[t.options.maxOptionsText,t.options.maxOptionsText]:t.options.maxOptionsText,S="function"==typeof E?E(w,x):E,C=S[0].replace("{n}",w),R=S[1].replace("{n}",x),T=e('<div class="notify"></div>');S[2]&&(C=C.replace("{var}",S[2][w>1?0:1]),R=R.replace("{var}",S[2][x>1?0:1])),h.selected=!1,t.$menu.append(T),w&&k&&(T.append(e("<div>"+C+"</div>")),d=!1,t.$element.trigger("maxReached"+P)),x&&I&&(T.append(e("<div>"+R+"</div>")),d=!1,t.$element.trigger("maxReachedGrp"+P)),setTimeout((function(){t.setSelected(a,!1)}),10),T[0].classList.add("fadeOut"),setTimeout((function(){T.remove()}),1050)}}}else p&&(p.selected=!1),h.selected=!0,t.setSelected(a,!0);!t.multiple||t.multiple&&1===t.options.maxOptions?t.$button.trigger("focus"):t.options.liveSearch&&t.$searchbox.trigger("focus"),d&&(t.multiple||c!==o.selectedIndex)&&(b=[h.index,f.prop("selected"),u],t.$element.triggerNative("change"))}})),this.$menu.on("click","li."+q.DISABLED+" a, ."+q.POPOVERHEADER+", ."+q.POPOVERHEADER+" :not(.close)",(function(i){i.currentTarget==this&&(i.preventDefault(),i.stopPropagation(),t.options.liveSearch&&!e(i.target).hasClass("close")?t.$searchbox.trigger("focus"):t.$button.trigger("focus"))})),this.$menuInner.on("click",".divider, .dropdown-header",(function(e){e.preventDefault(),e.stopPropagation(),t.options.liveSearch?t.$searchbox.trigger("focus"):t.$button.trigger("focus")})),this.$menu.on("click","."+q.POPOVERHEADER+" .close",(function(){t.$button.trigger("click")})),this.$searchbox.on("click",(function(e){e.stopPropagation()})),this.$menu.on("click",".actions-btn",(function(i){t.options.liveSearch?t.$searchbox.trigger("focus"):t.$button.trigger("focus"),i.preventDefault(),i.stopPropagation(),e(this).hasClass("bs-select-all")?t.selectAll():t.deselectAll()})),this.$button.on("focus"+P,(function(e){var i=t.$element[0].getAttribute("tabindex");void 0!==i&&e.originalEvent&&e.originalEvent.isTrusted&&(this.setAttribute("tabindex",i),t.$element[0].setAttribute("tabindex",-1),t.selectpicker.view.tabindex=i)})).on("blur"+P,(function(e){void 0!==t.selectpicker.view.tabindex&&e.originalEvent&&e.originalEvent.isTrusted&&(t.$element[0].setAttribute("tabindex",t.selectpicker.view.tabindex),this.setAttribute("tabindex",-1),t.selectpicker.view.tabindex=void 0)})),this.$element.on("change"+P,(function(){t.render(),t.$element.trigger("changed"+P,b),b=null})).on("focus"+P,(function(){t.options.mobile||t.$button[0].focus()}))},liveSearchListener:function(){var e=this;this.$button.on("click.bs.dropdown.data-api",(function(){e.$searchbox.val()&&(e.$searchbox.val(""),e.selectpicker.search.previousValue=void 0)})),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",(function(e){e.stopPropagation()})),this.$searchbox.on("input propertychange",(function(){var t=e.$searchbox[0].value;if(e.selectpicker.search.elements=[],e.selectpicker.search.data=[],t){var i=[],n=t.toUpperCase(),r={},o=[],s=e._searchStyle(),l=e.options.liveSearchNormalize;l&&(n=E(n));for(var a=0;a<e.selectpicker.main.data.length;a++){var u=e.selectpicker.main.data[a];r[a]||(r[a]=w(u,n,s,l)),r[a]&&void 0!==u.headerIndex&&-1===o.indexOf(u.headerIndex)&&(u.headerIndex>0&&(r[u.headerIndex-1]=!0,o.push(u.headerIndex-1)),r[u.headerIndex]=!0,o.push(u.headerIndex),r[u.lastIndex+1]=!0),r[a]&&"optgroup-label"!==u.type&&o.push(a)}a=0;for(var c=o.length;a<c;a++){var p=o[a],d=o[a-1],h=(u=e.selectpicker.main.data[p],e.selectpicker.main.data[d]);("divider"!==u.type||"divider"===u.type&&h&&"divider"!==h.type&&c-1!==a)&&(e.selectpicker.search.data.push(u),i.push(e.selectpicker.main.elements[p]))}e.activeIndex=void 0,e.noScroll=!0,e.$menuInner.scrollTop(0),e.selectpicker.search.elements=i,e.createView(!0),j.call(e,i,t)}else e.selectpicker.search.previousValue&&(e.$menuInner.scrollTop(0),e.createView(!1));e.selectpicker.search.previousValue=t}))},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(e){var t=this.$element[0];if(void 0!==e){var i=m(t);if(b=[null,null,i],this.$element.val(e).trigger("changed"+P,b),this.$newElement.hasClass(q.SHOW))if(this.multiple)this.setOptionStatus(!0);else{var n=(t.options[t.selectedIndex]||{}).liIndex;"number"==typeof n&&(this.setSelected(this.selectedIndex,!1),this.setSelected(n,!0))}return this.render(),b=null,this.$element}return this.$element.val()},changeAll:function(e){if(this.multiple){void 0===e&&(e=!0);var t=this.$element[0],i=0,n=0,r=m(t);t.classList.add("bs-select-hidden");for(var o=0,s=this.selectpicker.current.data,l=s.length;o<l;o++){var a=s[o],u=a.option;u&&!a.disabled&&"divider"!==a.type&&(a.selected&&i++,u.selected=e,!0===e&&n++)}t.classList.remove("bs-select-hidden"),i!==n&&(this.setOptionStatus(),b=[null,null,r],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e){(e=e||window.event)&&e.stopPropagation(),this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(t){var i,n,r,o,s,l=e(this),a=l.hasClass("dropdown-toggle"),u=(a?l.closest(".dropdown"):l.closest(F.MENU)).data("this"),c=u.findLis(),p=!1,d=t.which===D.TAB&&!a&&!u.options.selectOnTab,h=H.test(t.which)||d,f=u.$menuInner[0].scrollTop,g=!0===u.isVirtual()?u.selectpicker.view.position0:0;if(!(t.which>=112&&t.which<=123))if(!(n=u.$newElement.hasClass(q.SHOW))&&(h||t.which>=48&&t.which<=57||t.which>=96&&t.which<=105||t.which>=65&&t.which<=90)&&(u.$button.trigger("click.bs.dropdown.data-api"),u.options.liveSearch))u.$searchbox.trigger("focus");else{if(t.which===D.ESCAPE&&n&&(t.preventDefault(),u.$button.trigger("click.bs.dropdown.data-api").trigger("focus")),h){if(!c.length)return;-1!==(i=(r=u.selectpicker.main.elements[u.activeIndex])?Array.prototype.indexOf.call(r.parentElement.children,r):-1)&&u.defocusItem(r),t.which===D.ARROW_UP?(-1!==i&&i--,i+g<0&&(i+=c.length),u.selectpicker.view.canHighlight[i+g]||-1==(i=u.selectpicker.view.canHighlight.slice(0,i+g).lastIndexOf(!0)-g)&&(i=c.length-1)):(t.which===D.ARROW_DOWN||d)&&(++i+g>=u.selectpicker.view.canHighlight.length&&(i=u.selectpicker.view.firstHighlightIndex),u.selectpicker.view.canHighlight[i+g]||(i=i+1+u.selectpicker.view.canHighlight.slice(i+g+1).indexOf(!0))),t.preventDefault();var v=g+i;t.which===D.ARROW_UP?0===g&&i===c.length-1?(u.$menuInner[0].scrollTop=u.$menuInner[0].scrollHeight,v=u.selectpicker.current.elements.length-1):p=(s=(o=u.selectpicker.current.data[v]).position-o.height)<f:(t.which===D.ARROW_DOWN||d)&&(i===u.selectpicker.view.firstHighlightIndex?(u.$menuInner[0].scrollTop=0,v=u.selectpicker.view.firstHighlightIndex):p=(s=(o=u.selectpicker.current.data[v]).position-u.sizeInfo.menuInnerHeight)>f),r=u.selectpicker.current.elements[v],u.activeIndex=u.selectpicker.current.data[v].index,u.focusItem(r),u.selectpicker.view.currentActive=r,p&&(u.$menuInner[0].scrollTop=s),u.options.liveSearch?u.$searchbox.trigger("focus"):l.trigger("focus")}else if(!l.is("input")&&!U.test(t.which)||t.which===D.SPACE&&u.selectpicker.keydown.keyHistory){var m,_,b=[];t.preventDefault(),u.selectpicker.keydown.keyHistory+=L[t.which],u.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(u.selectpicker.keydown.resetKeyHistory.cancel),u.selectpicker.keydown.resetKeyHistory.cancel=u.selectpicker.keydown.resetKeyHistory.start(),_=u.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(_)&&(_=_.charAt(0));for(var y=0;y<u.selectpicker.current.data.length;y++){var x=u.selectpicker.current.data[y];w(x,_,"startsWith",!0)&&u.selectpicker.view.canHighlight[y]&&b.push(x.index)}if(b.length){var k=0;c.removeClass("active").find("a").removeClass("active"),1===_.length&&(-1===(k=b.indexOf(u.activeIndex))||k===b.length-1?k=0:k++),m=b[k],f-(o=u.selectpicker.main.data[m]).position>0?(s=o.position-o.height,p=!0):(s=o.position-u.sizeInfo.menuInnerHeight,p=o.position>f+u.sizeInfo.menuInnerHeight),r=u.selectpicker.main.elements[m],u.activeIndex=b[k],u.focusItem(r),r&&r.firstChild.focus(),p&&(u.$menuInner[0].scrollTop=s),l.trigger("focus")}}n&&(t.which===D.SPACE&&!u.selectpicker.keydown.keyHistory||t.which===D.ENTER||t.which===D.TAB&&u.options.selectOnTab)&&(t.which!==D.SPACE&&t.preventDefault(),u.options.liveSearch&&t.which===D.SPACE||(u.$menuInner.find(".active a").trigger("click",!0),l.trigger("focus"),u.options.liveSearch||(t.preventDefault(),e(document).data("spaceSelect",!0))))}},mobile:function(){this.options.mobile=!0,this.$element[0].classList.add("mobile-device")},refresh:function(){var t=e.extend({},this.options,this.$element.data());this.options=t,this.checkDisabled(),this.buildData(),this.setStyle(),this.render(),this.buildList(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed"+P)},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.selectpicker.view.titleOption&&this.selectpicker.view.titleOption.parentNode&&this.selectpicker.view.titleOption.parentNode.removeChild(this.selectpicker.view.titleOption),this.$element.off(P).removeData("selectpicker").removeClass("bs-select-hidden selectpicker"),e(window).off(P+"."+this.selectId)}};var Q=e.fn.selectpicker;function K(){if(e.fn.dropdown)return(e.fn.dropdown.Constructor._dataApiKeydownHandler||e.fn.dropdown.Constructor.prototype.keydown).apply(this,arguments)}e.fn.selectpicker=V,e.fn.selectpicker.Constructor=G,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=Q,this},e(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.dropdown.data-api",':not(.bootstrap-select) > [data-toggle="dropdown"]',K).on("keydown.bs.dropdown.data-api",":not(.bootstrap-select) > .dropdown-menu",K).on("keydown"+P,'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',G.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',(function(e){e.stopPropagation()})),e(window).on("load"+P+".data-api",(function(){e(".selectpicker").each((function(){var t=e(this);V.call(t,t.data())}))}))}(e)}.apply(t,n),void 0===r||(e.exports=r)},81491:function(e,t,i){var n,r,o;r=[i(19755)],n=function(e){"use strict";e.extendext=function(){var t,i,n,r,o,s,l=arguments[0]||{},a=1,u=arguments.length,c=!1,p="default";for("boolean"==typeof l&&(c=l,l=arguments[a++]||{}),"string"==typeof l&&("concat"!==(p=l.toLowerCase())&&"replace"!==p&&"extend"!==p&&(p="default"),l=arguments[a++]||{}),"object"==typeof l||e.isFunction(l)||(l={}),a===u&&(l=this,a--);a<u;a++)if(null!==(t=arguments[a]))if(e.isArray(t)&&"default"!==p)switch(s=l&&e.isArray(l)?l:[],p){case"concat":l=s.concat(e.extend(c,[],t));break;case"replace":l=e.extend(c,[],t);break;case"extend":t.forEach((function(t,i){if("object"==typeof t){var n=e.isArray(t)?[]:{};s[i]=e.extendext(c,p,s[i]||n,t)}else-1===s.indexOf(t)&&s.push(t)})),l=s}else for(i in t)r=t[i],"__proto__"!==i&&l!==r&&(c&&r&&(e.isPlainObject(r)||(o=e.isArray(r)))?(n=l[i],s=o&&!Array.isArray(n)?[]:o||e.isPlainObject(n)?n:{},o=!1,l[i]=e.extendext(c,p,s,r)):void 0!==r&&(l[i]=r));return l}},void 0===(o="function"==typeof n?n.apply(t,r):n)||(e.exports=o)},76801:(e,t,i)=>{"use strict";var n=i(79989),r=i(84328).includes,o=i(3689),s=i(87370);n({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")}}]);